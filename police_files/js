var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(h,g,a){h instanceof String&&(h=String(h));for(var d=h.length,b=0;b<d;b++){var e=h[b];if(g.call(a,e,b,h))return{i:b,v:e}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(h,g,a){h!=Array.prototype&&h!=Object.prototype&&(h[g]=a.value)};$jscomp.getGlobal=function(h){h=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,h];for(var g=0;g<h.length;++g){var a=h[g];if(a&&a.Math==Math)return a}return globalThis};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(h,g,a,d){if(g){a=$jscomp.global;h=h.split(".");for(d=0;d<h.length-1;d++){var b=h[d];b in a||(a[b]={});a=a[b]}h=h[h.length-1];d=a[h];g=g(d);g!=d&&null!=g&&$jscomp.defineProperty(a,h,{configurable:!0,writable:!0,value:g})}};$jscomp.polyfill("Array.prototype.find",function(h){return h?h:function(g,a){return $jscomp.findInternal(this,g,a).v}},"es6","es3");$jscomp.polyfill("Object.is",function(h){return h?h:function(g,a){return g===a?0!==g||1/g===1/a:g!==g&&a!==a}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(h){return h?h:function(g,a){var d=this;d instanceof String&&(d=String(d));var b=d.length;a=a||0;for(0>a&&(a=Math.max(a+b,0));a<b;a++){var e=d[a];if(e===g||Object.is(e,g))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(h,g,a){if(null==h)throw new TypeError("The 'this' value for String.prototype."+a+" must not be null or undefined");if(g instanceof RegExp)throw new TypeError("First argument to String.prototype."+a+" must not be a regular expression");return h+""};$jscomp.polyfill("String.prototype.includes",function(h){return h?h:function(g,a){return-1!==$jscomp.checkStringArgs(this,g,"includes").indexOf(g,a||0)}},"es6","es3");if("undefined"===typeof Recite||!Recite)var Recite={};
Recite=function(){function h(b){var a={persist:!0,autoEnable:!1,observeDom:!0,selectionMethod:"tooltip",rootNode:document.body,css:Recite.baseUrl+"/assets/"+Recite.version+"/css/recite.css",enableButton:".recite-enable",enableFragment:"#recite-enable",enableButtonToggle:!1,buttonDeactivateContent:"Deactivate Recite",buttonDeactivateContentElement:".recite-enable",parser:Recite.Parser.Html,autoCache:!0,defaultLanguage:null,showBrand:!0,shadowDomSupport:!1,classname:null,button:null,wrapTag:null,mode:null};
b=b||{};b=Recite.Util.merge(a,b);g(b);return b}function g(b,a){"undefined"===typeof a&&(a=Recite);Recite.Util.each(b,function(b,c){b=a[b];"undefined"!==typeof b&&(b.setOptions?b.setOptions(c):g(c,b))})}function a(a){b=h(Recite.Util.merge(b,a));try{b=h(Recite.Util.merge(b,JSON.parse("".replace("{dot}","."))))}catch(l){Recite.Debug.log("API Options are not loaded correctly")}Recite.Debug.log("Recite","(Version "+Recite.version+") Load called with options:",a);a=Recite.Sizzle(b.enableButton);
Recite.Event.publish("Recite:load");var c=Recite.Storage.Cookie.load("Recite.Persist");null!==b.enableFragment&&window.location.hash===b.enableFragment&&Recite.enable();(b.autoEnable&&!1!==c||b.persist&&!0===c)&&Recite.enable();null!==b.enableButton&&Recite.DomEvent.add(a,"click",function(){b.enableButtonToggle?d?Recite.disable():Recite.enable():Recite.enable()});Recite.Event.subscribe("Recite:ModuleEvent",function(b,a){Recite.Tracker.track(a.name,a.event)})}var d=!1,b={};return{namespace:function(){var b=
arguments,a=null,d,f;for(d=0;d<b.length;d+=1){var k=(""+b[d]).split(".");a=Recite;for(f="Recite"===k[0]?1:0;f<k.length;f+=1)a[k[f]]=a[k[f]]||{},a=a[k[f]]}return a},load:function(b){"complete"===document.readyState||"interactive"===document.readyState?a(b):Recite.DomEvent.add(window,"load",function(){a(b)})},enable:function(){if(d)return Recite.Debug.log("Recite","Already enabled, not re-enabling."),null;b.persist&&Recite.Storage.Cookie.save("Recite.Persist",!0,365);if(b.enableButtonToggle){var a=
Recite.Sizzle(b.buttonDeactivateContentElement);Recite.Util.each(a,function(a,d){d.innerHTML=b.buttonDeactivateContent})}Recite.AssetLoader.css(b.css,function(){Recite.Debug.log("Recite","Recite CSS loaded");Recite.Controls.load(document)});Recite.Event.subscribe("Controls:loaded",function(){Recite.Preferences.load();Recite.Controls.Desktop.applyTabOrder();Recite.Util.each(Recite.Sizzle(".recite-version"),function(b,a){a.innerHTML="Ver: "+Recite.version})});Recite.Event.subscribe("Recite.Parser:parsed",
function(){b.observeDom&&Recite.Dom.Observer.observe(document.getElementById("recite-wrapper"))});Recite.Event.subscribe("Preferences:load",function(){null!==b.defaultLanguage&&null===Recite.Preferences.get("language")&&Recite.Preferences.set("language",b.defaultLanguage)});"tooltip"===b.selectionMethod?window.setTimeout(function(){if(null!==b.rootNode){var a=b.parser.parse(b.rootNode);Recite.PlayerControls.invoke(a)}},0):"highlight"===b.selectionMethod&&(b.observeDom=!1,Recite.Selection.setOptions({playOnSelection:!0}));
Recite.FrameUpdater.enabled()&&Recite.FrameUpdater.load();Recite.Docreader.enabled()&&Recite.Docreader.load();Recite.Language.Translate.init();Recite.Event.publish("Recite:enable");Recite.Debug.log("Recite","Recite enabled (Version:"+Recite.version+")");Recite.Tracker.track("enable");d=!0;Recite.Storage.Cookie.save("Recite.Persist",!0,365)},disable:function(b){var a=Recite.Controls.disableOverlay();"undefined"!=typeof b?(Recite.Event.publish("Recite:disable"),Recite.Storage.Cookie.save("Recite.Persist",
!1,365),window.location.reload()):Recite.Gui.Modal.show(Recite.Message.getMessage("toolbarCloseHeader","About to close!"),Recite.Message.getMessage("toolbarCloseDialog","You are about to close the Recite Me toolbar.  Are you sure you wish to continue? This will cause the page to be refreshed and you will lose any unsaved data."),Recite.Message.getMessage("toolbarCloseOk","OK"),Recite.Message.getMessage("toolbarCloseCancel","Cancel"),function(){Recite.Event.publish("Recite:disable");Recite.Storage.Cookie.save("Recite.Persist",
!1,365);window.location.reload()},function(){Recite.Gui.Notification.show("Close operation canceled");Recite.Controls.reEnableOverlay(a)})},isEnabled:function(){return d},getOptions:function(a){if("undefined"===typeof a)return b;var c;a=a.split(".");var d=b;for(c=0;c<a.length;c++)if(d=d[a[c]],"undefined"===typeof d)return null;return d},version:"3.2.56",baseUrl:"https://api.reciteme.com"}}();null!==null&&null();Recite.namespace("Recite.Util");
Recite.Util=function(){var h=[],g=Object.prototype.toString,a=null;h["[object Boolean]"]="boolean";h["[object Number]"]="number";h["[object String]"]="string";h["[object Function]"]="function";h["[object Array]"]="array";h["[object Date]"]="date";h["[object RegExp]"]="regexp";h["[object Object]"]="object";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=
function(){return this.replace(/\s+$/,"")},String.prototype.fulltrim=function(){return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")});return{isFunction:function(a){return"function"===Recite.Util.type(a)},isArray:Array.isArray||function(a){return"array"===Recite.Util.type(a)},isWindow:function(a){return a&&"object"===typeof a&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):h[g.call(a)]||"object"},clone:function(a){return ReciteJSON.parse(ReciteJSON.stringify(a))},
guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})},each:function(a,b,e){var c,d=0,f=a.length,k=void 0===f;if(e)if(k)for(c in a){if(!1===b.apply(a[c],e))break}else for(;d<f&&!1!==b.apply(a[d++],e););else if(k)for(c in a){if(!1===b.call(a[c],c,a[c]))break}else for(;d<f&&!1!==b.call(a[d],d,a[d++]););return a},merge:function(a,b){for(var d in b)try{a[d]=b[d].constructor===Object?Recite.Util.merge(a[d],
b[d]):b[d]}catch(c){a[d]=b[d]}return a},inArray:function(a,b,e){if(b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,a,e);var c=b.length;for(e=e?0>e?Math.max(0,c+e):e:0;e<c;e++)if(e in b&&b[e]===a)return e}return-1},getWindowLocationOrigin:function(a){return a.location.origin||a.location.protocol+"//"+a.location.host},buildQueryString:function(a){var b="";Recite.Util.each(a,function(a,c){b+="&"+a+"="+encodeURIComponent(c)});return b="?"+b.substring(1)},unSetIFramePointerEvents:function(){if(null==
a){var d=Recite.Sizzle("iframe");a=[];Recite.Util.each(d,function(b,d){a.push({frame:d,state:void 0==d.style.pointerEvents?"all":d.style.pointerEvents})})}Recite.Util.each(a,function(a,d){d.frame.style.pointerEvents="none"})},reSetIFramePointerEvents:function(){null!==a&&Recite.Util.each(a,function(a,b){b.frame.style.pointerEvents=b.state})}}}();Recite.namespace("Event");
Recite.Event=function(){var h={},g=-1;return{publish:function(a,d){if(!h[a])return!1;setTimeout(function(){for(var b=h[a],e=b?b.length:0;e--;)b[e].func(a,d)},0);return!0},subscribe:function(a,d){h[a]||(h[a]=[]);var b=(++g).toString();h[a].push({token:b,func:d});return b},unsubscribe:function(a){for(var d in h)if(h[d])for(var b=0,e=h[d].length;b<e;b++)if(h[d][b].token===a)return h[d].splice(b,1),a;return!1}}}();Recite.namespace("Debug");
Recite.Debug=function(){var h={log:!1};return{setOptions:function(g){h=Recite.Util.merge(h,g)},enable:function(){h.log=!0},log:function(g){null===g&&(g="Recite.Debug");arguments[0]="["+g+"]";h.log&&window.console&&Function.apply.call(console.log,console,arguments)}}}();Recite.namespace("Recite.DomEvent");
Recite.DomEvent=function(){return{add:function(h,g,a){h=Recite.Util.isArray(h)?h:[h];Recite.Util.each(h,function(d,b){b.addEventListener?b.addEventListener(g,a,!1):b.attachEvent&&(b["e"+g+a]=a,b[g+a]=function(){var d=window.event;d.target=d.target||d.srcElement;b["e"+g+a](d)},b.attachEvent("on"+g,b[g+a]))})},remove:function(h,g,a){h=Recite.Util.isArray(h)?h:[h];Recite.Util.each(h,function(d,b){b.removeEventListener?b.removeEventListener(g,a,!1):b.detachEvent&&"undefined"!==typeof b[g+a]&&(b.detachEvent("on"+
g,b[g+a]),b[g+a]=null,b["e"+g+a]=null)})}}}();Recite.namespace("XDM");
Recite.XDM=function(){var h,g,a=1,d;return{postMessage:function(b,d,c){d&&(c=c||parent,window.postMessage?c.postMessage(b,d.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):d&&(c.location=d.replace(/#.*$/,"")+"#"+ +new Date+a++ +"&"+b))},receiveMessage:function(a,e){window.postMessage?(a&&(d=function(b){if("string"===typeof e&&b.origin!==e||"[object Function]"===Object.prototype.toString.call(e)&&!1===e(b.origin))return!1;a(b)}),Recite.DomEvent.add(window,"message",d)):(h&&clearInterval(h),h=null,a&&(h=setInterval(function(){var b=
document.location.hash,d=/^#?\d+&/;b!==g&&d.test(b)&&(g=b,a({data:b.replace(d,"")}))},100)))}}}();
(function(){function h(a,b,c,f,k,e){k=0;for(var t=f.length;k<t;k++){var u=f[k];if(u){var l=!1;for(u=u[a];u;){if(u[d]===c){l=f[u.sizset];break}1!==u.nodeType||e||(u[d]=c,u.sizset=k);if(u.nodeName.toLowerCase()===b){l=u;break}u=u[a]}f[k]=l}}}function g(a,b,c,f,k,e){k=0;for(var t=f.length;k<t;k++){var u=f[k];if(u){var l=!1;for(u=u[a];u;){if(u[d]===c){l=f[u.sizset];break}if(1===u.nodeType)if(e||(u[d]=c,u.sizset=k),"string"!==typeof b){if(u===b){l=!0;break}}else if(0<n.filter(b,[u]).length){l=u;break}u=
u[a]}f[k]=l}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),b=0,e=Object.prototype.toString,c=!1,l=!0,f=/\\/g,k=/\r\n/g,m=/\W/;[0,0].sort(function(){l=!1;return 0});var n=function(b,t,c,f){c=c||[];var k=t=t||document;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!b||"string"!==typeof b)return c;var u,d,l,q=!0,y=n.isXML(t),m=[],g=b;do if(a.exec(""),u=a.exec(g))if(g=
u[3],m.push(u[1]),u[2]){var B=u[3];break}while(u);if(1<m.length&&w.exec(b))if(2===m.length&&p.relative[m[0]])var h=C(m[0]+m[1],t,f);else for(h=p.relative[m[0]]?[t]:n(m.shift(),t);m.length;)b=m.shift(),p.relative[b]&&(b+=m.shift()),h=C(b,h,f);else if(!f&&1<m.length&&9===t.nodeType&&!y&&p.match.ID.test(m[0])&&!p.match.ID.test(m[m.length-1])&&(u=n.find(m.shift(),t,y),t=u.expr?n.filter(u.expr,u.set)[0]:u.set[0]),t)for(u=f?{expr:m.pop(),set:v(f)}:n.find(m.pop(),1!==m.length||"~"!==m[0]&&"+"!==m[0]||!t.parentNode?
t:t.parentNode,y),h=u.expr?n.filter(u.expr,u.set):u.set,0<m.length?d=v(h):q=!1;m.length;)u=l=m.pop(),p.relative[l]?u=m.pop():l="",null==u&&(u=t),p.relative[l](d,u,y);else d=[];d||(d=h);d||n.error(l||b);if("[object Array]"===e.call(d))if(q)if(t&&1===t.nodeType)for(b=0;null!=d[b];b++)d[b]&&(!0===d[b]||1===d[b].nodeType&&n.contains(t,d[b]))&&c.push(h[b]);else for(b=0;null!=d[b];b++)d[b]&&1===d[b].nodeType&&c.push(h[b]);else c.push.apply(c,d);else v(d,c);B&&(n(B,k,c,f),n.uniqueSort(c));return c};n.uniqueSort=
function(a){if(A&&(c=l,a.sort(A),c))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};n.matches=function(a,b){return n(a,null,null,b)};n.matchesSelector=function(a,b){return 0<n(b,null,null,[a]).length};n.find=function(a,b,c){var t,u;if(!a)return[];var k=0;for(t=p.order.length;k<t;k++){var d=p.order[k];if(u=p.leftMatch[d].exec(a)){var l=u[1];u.splice(1,1);if("\\"!==l.substr(l.length-1)){u[1]=(u[1]||"").replace(f,"");var e=p.find[d](u,b,c);if(null!=e){a=a.replace(p.match[d],"");break}}}}e||
(e="undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]);return{set:e,expr:a}};n.filter=function(a,b,c,f){for(var t,k,d,u,l,e,q,m,v=a,y=[],g=b,B=b&&b[0]&&n.isXML(b[0]);a&&b.length;){for(d in p.filter)if(null!=(t=p.leftMatch[d].exec(a))&&t[2]&&(e=p.filter[d],l=t[1],k=!1,t.splice(1,1),"\\"!==l.substr(l.length-1))){g===y&&(y=[]);if(p.preFilter[d])if(t=p.preFilter[d](t,g,c,y,f,B),!t)k=u=!0;else if(!0===t)continue;if(t)for(q=0;null!=(l=g[q]);q++)l&&(u=e(l,t,q,g),m=f^u,c&&null!=u?
m?k=!0:g[q]=!1:m&&(y.push(l),k=!0));if(void 0!==u){c||(g=y);a=a.replace(p.match[d],"");if(!k)return[];break}}if(a===v)if(null==k)n.error(a);else break;v=a}return g};n.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};var q=n.getText=function(a){var b;var c=a.nodeType;var f="";if(c)if(1===c||9===c||11===c){if("string"===typeof a.textContent)return a.textContent;if("string"===typeof a.innerText)return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)f+=q(a)}else{if(3===
c||4===c)return a.nodeValue}else for(c=0;b=a[c];c++)8!==b.nodeType&&(f+=q(b));return f},p=n.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c="string"===typeof b,t=c&&!m.test(b);c=c&&!t;t&&(b=b.toLowerCase());t=0;for(var f=a.length,k;t<f;t++)if(k=a[t]){for(;(k=k.previousSibling)&&1!==k.nodeType;);
a[t]=c||k&&k.nodeName.toLowerCase()===b?k||!1:k===b}c&&n.filter(b,a,!0)},">":function(a,b){var c,t="string"===typeof b,f=0,k=a.length;if(t&&!m.test(b))for(b=b.toLowerCase();f<k;f++){if(c=a[f])c=c.parentNode,a[f]=c.nodeName.toLowerCase()===b?c:!1}else{for(;f<k;f++)(c=a[f])&&(a[f]=t?c.parentNode:c.parentNode===b);t&&n.filter(b,a,!0)}},"":function(a,c,f){var t=b++,k=g;if("string"===typeof c&&!m.test(c)){var d=c=c.toLowerCase();k=h}k("parentNode",c,t,a,d,f)},"~":function(a,c,f){var t=b++,k=g;if("string"===
typeof c&&!m.test(c)){var d=c=c.toLowerCase();k=h}k("previousSibling",c,t,a,d,f)}},find:{ID:function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if("undefined"!==typeof b.getElementsByName){var c=[];b=b.getElementsByName(a[1]);for(var f=0,k=b.length;f<k;f++)b[f].getAttribute("name")===a[1]&&c.push(b[f]);return 0===c.length?null:c}},TAG:function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a[1])}},
preFilter:{CLASS:function(a,b,c,k,d,l){a=" "+a[1].replace(f,"")+" ";if(l)return a;l=0;for(var t;null!=(t=b[l]);l++)t&&(d^(t.className&&0<=(" "+t.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?c||k.push(t):c&&(b[l]=!1));return!1},ID:function(a){return a[1].replace(f,"")},TAG:function(a,b){return a[1].replace(f,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||n.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var c=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||
!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=c[1]+(c[2]||1)-0;a[3]=c[3]-0}else a[2]&&n.error(a[0]);a[0]=b++;return a},ATTR:function(a,b,c,k,d,l){b=a[1]=a[1].replace(f,"");!l&&p.attrMap[b]&&(a[1]=p.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(f,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,f,k,d){if("not"===b[1])if(1<(a.exec(b[3])||"").length||/^\w/.test(b[3]))b[3]=n(b[3],null,null,c);else return b=n.filter(b[3],c,f,1^d),f||k.push.apply(k,b),!1;else if(p.match.POS.test(b[0])||p.match.CHILD.test(b[0]))return!0;
return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!n(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),
c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},
image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,f){return b===f.length-
1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,f){var k=b[1],d=p.filters[k];if(d)return d(a,c,b,f);if("contains"===k)return 0<=(a.textContent||a.innerText||q([a])||"").indexOf(b[3]);if("not"===k){b=b[3];c=0;for(f=b.length;c<f;c++)if(b[c]===a)return!1;return!0}n.error(k)},CHILD:function(a,b){var c;
var f=b[1];var k=a;switch(f){case "only":case "first":for(;k=k.previousSibling;)if(1===k.nodeType)return!1;if("first"===f)return!0;k=a;case "last":for(;k=k.nextSibling;)if(1===k.nodeType)return!1;return!0;case "nth":f=b[2];var t=b[3];if(1===f&&0===t)return!0;b=b[0];if((c=a.parentNode)&&(c[d]!==b||!a.nodeIndex)){var l=0;for(k=c.firstChild;k;k=k.nextSibling)1===k.nodeType&&(k.nodeIndex=++l);c[d]=b}a=a.nodeIndex-t;return 0===f?0===a:0===a%f&&0<=a/f}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===
b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var c=b[1];a=n.attr?n.attr(a,c):p.attrHandle[c]?p.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c);c=a+"";var f=b[2];b=b[4];return null==a?"!="===f:!f&&n.attr?null!=a:"="===f?c===b:"*="===f?0<=c.indexOf(b):"~="===f?0<=(" "+c+" ").indexOf(b):b?"!="===f?c!==b:"^="===f?0===c.indexOf(b):"$="===f?c.substr(c.length-
b.length)===b:"|="===f?c===b||c.substr(0,b.length+1)===b+"-":!1:c&&!1!==a},POS:function(a,b,c,f){var k=p.setFilters[b[2]];if(k)return k(a,c,b,f)}}},w=p.match.POS,r=function(a,b){return"\\"+(b-0+1)},x;for(x in p.match)p.match[x]=new RegExp(p.match[x].source+/(?![^\[]*\])(?![^\(]*\))/.source),p.leftMatch[x]=new RegExp(/(^(?:.|\r|\n)*?)/.source+p.match[x].source.replace(/\\(\d+)/g,r));p.match.globalPOS=w;var v=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,
0)[0].nodeType}catch(u){v=function(a,b){var c=0;b=b||[];if("[object Array]"===e.call(a))Array.prototype.push.apply(b,a);else if("number"===typeof a.length)for(var f=a.length;c<f;c++)b.push(a[c]);else for(;a[c];c++)b.push(a[c]);return b}}if(document.documentElement.compareDocumentPosition)var A=function(a,b){return a===b?(c=!0,0):a.compareDocumentPosition&&b.compareDocumentPosition?a.compareDocumentPosition(b)&4?-1:1:a.compareDocumentPosition?-1:1};else{A=function(a,b){if(a===b)return c=!0,0;if(a.sourceIndex&&
b.sourceIndex)return a.sourceIndex-b.sourceIndex;var f=[],k=[];var d=a.parentNode;var l=b.parentNode;var e=d;if(d===l)return z(a,b);if(!d)return-1;if(!l)return 1;for(;e;)f.unshift(e),e=e.parentNode;for(e=l;e;)k.unshift(e),e=e.parentNode;d=f.length;l=k.length;for(e=0;e<d&&e<l;e++)if(f[e]!==k[e])return z(f[e],k[e]);return e===d?z(a,k[e],-1):z(f[e],b,1)};var z=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1}}(function(){var a=document.createElement("div"),
b="script"+(new Date).getTime(),c=document.documentElement;a.innerHTML="<a name='"+b+"'/>";c.insertBefore(a,c.firstChild);document.getElementById(b)&&(p.find.ID=function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(b=b.getElementById(a[1]))?b.id===a[1]||"undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id").nodeValue===a[1]?[b]:void 0:[]},p.filter.ID=function(a,b){var c="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===
b});c.removeChild(a);c=a=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));0<a.getElementsByTagName("*").length&&(p.find.TAG=function(a,b){b=b.getElementsByTagName(a[1]);if("*"===a[1]){a=[];for(var c=0;b[c];c++)1===b[c].nodeType&&a.push(b[c]);b=a}return b});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(p.attrHandle.href=function(a){return a.getAttribute("href",
2)});a=null})();document.querySelectorAll&&function(){var a=n,b=document.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){n=function(b,c,f,k){c=c||document;if(!k&&!n.isXML(c)){var d=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(d&&(1===c.nodeType||9===c.nodeType)){if(d[1])return v(c.getElementsByTagName(b),f);if(d[2]&&p.find.CLASS&&c.getElementsByClassName)return v(c.getElementsByClassName(d[2]),f)}if(9===c.nodeType){if("body"===
b&&c.body)return v([c.body],f);if(d&&d[3]){var l=c.getElementById(d[3]);if(l&&l.parentNode){if(l.id===d[3])return v([l],f)}else return v([],f)}try{return v(c.querySelectorAll(b),f)}catch(J){}}else if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){d=c;var e=(l=c.getAttribute("id"))||"__sizzle__",q=c.parentNode,m=/^\s*[+~]/.test(b);l?e=e.replace(/'/g,"\\$&"):c.setAttribute("id",e);m&&q&&(c=c.parentNode);try{if(!m||q)return v(c.querySelectorAll("[id='"+e+"'] "+b),f)}catch(J){}finally{l||d.removeAttribute("id")}}}return a(b,
c,f,k)};for(var c in a)n[c]=a[c];b=null}}();(function(){var a=document.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(document.createElement("div"),"div"),f=!1;try{b.call(document.documentElement,"[test!='']:sizzle")}catch(F){f=!0}n.matchesSelector=function(a,k){k=k.replace(/=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!n.isXML(a))try{if(f||!p.match.PSEUDO.test(k)&&!/!=/.test(k)){var d=b.call(a,k);if(d||!c||a.document&&11!==a.document.nodeType)return d}}catch(D){}return 0<
n(k,null,null,[a]).length}}})();(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(p.order.splice(1,0,"CLASS"),p.find.CLASS=function(a,b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},a=null))})();n.contains=document.documentElement.contains?function(a,
b){return a!==b&&(a.contains?a.contains(b):!0)}:document.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(){return!1};n.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var C=function(a,b,c){var f,k=[],d="";for(b=b.nodeType?[b]:b;f=p.match.PSEUDO.exec(a);)d+=f[0],a=a.replace(p.match.PSEUDO,"");a=p.relative[a]?a+"*":a;f=0;for(var l=b.length;f<l;f++)n(a,b[f],k,c);return n.filter(d,k)};window.Recite.Sizzle=
n})();
(function(h){function g(b,q){b=b?b:"";q=q||{};if("object"==typeof b&&b.hasOwnProperty("_tc_id"))return b;b=a(b);var m=b.r,n=b.g,v=b.b,t=b.a,h=r(100*t)/100,u=q.format||b.format;1>m&&(m=r(m));1>n&&(n=r(n));1>v&&(v=r(v));return{ok:b.ok,format:u,_tc_id:p++,alpha:t,getAlpha:function(){return t},setAlpha:function(a){t=l(a);h=r(100*t)/100},toHsv:function(){var a=e(m,n,v);return{h:360*a.h,s:a.s,v:a.v,a:t}},toHsvString:function(){var a=e(m,n,v),b=r(360*a.h),c=r(100*a.s);a=r(100*a.v);return 1==t?"hsv("+b+", "+
c+"%, "+a+"%)":"hsva("+b+", "+c+"%, "+a+"%, "+h+")"},toHsl:function(){var a=d(m,n,v);return{h:360*a.h,s:a.s,l:a.l,a:t}},toHslString:function(){var a=d(m,n,v),b=r(360*a.h),c=r(100*a.s);a=r(100*a.l);return 1==t?"hsl("+b+", "+c+"%, "+a+"%)":"hsla("+b+", "+c+"%, "+a+"%, "+h+")"},toHex:function(a){return c(m,n,v,a)},toHexString:function(a){return"#"+c(m,n,v,a)},toRgb:function(){return{r:r(m),g:r(n),b:r(v),a:t}},toRgbString:function(){return 1==t?"rgb("+r(m)+", "+r(n)+", "+r(v)+")":"rgba("+r(m)+", "+r(n)+
", "+r(v)+", "+h+")"},toPercentageRgb:function(){return{r:r(100*f(m,255))+"%",g:r(100*f(n,255))+"%",b:r(100*f(v,255))+"%",a:t}},toPercentageRgbString:function(){return 1==t?"rgb("+r(100*f(m,255))+"%, "+r(100*f(n,255))+"%, "+r(100*f(v,255))+"%)":"rgba("+r(100*f(m,255))+"%, "+r(100*f(n,255))+"%, "+r(100*f(v,255))+"%, "+h+")"},toName:function(){return 0===t?"transparent":C[c(m,n,v,!0)]||!1},toFilter:function(a){var b=c(m,n,v),f=b,d=Math.round(255*parseFloat(t)).toString(16),l=d,e=q&&q.gradientType?"GradientType = 1, ":
"";a&&(a=g(a),f=a.toHex(),l=Math.round(255*parseFloat(a.alpha)).toString(16));return"progid:DXImageTransform.Microsoft.gradient("+e+"startColorstr=#"+k(d)+b+",endColorstr=#"+k(l)+f+")"},toString:function(a){var b=!!a;a=a||this.format;var c=!1;b=!b&&1>t&&0<t&&("hex"===a||"hex6"===a||"hex3"===a||"name"===a);"rgb"===a&&(c=this.toRgbString());"prgb"===a&&(c=this.toPercentageRgbString());if("hex"===a||"hex6"===a)c=this.toHexString();"hex3"===a&&(c=this.toHexString(!0));"name"===a&&(c=this.toName());"hsl"===
a&&(c=this.toHslString());"hsv"===a&&(c=this.toHsvString());return b?this.toRgbString():c||this.toHexString()}}}function a(a){var c={r:0,g:0,b:0},k=1,d=!1,e=!1;if("string"==typeof a)a:{a=a.replace(n,"").replace(q,"").toLowerCase();var g=!1;if(z[a])a=z[a],g=!0;else if("transparent"==a){a={r:0,g:0,b:0,a:0,format:"name"};break a}var p;a=(p=u.rgb.exec(a))?{r:p[1],g:p[2],b:p[3]}:(p=u.rgba.exec(a))?{r:p[1],g:p[2],b:p[3],a:p[4]}:(p=u.hsl.exec(a))?{h:p[1],s:p[2],l:p[3]}:(p=u.hsla.exec(a))?{h:p[1],s:p[2],
l:p[3],a:p[4]}:(p=u.hsv.exec(a))?{h:p[1],s:p[2],v:p[3]}:(p=u.hex6.exec(a))?{r:parseInt(p[1],16),g:parseInt(p[2],16),b:parseInt(p[3],16),format:g?"name":"hex"}:(p=u.hex3.exec(a))?{r:parseInt(p[1]+""+p[1],16),g:parseInt(p[2]+""+p[2],16),b:parseInt(p[3]+""+p[3],16),format:g?"name":"hex"}:!1}if("object"==typeof a){if(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b"))c=a.g,d=a.b,c={r:255*f(a.r,255),g:255*f(c,255),b:255*f(d,255)},d=!0,e="%"===String(a.r).substr(-1)?"prgb":"rgb";else if(a.hasOwnProperty("h")&&
a.hasOwnProperty("s")&&a.hasOwnProperty("v")){a.s=m(a.s);a.v=m(a.v);e=a.h;g=a.s;c=a.v;e=6*f(e,360);g=f(g,100);c=f(c,100);d=w.floor(e);var t=e-d;e=c*(1-g);p=c*(1-t*g);g=c*(1-(1-t)*g);d%=6;c={r:255*[c,p,e,e,g,c][d],g:255*[g,c,c,p,e,e][d],b:255*[e,e,g,c,c,p][d]};d=!0;e="hsv"}else a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")&&(a.s=m(a.s),a.l=m(a.l),c=b(a.h,a.s,a.l),d=!0,e="hsl");a.hasOwnProperty("a")&&(k=a.a)}k=l(k);return{ok:d,format:a.format||e,r:x(255,v(c.r,0)),g:x(255,v(c.g,
0)),b:x(255,v(c.b,0)),a:k}}function d(a,b,c){a=f(a,255);b=f(b,255);c=f(c,255);var k=v(a,b,c),d=x(a,b,c),e=(k+d)/2;if(k==d)var l=d=0;else{var q=k-d;d=.5<e?q/(2-k-d):q/(k+d);switch(k){case a:l=(b-c)/q+(b<c?6:0);break;case b:l=(c-a)/q+2;break;case c:l=(a-b)/q+4}l/=6}return{h:l,s:d,l:e}}function b(a,b,c){function k(a,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:.5>c?b:c<2/3?a+(b-a)*(2/3-c)*6:a}a=f(a,360);b=f(b,100);c=f(c,100);if(0===b)c=b=a=c;else{var d=.5>c?c*(1+b):c+b-c*b,e=2*c-d;c=k(e,d,a+1/
3);b=k(e,d,a);a=k(e,d,a-1/3)}return{r:255*c,g:255*b,b:255*a}}function e(a,b,c){a=f(a,255);b=f(b,255);c=f(c,255);var k=v(a,b,c),d=x(a,b,c),e=k-d;if(k==d)var l=0;else{switch(k){case a:l=(b-c)/e+(b<c?6:0);break;case b:l=(c-a)/e+2;break;case c:l=(a-b)/e+4}l/=6}return{h:l,s:0===k?0:e/k,v:k}}function c(a,b,c,f){a=[k(r(a).toString(16)),k(r(b).toString(16)),k(r(c).toString(16))];return f&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+
a[2].charAt(0):a.join("")}function l(a){a=parseFloat(a);if(isNaN(a)||0>a||1<a)a=1;return a}function f(a,b){var c=a;"string"==typeof c&&-1!=c.indexOf(".")&&1===parseFloat(c)&&(a="100%");c="string"===typeof a&&-1!=a.indexOf("%");a=x(b,v(0,parseFloat(a)));c&&(a=parseInt(a*b,10)/100);return 1E-6>w.abs(a-b)?1:a%b/parseFloat(b)}function k(a){return 1==a.length?"0"+a:""+a}function m(a){1>=a&&(a=100*a+"%");return a}var n=/^[\s,#]+/,q=/\s+$/,p=0,w=Math,r=w.round,x=w.min,v=w.max,A=w.random;g.fromRatio=function(a,
b){if("object"==typeof a){var c={},f;for(f in a)a.hasOwnProperty(f)&&(c[f]="a"===f?a[f]:m(a[f]));a=c}return g(a,b)};g.equals=function(a,b){return a&&b?g(a).toRgbString()==g(b).toRgbString():!1};g.random=function(){return g.fromRatio({r:A(),g:A(),b:A()})};g.desaturate=function(a,b){b=0===b?0:b||10;a=g(a).toHsl();a.s-=b/100;a.s=x(1,v(0,a.s));return g(a)};g.saturate=function(a,b){b=0===b?0:b||10;a=g(a).toHsl();a.s+=b/100;a.s=x(1,v(0,a.s));return g(a)};g.greyscale=function(a){return g.desaturate(a,100)};
g.lighten=function(a,b){b=0===b?0:b||10;a=g(a).toHsl();a.l+=b/100;a.l=x(1,v(0,a.l));return g(a)};g.darken=function(a,b){b=0===b?0:b||10;a=g(a).toHsl();a.l-=b/100;a.l=x(1,v(0,a.l));return g(a)};g.complement=function(a){a=g(a).toHsl();a.h=(a.h+180)%360;return g(a)};g.triad=function(a){var b=g(a).toHsl(),c=b.h;return[g(a),g({h:(c+120)%360,s:b.s,l:b.l}),g({h:(c+240)%360,s:b.s,l:b.l})]};g.tetrad=function(a){var b=g(a).toHsl(),c=b.h;return[g(a),g({h:(c+90)%360,s:b.s,l:b.l}),g({h:(c+180)%360,s:b.s,l:b.l}),
g({h:(c+270)%360,s:b.s,l:b.l})]};g.splitcomplement=function(a){var b=g(a).toHsl(),c=b.h;return[g(a),g({h:(c+72)%360,s:b.s,l:b.l}),g({h:(c+216)%360,s:b.s,l:b.l})]};g.analogous=function(a,b,c){b=b||6;c=c||30;var f=g(a).toHsl();c=360/c;a=[g(a)];for(f.h=(f.h-(c*b>>1)+720)%360;--b;)f.h=(f.h+c)%360,a.push(g(f));return a};g.monochromatic=function(a,b){b=b||6;var c=g(a).toHsv();a=c.h;var f=c.s;c=c.v;for(var k=[],d=1/b;b--;)k.push(g({h:a,s:f,v:c})),c=(c+d)%1;return k};g.readability=function(a,b){a=g(a).toRgb();
b=g(b).toRgb();return{brightness:Math.abs((299*a.r+587*a.g+114*a.b)/1E3-(299*b.r+587*b.g+114*b.b)/1E3),color:Math.max(a.r,b.r)-Math.min(a.r,b.r)+Math.max(a.g,b.g)-Math.min(a.g,b.g)+Math.max(a.b,b.b)-Math.min(a.b,b.b)}};g.readable=function(a,b){a=g.readability(a,b);return 125<a.brightness&&500<a.color};g.mostReadable=function(a,b){for(var c=null,f=0,k=!1,d=0;d<b.length;d++){var e=g.readability(a,b[d]),l=125<e.brightness&&500<e.color;e=e.brightness/125*3+e.color/500;if(l&&!k||l&&k&&e>f||!l&&!k&&e>f)k=
l,f=e,c=g(b[d])}return c};var z=g.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",
darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",
gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",
lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",
olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",
slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=g.hexNames=function(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}(z),u={rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!==typeof module&&module.exports?module.exports=g:"undefined"!==typeof define&&define(function(){return g});window.Recite.Tinycolor=g})(this);
(function(h){function g(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function a(a){var c,e;var l=a.keyCode;-1==g(w,l)&&w.push(l);if(93==l||224==l)l=91;if(l in m)for(c in m[l]=!0,q)q[c]==l&&(d[c]=!0);else{for(f in m)m[f]=a[r[f]];if(d.filter.call(this,a)&&l in k){var n=b();for(e=0;e<k[l].length;e++){var p=k[l][e];if(p.scope==n||"all"==p.scope){var v=0<p.mods.length;for(c in m)if(!m[c]&&-1<g(p.mods,+c)||m[c]&&-1==g(p.mods,+c))v=!1;(0!=p.mods.length||m[16]||m[18]||m[17]||m[91])&&!v||!1!==
p.method(a,p)||(a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.cancelBubble&&(a.cancelBubble=!0))}}}}}function d(a,b,f){var d=e(a);void 0===f&&(f=b,b="all");for(var l=0;l<d.length;l++){var q=[];a=d[l].split("+");1<a.length&&(q=c(a),a=[a[a.length-1]]);a=a[0];a=p[a]||a.toUpperCase().charCodeAt(0);a in k||(k[a]=[]);k[a].push({shortcut:d[l],scope:b,method:f,key:d[l],mods:q})}}function b(){return n||"all"}function e(a){a=a.replace(/\s/g,"");a=a.split(",");
""==a[a.length-1]&&(a[a.length-2]+=",");return a}function c(a){a=a.slice(0,a.length-1);for(var b=0;b<a.length;b++)a[b]=q[a[b]];return a}function l(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,function(){c(window.event)})}var f,k={},m={16:!1,18:!1,17:!1,91:!1},n="all",q={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},p={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,
up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},w=[];for(f=1;20>f;f++)p["f"+f]=111+f;var r={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(f in q)d[f]=!1;l(document,"keydown",function(b){a(b)});l(document,"keyup",function(a){a=a.keyCode;var b,c=g(w,a);0<=c&&w.splice(c,1);if(93==a||224==a)a=91;if(a in m)for(b in m[a]=!1,q)q[b]==a&&(d[b]=!1)});l(window,"focus",function(){for(f in m)m[f]=
!1;for(f in q)d[f]=!1});var x=h.key;h.key=d;h.key.setScope=function(a){n=a||"all"};h.key.getScope=b;h.key.deleteScope=function(a){var b,c;for(b in k){var f=k[b];for(c=0;c<f.length;)f[c].scope===a?f.splice(c,1):c++}};h.key.filter=function(a){a=(a.target||a.srcElement).tagName;return!("INPUT"==a||"SELECT"==a||"TEXTAREA"==a)};h.key.isPressed=function(a){"string"==typeof a&&(a=p[a]||a.toUpperCase().charCodeAt(0));return-1!=g(w,a)};h.key.getPressedKeyCodes=function(){return w.slice(0)};h.key.noConflict=
function(){var a=h.key;h.key=x;return a};h.key.unbind=function(a,f){var d=[],l,q;var m=e(a);for(q=0;q<m.length;q++){var n=m[q].split("+");1<n.length&&(d=c(n),a=n[n.length-1]);a=p[a]||a.toUpperCase().charCodeAt(0);void 0===f&&(f=b());if(!k[a])break;for(l in k[a]){n=k[a][l];var g;if(g=n.scope===f)a:if(n=n.mods,n.length!=d.length)g=!1;else{for(g=0;g<n.length;g++)if(n[g]!==d[g]){g=!1;break a}g=!0}g&&(k[a][l]={})}}};"undefined"!==typeof module&&(module.exports=key);window.Recite.Key=key})(this);
Recite.AssetLoader=function(h){function g(a,b){a=h.createElement(a);for(var c in b)b.hasOwnProperty(c)&&a.setAttribute(c,b[c]);a.setAttribute("data-recite-skip","true");return a}function a(a){var c=k[a];if(c){var f=c.callback;var d=c.urls;d.shift();m=0;d.length||(f&&f.call(c.context,c.obj),k[a]=null,n[a].length&&b(a))}}function d(){var a=navigator.userAgent;l={async:!0===h.createElement("script").async};(l.webkit=/AppleWebKit\//.test(a))||(l.ie=/MSIE|Trident/.test(a))||(l.opera=/Opera/.test(a))||
(l.gecko=/Gecko\//.test(a))||(l.unknown=!0)}function b(b,q,m,x,v){var p=function(){a(b)},w="css"===b,r=[],u,t;l||d();if(q)if(q="string"===typeof q?[q]:q.concat(),w||l.async||l.gecko||l.opera)n[b].push({urls:q,callback:m,obj:x,context:v});else{var B=0;for(u=q.length;B<u;++B)n[b].push({urls:[q[B]],callback:B===u-1?m:null,obj:x,context:v})}if(!k[b]&&(t=k[b]=n[b].shift())){f||(f=h.head||h.getElementsByTagName("head")[0]);q=t.urls;B=0;for(u=q.length;B<u;++B){m=q[B];if(w)var y=l.gecko?g("style"):g("link",
{href:m,rel:"stylesheet"});else y=g("script",{src:m}),y.async=!1;y.className="lazyload";y.setAttribute("charset","utf-8");l.ie&&!w&&"onreadystatechange"in y&&!("draggable"in y)?y.onreadystatechange=function(){/loaded|complete/.test(y.readyState)&&(y.onreadystatechange=null,p())}:w&&(l.gecko||l.webkit)?l.webkit?(t.urls[B]=y.href,c()):(y.innerHTML='@import "'+m+'";',e(y)):y.onload=y.onerror=p;r.push(y)}B=0;for(u=r.length;B<u;++B)f.appendChild(r[B])}}function e(b){try{var c=!!b.sheet.cssRules}catch(r){m+=
1;200>m?setTimeout(function(){e(b)},50):c&&a("css");return}a("css")}function c(){var b=k.css,f;if(b){for(f=q.length;0<=--f;)if(q[f].href===b.urls[0]){a("css");break}m+=1;b&&(200>m?setTimeout(c,50):a("css"))}}var l,f,k={},m=0,n={css:[],js:[]},q=h.styleSheets;return{css:function(a,c,f,k){b("css",a,c,f,k)},js:function(a,c,f,k){b("js",a,c,f,k)}}}(this.document);Recite.namespace("Preset");Recite.namespace("preset");
Recite.Preset=Recite.preset=function(){return{square24:{background:Recite.baseUrl+"img/buttons/square24.gif",width:"24px",height:"24px"},square36:{background:Recite.baseUrl+"img/buttons/square36.gif",width:"36px",height:"36px"},hor24_recite:{background:Recite.baseUrl+"img/buttons/recite_hor24.gif",width:"83px",height:"24px"},hor24_recite_red:{background:Recite.baseUrl+"img/buttons/recite_hor24_red.gif",width:"83px",height:"24px"},hor48_recite:{background:Recite.baseUrl+"img/buttons/recite_hor48.gif",
width:"166px",height:"48px"},hor48_recite_red:{background:Recite.baseUrl+"img/buttons/recite_hor48_red.gif",width:"166px",height:"48px"},ver24_recite:{background:Recite.baseUrl+"img/buttons/recite_ver24.gif",width:"24px",height:"109px"},ver24_recite_red:{background:Recite.baseUrl+"img/buttons/recite_ver24_red.gif",width:"24px",height:"109px"},ver48_recite:{background:Recite.baseUrl+"img/buttons/recite_ver48.gif",width:"48px",height:"217px"},ver48_recite_red:{background:Recite.baseUrl+"img/buttons/recite_ver48_red.gif",
width:"48px",height:"217px"},hor24_speak:{background:Recite.baseUrl+"img/buttons/speak_hor24.gif",width:"79px",height:"24px"},hor24_speak_red:{background:Recite.baseUrl+"img/buttons/speak_hor24_red.gif",width:"79px",height:"24px"},hor48_speak:{background:Recite.baseUrl+"img/buttons/speak_hor48.gif",width:"158px",height:"48px"},hor48_speak_red:{background:Recite.baseUrl+"img/buttons/speak_hor48_red.gif",width:"158px",height:"48px"},ver24_speak:{background:Recite.baseUrl+"img/buttons/speak_ver24.gif",
width:"24px",height:"109px"},ver24_speak_red:{background:Recite.baseUrl+"img/buttons/speak_ver24_red.gif",width:"24px",height:"109px"},ver48_speak:{background:Recite.baseUrl+"img/buttons/speak_ver48.gif",width:"48px",height:"217px"},ver48_speak_red:{background:Recite.baseUrl+"img/buttons/speak_ver48_red.gif",width:"48px",height:"217px"},square24_png:{background:Recite.baseUrl+"img/buttons/24x24.png",width:"24px",height:"24px"},square36_png:{background:Recite.baseUrl+"img/buttons/36x36.png",width:"36px",
height:"36px"},hor24_recite_png:{background:Recite.baseUrl+"img/buttons/recite_hor24.png",width:"83px",height:"24px"},hor24_recite_red_png:{background:Recite.baseUrl+"img/buttons/recite_hor24_red.png",width:"83px",height:"24px"},hor48_recite_png:{background:Recite.baseUrl+"img/buttons/recite_hor48.png",width:"166px",height:"48px"},hor48_recite_red_png:{background:Recite.baseUrl+"img/buttons/recite_hor48_red.png",width:"166px",height:"48px"},ver24_recite_png:{background:Recite.baseUrl+"img/buttons/recite_ver24.png",
width:"24px",height:"109px"},ver24_recite_red_png:{background:Recite.baseUrl+"img/buttons/recite_ver24_red.png",width:"24px",height:"109px"},ver48_recite_png:{background:Recite.baseUrl+"img/buttons/recite_ver48.png",width:"48px",height:"217px"},ver48_recite_red_png:{background:Recite.baseUrl+"img/buttons/recite_ver48_red.png",width:"48px",height:"217px"},hor24_speak_png:{background:Recite.baseUrl+"img/buttons/speak_hor24.png",width:"79px",height:"24px"},hor24_speak_red_png:{background:Recite.baseUrl+
"img/buttons/speak_hor24_red.png",width:"79px",height:"24px"},hor48_speak_png:{background:Recite.baseUrl+"img/buttons/speak_hor48.png",width:"158px",height:"48px"},hor48_speak_red_png:{background:Recite.baseUrl+"img/buttons/speak_hor48_red.png",width:"158px",height:"48px"},ver24_speak_png:{background:Recite.baseUrl+"img/buttons/speak_ver24.png",width:"24px",height:"109px"},ver24_speak_red_png:{background:Recite.baseUrl+"img/buttons/speak_ver24_red.png",width:"24px",height:"109px"},ver48_speak_png:{background:Recite.baseUrl+
"img/buttons/speak_ver48.png",width:"48px",height:"217px"},ver48_speak_red_png:{background:Recite.baseUrl+"img/buttons/speak_ver48_red.png",width:"48px",height:"217px"}}}();Recite.namespace("Ajax");
Recite.Ajax=function(){function h(a){var b=Recite.Util.clone(c);return Recite.Util.merge(b,a)}function g(a){var b="";if(a.getResponseHeader)b=/^application\/json/.test(a.getResponseHeader("Content-Type"))?ReciteJSON.parse(a.responseText):a.responseText;else if(0<a.responseText.length)try{b=ReciteJSON.parse(a.responseText)}catch(k){b=a.responseText}return b}function a(a,b){b=h(b);var c=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");"GET"===b.method&&null!==b.data&&
"undefined"!==typeof b.data&&(a+=Recite.Util.buildQueryString(b.data));c.open(b.method,a,b.async,b.user,b.password);b.async&&(c.timeout=b.timeout);c.setRequestHeader("Content-Type",b.contentType);c.onreadystatechange=function(){if(4===c.readyState){var a=g(c);200===c.status?b.success(c,a):b.error(c,a)}};null!==b.beforeSend&&b.beforeSend(c);c.send(b.data)}function d(a,b){b=h(b);var c=new XDomainRequest;"GET"===b.method&&null!==b.data&&"undefined"!==typeof b.data&&(a+=Recite.Util.buildQueryString(b.data));
c.onload=function(){var a=g(c);b.success(c,a)};c.onerror=function(){var a=g(c);b.error(c,a)};c.open(b.method,a);c.timeout=b.timeout;null!==b.beforeSend&&b.beforeSend(c);c.send(b.data)}function b(b,c){"withCredentials"in(window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"))?a(b,c):"undefined"!==typeof window.XDomainRequest?d(b,c):"undefined"===typeof window.flensed?Recite.AssetLoader.js(Recite.baseUrl+"/js/flxhr/flXHR.js",function(){e(c)}):e(b,c)}function e(a,b){var c=
new flensed.flXHR({autoUpdatePlayer:!1,instanceId:"recite-proxy",xmlResponseText:!1,onreadystatechange:function(a){if(4===a.readyState){var c=g(a);200===a.status?b.success(a,c):b.error(a,c)}}});c.open(b.method,a);null!==b.beforeSend&&b.beforeSend(c);c.send(b.data)}var c={method:"POST",contentType:"application/x-www-form-urlencoded",async:!0,username:null,password:null,success:function(){},error:function(){},beforeSend:null,data:null,timeout:1E4};return{get:function(a,b,c){Recite.Debug.log("Recite.Ajax",
"Making AJAX request to: "+a);this.ajax(a,{method:"GET",data:b,success:c})},post:function(a,b,c){this.ajax(a,{method:"POST",data:b,success:c})},ajax:function(c,d){"undefined"!==typeof d.data&&"POST"==d.method&&"object"==Recite.Util.type(d.data)&&(d.data=ReciteJSON.stringify(d.data));return String(window.location).substr(0,Recite.baseUrl.length)==Recite.baseUrl?a(c,d):b(c,d)},nativeXDomainSupported:function(){return"undefined"!==typeof(new XMLHttpRequest).withCredentials||"undefined"!==typeof window.XDomainRequest?
!0:!1}}}();Recite.namespace("Api");
Recite.Api=function(){function h(d,b){d=a.endpoint+d;b=Recite.Util.merge({access_token:b.access_token,v:Recite.version},b.data);return d+Recite.Util.buildQueryString(b)}function g(d,b,e){var c=a.endpoint+d;c+=Recite.Util.buildQueryString({access_token:e.access_token,v:Recite.version});Recite.Ajax.ajax(c,{method:b,data:e.data,contentType:e.contentType,success:function(a,b){e.success&&e.success(b)},error:function(a,f){Recite.Debug.log("Recite.Api","Error occured during API call to: "+c,f);if("undefined"!==
typeof f.error)if("invalid_grant"===f.error)Recite.Debug.log("Recite.Api","Requesting a new token."),Recite.Auth.clear(),Recite.Api.call(d,b,e);else{if("invalid_token"===f.error||"invalid_referrer"===f.error||"invalid_ip"===f.error)alert("We have detected invalid usage of Recite and we have disabled future access. If you think this is an error please contact support@reciteme.com"),window.location.reload();e.error&&e.error(f)}}})}var a={endpoint:Recite.baseUrl+"/api/"};return{setOptions:function(d){a=
Recite.Util.merge(a,d)},call:function(a,b,e){e.contentType=e.contentType||"application/x-www-form-urlencoded";"undefined"===typeof e.authRequired&&(e.authRequired=!0);e.authRequired?Recite.Auth.getStatus(function(c){"authorized"===c.state&&(e.access_token=c.access_token,g(a,b,e))}):g(a,b,e)},getUri:function(a,b){"undefined"===typeof b.authRequired&&(b.authRequired=!0);b.authRequired?Recite.Auth.getStatus(function(d){"authorized"===d.state&&(b.access_token=d.access_token,b.success&&b.success(h(a,b)))}):
b.success&&b.success(h(a,b))}}}();Recite.namespace("Recite.Dom");
Recite.Dom=function(){function h(a){if(a.nodeType===Node.TEXT_NODE)return a.textContent;try{var d=getComputedStyle(a);if(d&&"none"===d.display)return"";d="";for(var b=0;b<a.childNodes.length;b++)"RECITEWORDBYWORD"!=a.childNodes[b].tagName&&(d+=h(a.childNodes[b]));return d}catch(e){return Recite.Debug.log("Recite.Dom","Unable to get getComputedStyle() of element: "+a),Recite.Debug.log("Recite.Dom",e),""}}var g={word_filters:{},srollTopPadding:150,skipSelectors:["[aria-hidden=true]"]};return{getPosition:function(a){"undefined"!=
typeof a.positionalProxy&&null!=a.positionalProxy&&(a=a.positionalProxy);var d=0,b=0;if(a.offsetParent){do"BODY"!==a.tagName&&(d+=a.offsetLeft,b+=a.offsetTop);while(a=a.offsetParent)}return{left:d,top:b}},isCurrent:function(a){var d=Recite.Dom.getPosition(a);a=a.currentStyle;return 0!==d.left&&0!==d.top&&0<a.width&&0<a.height?!0:!1},getScroll:function(a){"undefined"===typeof a&&(a=window);var d=a.document;if(a.pageYOffset){var b=a.pageYOffset;var e=a.pageXOffset}else d.documentElement&&d.documentElement.scrollTop?
(b=d.documentElement.scrollTop,e=d.documentElement.scrollLeft):d.body&&(b=d.body.scrollTop,e=d.body.scrollLeft);return{x:e,y:b}},getStyle:function(a,d){if(a.currentStyle){d=d.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")});var b=a.currentStyle[d]}else window.getComputedStyle&&(b=document.defaultView.getComputedStyle(a,null).getPropertyValue(d));return b},getStyles:function(a){var d;a.currentStyle?d=a.currentStyle:window.getComputedStyle&&(d=document.defaultView.getComputedStyle(a,
null));return d},getText:function(a,d){var b="";if("undefined"==typeof a)return"";if("undefined"!==typeof d)return 0===a.childNodes.length&&(b+=d.call(a)),Recite.Util.each(a.childNodes,function(a,e){b+=d.call(e)}),b.trim();"IMG"===a.tagName?b=a.getAttribute("alt"):3===a.nodeType?b=a.data:"INPUT"===a.tagName||"TEXTAREA"===a.tagName?""==a.value&&(a=a.getAttribute("placeholder"))&&(b=a+" "):b=h(a);null==b&&(b="");for(var e in g.word_filters)b=b.toLowerCase().replace(e,g.word_filters[e]);return null!=
b?b.trim():""},getAllWindows:function(a,d){d||(d=[]);a||(a=window);0===d.length&&d.push(a);a=a.frames;for(var b=0;b<a.length;b++)try{a[b].document.body,d.push(a[b]),0<a[b].frames.length&&d.concat(d,Recite.Dom.getAllWindows(a[b],d))}catch(e){}return d},prepend:function(a,d){if("string"===Recite.Util.type(a)){var b=d.ownerDocument.createElement("div");b.innerHTML=a;for(a=0;a<b.childNodes.length;a++)d.insertBefore(b.childNodes[0],d.childNodes[0])}else d.insertBefore(a,d.childNodes[0])},append:function(a,
d){if("string"===Recite.Util.type(a)){var b=d.ownerDocument.createElement("div");b.innerHTML=a;for(a=0;a<b.childNodes.length;a++)d.appendChild(b.childNodes[a])}else d.appendChild(a)},getSelected:function(){var a="";"undefined"!==typeof window.getSelection?a=window.getSelection().toString():"undefined"!==typeof document.selection&&"Text"===document.selection.type&&(a=document.selection.createRange().text);return a.replace(/^\s+|\s+$/g,"")},isDescendant:function(a,d){for(;a;){if(a===d)return!0;a=a.parentNode}return!1},
getAncestors:function(a){for(var d=null,b=[];void 0!==a&&null!==(d=a.parentNode)&&(void 0===d||1===d.nodeType);)b.push(d),a=d;return b},getWindowDimensions:function(a){var d=a.document;if("number"===typeof a.innerWidth){var b=a.innerWidth;var e=a.innerHeight}else d.documentElement&&(d.documentElement.clientWidth||d.documentElement.clientHeight)?(b=d.documentElement.clientWidth,e=d.documentElement.clientHeight):d.body&&(d.body.clientWidth||d.body.clientHeight)&&(b=d.body.clientWidth,e=d.body.clientHeight);
return{width:b,height:e}},getLanguage:function(a){var d=null;if(void 0===a)return d;if(1===a.nodeType&&void 0!==a.lang&&""!==a.lang)return a.lang.toLowerCase();var b=a.childNodes;if(void 0!==b&&void 0!=b.length&&0<b.length&&(Recite.Util.each(b,function(a,b){for(;null!==b;){if(3!==b.nodeType&&void 0!==b.lang&&""!==b.lang){d=b.lang;break}b=0<b.childNodes.length?b.childNodes[0]:null}}),null!==d))return d.toLowerCase();a=Recite.Dom.getAncestors(a);for(var e in a){b=a[e];if(void 0!==b&&b.lang&&0!==b.lang.length){d=
b.lang;break}if(void 0!==b&&1===b.nodeType&&null!==b.getAttribute("xml:lang")&&""!==b.getAttribute("xml:lang")){d=b.getAttribute("xml:lang");break}}null===d&&(e=Recite.Sizzle('meta[http-equiv="Content-Language"]'),0<e.length&&(d=e[0].getAttribute("content")));return null!==d&&"string"===typeof d?d.toLowerCase():null},detectLanguage:function(a,d){a&&0!=a.length?(Recite.Debug.log("Recite.Dom","Auto detecting language"),Recite.Api.call("language-detect","POST",{data:{q:a},contentType:"application/json",
success:function(a){Recite.Debug.log("Recite.Dom","Language detected: "+a.lang);void 0!=d&&d(null!=a.lang?a.lang.toLowerCase():null)},error:function(){void 0!=d&&d(null)}})):void 0!=d&&d(null)},getNextElement:function(a,d){"undefined"==typeof d&&(d=!1);var b="recite, [data-recite-ele] "+(Recite.FrameUpdater.isActive()?", iframe":"");b=Recite.Sizzle(b);if("undefined"===a||null===a)return Recite.Debug.log("Recite.DOM","Current element is null - probably been removed from DOM"),b[0];for(var e=null,c=
0;c<b.length;c++)if(b[c]===a||null===a||null!==e){if(null===a)e=b[0];else if("undefined"!==typeof b[c+1]){if(!Recite.Dom.isValidElement(b[c+1])){a=b[c+1];continue}e=b[c+1]}else break;a=Recite.Dom.getPosition(e);if(0>a.left||0>a.top||0==a.top&&0==a.left)a=e;else{if("IFRAME"!=e.nodeName||d)return e;Recite.Event.publish("FrameUpdater:EnterFrame",{element:e,direction:"next"});break}}return null},getPreviousElement:function(a,d){"undefined"==typeof d&&(d=!1);var b="recite, [data-recite-ele] "+(Recite.FrameUpdater.isActive()?
", iframe":"");b=Recite.Sizzle(b);if("undefined"===a||null===a)return Recite.Debug.log("Recite.DOM","getPreviousElement return 1st ele"),b[0];for(var e=null,c=b.length;0<c;c--)if(b[c]==a||null==a||null!==e){if(null==a)e=b[0];else if("undefined"!==typeof b[c-1]){if(!Recite.Dom.isValidElement(b[c-1])){a=b[c-1];continue}e=b[c-1]}else break;a=Recite.Dom.getPosition(e);if(0>a.left||0>a.top||0==a.top&&0==a.left)a=e;else{if("IFRAME"!=e.nodeName||d)return e;Recite.Event.publish("FrameUpdater:EnterFrame",
{element:e,direction:"prev"});break}}return null},getLastElement:function(){var a="recite, [data-recite-ele] "+(Recite.FrameUpdater.isActive()?", iframe":"");a=Recite.Sizzle(a);return a[a.length-1]},getFirstElement:function(){var a="recite, [data-recite-ele] "+(Recite.FrameUpdater.isActive()?", iframe":"");return Recite.Sizzle(a)[0]},isVisible:function(a){var d=Recite.Dom.getScroll(a.ownerDocument.defaultView),b=Recite.Dom.getPosition(a);Recite.PlayerControls.getProvider().getOptions();var e=Recite.Dom.getWindowDimensions(window),
c=b.top-a.offsetHeight+200,l=b.left,f=!1;c<e.height+d.y&&b.top>c&&0<l&&l<e.width+d.x&&(f=!0);return f&&Recite.Dom.isValidElement(a)},isValidElement:function(a){return null==g.skipSelectors?!0:a.matches(g.skipSelectors)?!1:"HTML"!=a.nodeName&&a.parentNode?Recite.Dom.isValidElement(a.parentNode):!0},scrollTo:function(a){var d=Recite.Dom.getPosition(a);a=d.top-a.offsetHeight;a-=g.srollTopPadding;window.scrollTo(d.left,a)},getIndex:function(a){if("undefined"===typeof a||null===a)return null;for(var d=
a.parentElement||a.parentNode,b=-1,e;d&&(e=d.childNodes[++b]);)if(e==a)return b;return-1},getPath:function(a){var d,b=[],e=Recite.Dom.getIndex(a),c=0;if("undefined"===typeof a||null===a)return null;for(;d=a.parentNode;){++c;if(-1>=e)break;a=d;b.push(e);e=Recite.Dom.getIndex(d)}return b.reverse()},getNode:function(a){var d=document.documentElement,b;if("undefined"===typeof d||null===d)return null;for(b=1;b<a.length;){var e=a[b];"undefined"!==typeof d&&(d=d.childNodes[e]);++b}return d},setOptions:function(a){g=
Recite.Util.merge(g,a)}}}();Recite.namespace("Dom.Traverser");Recite.Dom.Traverser=function(){return{traverse:function(h,g){for(var a=h.childNodes[0];null!==a;){var d=g(a);if(a.hasChildNodes()&&d)a=a.firstChild;else{for(;null===a.nextSibling&&a!==h;)a=a.parentNode;a=a===h?null:a.nextSibling}}}}};Recite.namespace("Recite.Dom.Observer");
Recite.Dom.Observer=function(){function h(){Recite.Util.each(a,function(a,d){a=d.innerHTML.length;"undefined"===typeof d.prevLength&&(d.prevLength=a);d.prevLength!==a&&(a=Recite.Parser.Html.parse(d),Recite.Event.publish("Recite.Dom.Observor:change",{affectedElements:a}),d.prevLength=d.innerHTML.length)})}var g=null,a=[],d={pollTime:1500,useMutations:!0};return{setOptions:function(a){d=Recite.Util.merge(d,a)},observe:function(b){a.push(b);null===g&&(Recite.Debug.log("Recite.Dom.Observer","Setting up body length polling."),
g=setInterval(function(){h()},d.pollTime))}}}();var ReciteJSON;ReciteJSON||(ReciteJSON={});
(function(){function h(a){return 10>a?"0"+a:a}function g(a){b.lastIndex=0;return b.test(a)?'"'+a.replace(b,function(a){var b=l[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(b,d){var k=e,l=d[b];l&&"object"===typeof l&&"function"===typeof l.toReciteJSON&&(l=l.toReciteJSON(b));"function"===typeof f&&(l=f.call(d,b,l));switch(typeof l){case "string":return g(l);case "number":return isFinite(l)?String(l):"null";case "boolean":case "null":return String(l);
case "object":if(!l)return"null";e+=c;var m=[];if("[object Array]"===Object.prototype.toString.apply(l)){var h=l.length;for(b=0;b<h;b+=1)m[b]=a(b,l)||"null";d=0===m.length?"[]":e?"[\n"+e+m.join(",\n"+e)+"\n"+k+"]":"["+m.join(",")+"]";e=k;return d}if(f&&"object"===typeof f)for(h=f.length,b=0;b<h;b+=1){if("string"===typeof f[b]){var r=f[b];(d=a(r,l))&&m.push(g(r)+(e?": ":":")+d)}}else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(d=a(r,l))&&m.push(g(r)+(e?": ":":")+d);d=0===m.length?"{}":e?
"{\n"+e+m.join(",\n"+e)+"\n"+k+"}":"{"+m.join(",")+"}";e=k;return d}}"function"!==typeof Date.prototype.toReciteJSON&&(Date.prototype.toReciteJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+h(this.getUTCMonth()+1)+"-"+h(this.getUTCDate())+"T"+h(this.getUTCHours())+":"+h(this.getUTCMinutes())+":"+h(this.getUTCSeconds())+"Z":null},String.prototype.toReciteJSON=Number.prototype.toReciteJSON=Boolean.prototype.toReciteJSON=function(a){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
b=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,c,l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},f;"function"!==typeof ReciteJSON.stringify&&(ReciteJSON.stringify=function(b,d,l){var k;c=e="";if("number"===typeof l)for(k=0;k<l;k+=1)c+=" ";else"string"===typeof l&&(c=l);if((f=d)&&"function"!==typeof d&&("object"!==typeof d||"number"!==typeof d.length))throw Error("ReciteJSON.stringify");
return a("",{"":b})});"function"!==typeof ReciteJSON.parse&&(ReciteJSON.parse=function(a,b){function c(a,d){var f,k=a[d];if(k&&"object"===typeof k)for(f in k)if(Object.prototype.hasOwnProperty.call(k,f)){var l=c(k,f);void 0!==l?k[f]=l:delete k[f]}return b.call(a,d,k)}a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return a=eval("("+a+")"),"function"===typeof b?c({"":a},""):a;throw new SyntaxError("ReciteJSON.parse");})})();Recite.namespace("Auth");
Recite.Auth=function(){function h(a,c){"undefined"===typeof c&&(c={});var d=b.authorization_endpoint+"?response_type="+a+"&client_id="+b.client_id;null!==b.redirect_uri&&(d+="&redirect_uri="+encodeURIComponent(b.redirect_uri));null!==b.required_scope&&(d+="&scope="+b.required_scope);Recite.Util.each(c,function(a,b){d+="&"+a+"="+b});return d}function g(a,d){var f=document.createElement("div");f.setAttribute("class","recite_auth_iframe_wrapper");f.style.top=parseInt(b.popup.top)+"px";f.style.left="50%";
f.style.marginLeft=-(parseInt(b.popup.width)/2)+"px";f.style.height=Recite.Dom.getWindowDimensions(window).height/1.5;f.style.width=b.popup.width;var k=document.createElement("iframe");k.src=a;k.frameborder=0;k.width=b.popup.width;k.style.border=0;k.height=Recite.Dom.getWindowDimensions(window).height/1.5;a=document.createElement("div");a.setAttribute("class","recite_auth_iframe_close recite-sprite-auth-close");a.setAttribute("data-recite-state",d);f.appendChild(a);f.appendChild(k);document.body.appendChild(f);
Recite.DomEvent.add(k,"load",function(){Recite.DomEvent.add(Recite.Sizzle(".recite_auth_iframe_close")[0],"click",function(a){a=a.target.getAttribute("data-recite-state");c[a].parentNode.removeChild(c[a]);delete c[a]})});return f}var a=!1,d={state:null,access_token:null,expires:null},b={authorization_endpoint:Recite.baseUrl+"/oauth/authorize",token_endpoint:Recite.baseUrl+"/oauth/token",client_id:"c3e9349efd76dd25acc1116c1bb10fda5205ad2d",redirect_uri:Recite.baseUrl+"/oauth/callback/?uri="+Recite.Util.getWindowLocationOrigin(window),
required_scope:null,type:"iframe",popup:{status:"yes",toolbar:"no",location:"no",menubar:"no",directories:"no",resizable:"no",scrollbars:"no",width:850,height:600,top:"120"}},e=[],c=[],l=[],f=!1,k=[];Recite.XDM.receiveMessage(function(b){Recite.Debug.log("Recite.Auth","Message received:",b);b=ReciteJSON.parse(b.data);if(null!==b&&"undefined"!==typeof b.access_token&&-1!==Recite.Util.inArray(b.state,k)){k.splice(Recite.Util.inArray(b.state,k),1);var g=new Date;d.access_token=b.access_token;d.expires=
Math.ceil(g.getTime()/1E3)+parseInt(b.expires_in,10);d.state="authorized";Recite.Event.publish("Auth:authorize",d);a&&Recite.Event.publish("Auth:reauthorize",d);a=!0;Recite.Util.each(l,function(a,b){b(d)});l=[];f=!1;"undefined"!==typeof c[b.state]&&(g=c[b.state],g.parentNode.removeChild(g),delete c[b.state]);"undefined"!==typeof e[b.state]&&(e[b.state].close(),delete e[b.state])}},Recite.baseUrl);return{setOptions:function(a){b=Recite.Util.merge(b,a)},isAuthorized:function(){return"authorized"===
d.state},clear:function(){d.state=null;d.access_token=null;d.expires=null},getStatus:function(a,b){if(!b&&this.isAuthorized())a(d);else if(l.push(a),!f){f=!0;a=Recite.Util.guid();k.push(a);b=h("token",{createGuest:1,display:0,state:a});var e=document.createElement("iframe");e.id=a;e.src=b;e.frameborder=0;e.width=0;e.height=0;c[a]=e;Recite.Debug.log("Recite.Auth","Adding iframe to dom");document.body.appendChild(e)}},authPopup:function(){var a=Recite.Util.guid();k.push(a);var d=h("token",{state:a});
if("iframe"===b.type)c[a]=g(d,a);else{var f="";Recite.Util.each(b.popup,function(a,b){f+=a+"="+b+","});f=f.substr(0,f.length-1);f+=",left="+(Math.ceil(screen.width/2)-b.popup.width/2)+",top="+(Math.ceil(screen.height/2)-b.popup.height/2);e[a]=window.open(d,a,f)}}}}();Recite.namespace("Message");
Recite.Message=function(){var h={toolbarCloseHeader:null,toolbarCloseDialog:null,toolbarCloseOk:null,toolbarCloseCancel:null,leavingCloseHeader:null,leavingCloseDialog:null,leavingCloseOk:null,leavingCloseCancel:null};return{setOptions:function(g){h=Recite.Util.merge(h,g)},getOptions:function(){return h},init:function(){},getMessage:function(g,a){return h[g]?h[g]:a}}}();Recite.namespace("Storage");
Recite.Storage=function(){var h={};return{setOptions:function(g){h=Recite.Util.merge(h,g);Recite.Storage.Cookie.setOptions(g.Cookie);Recite.Storage.Api.setOptions(g.Api);Recite.Storage.LocalStorage.setOptions(g.LocalStorage)},getOptions:function(){return h},init:function(){}}}();Recite.namespace("Storage.Cookie");
Recite.Storage.Cookie=function(){function h(a,d,b){if(b){var e=new Date;e.setTime(e.getTime()+864E5*b);b="; expires="+e.toGMTString()}else b="";a=a+"="+encodeURIComponent(d)+b+"; path=/";g.cookiesDomain&&(a+="; domain="+g.cookiesDomain);document.cookie=a}var g={cookiesDomain:""};return{setOptions:function(a){g=Recite.Util.merge(g,a)},save:function(a,d,b){d=ReciteJSON.stringify(d);h(a,d,b)},load:function(a,d){a:{a+="=";for(var b=document.cookie.split(";"),e=0;e<b.length;e++){for(var c=b[e];" "==c.charAt(0);)c=
c.substring(1,c.length);if(0==c.indexOf(a)){a=decodeURIComponent(c.substring(a.length,c.length));break a}}a=null}a=ReciteJSON.parse(a);d&&d(a);return a},clear:function(a){h(a,"",-1)},supported:function(){return!0}}}();Recite.namespace("Storage.LocalStorage");
Recite.Storage.LocalStorage=function(){var h={};return{save:function(g,a){_supported()&&window.localStorage.setItem(g,a)},load:function(g,a){return _supported()?(g=window.localStorage.getItem(g),"undefined"!==typeof a&&a(g),g):null},clear:function(g){_supported()&&window.localStorage.removeItem(g)},supported:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(g){return!1}},setOptions:function(g){h=Recite.Util.merge(h,g)}}}();Recite.namespace("Storage.Api");
Recite.Storage.Api=function(){var h=["Recite.Preferences"],g={};return{save:function(a,d){if(!a in h)throw{name:"InvalidNamespace",message:"The provided namespace is invalid."};"Recite.Preferences"===a?Recite.Api.call("preferences","POST",{data:d,contentType:"application/json",success:function(a){Recite.Debug.log("Recite.Storage.Api","Preferences Saved.")}}):Recite.Storage.Cookie.save(a,d)},load:function(a,d){!a in h||("Recite.Preferences"===a?Recite.Api.call("preferences","GET",{success:d,error:d}):
Recite.Storage.Cookie.load(a,d))},clear:function(a){},supported:function(){return!0},setOptions:function(a){g=Recite.Util.merge(g,a)}}}();Recite.namespace("Preferences");
Recite.Preferences=function(){function h(b){Recite.Storage.Cookie.load("Recite.Preferences",function(d){null!=d&&(Recite.Debug.log("Recite.Preferences","Loading and merging cookie storage preferences"),a=b?Recite.Util.merge(d,a):d);Recite.Event.publish("Preferences:load",a)})}var g={storageEngine:Recite.Storage.Api,autoSave:!0},a={style:{backgroundColor:null,font:{color:null,face:null,size:null},link:{color:null},marginSize:null,textAlign:null,ruler:{enabled:!1,color:null},screenMask:{enabled:!1,
color:null},wwHighlight:{color:null},lineHeight:null,charSpacing:null},dictionary:{enabled:!1},player:{autoplay:!0,continuePlay:!1,playbackSpeed:1},textMode:{enabled:!1},playerControls:{enabled:!0},language:null,voice:{gender:"f"},magnifier:{enabled:!1},voices:{en:"Amy"}},d=Recite.Util.clone(a);Recite.Event.subscribe("Auth:reauthorize",function(){g.storageEngine===Recite.Storage.Api&&Recite.Preferences.load()});return{setOptions:function(a){var b=!1;Recite.Util.each(a,function(a,d){"storageEngine"===
a&&(b=!0)});g=Recite.Util.merge(g,a);b&&Recite.Preferences.load()},save:function(b){Recite.Debug.log("Recite.Preferences","Saving preferences.");g.storageEngine.save("Recite.Preferences",a);g.storageEngine!==Recite.Storage.Cookie&&Recite.Storage.Cookie.save("Recite.Preferences",a,365);Recite.Gui.Notification.show("Your preferences have been saved.  To reset them press the reset button",{read:!1})},load:function(){Recite.Debug.log("Recite.Preferences","Loading preferences.");Recite.Debug.log("Recite.Preferences",
"Loading primary storage preferences");var b=Recite.Util.clone(d);g.storageEngine.load("Recite.Preferences",function(d){null===d||d.error?h():(Recite.Debug.log("Recite.Preferences","Found user preferences"),a=Recite.Util.merge(b,d),g.storageEngine!==Recite.Storage.Cookie?h(a):Recite.Event.publish("Preferences:load",a))})},get:function(b){if("undefined"===typeof b)return a;var d;b=b.split(".");var c=a;for(d=0;d<b.length;d++)if(c=c[b[d]],"undefined"===typeof c)return null;return c},set:function(b,d){var c=
{};"object"===Recite.Util.type(b)?c=b:c[b]=d;"player.autoplay"!=b&&"playerControls.enabled"!=b&&"player.continuePlay"!=b||Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Preferences",event:b+": "+d});Recite.Util.each(c,function(b,c){var d;b=b.split(".");var f=a;for(d=0;d<b.length-1;d++)if(f=f[b[d]],"undefined"===typeof f)return null;f[b[d]]=c});Recite.Event.publish("Preferences:set",c);g.autoSave&&Recite.Preferences.save();return null},reset:function(b){Recite.Debug.log("Recite.Preferences",
"Reset."+b);var e;var c=b.split(".");var l=a;var f=d;for(e=0;e<c.length-1;e++)l=l[c[e]],f=f[c[e]];var k=f[c[e]];"object"===Recite.Util.type(k)&&(k=Recite.Util.clone(k));l[c[e]]=k;Recite.Event.publish("Preferences:reset",{key:b,value:f});g.autoSave&&Recite.Preferences.save()},resetAll:function(){Recite.Debug.log("Recite.Preferences","ResetAll.");Recite.Event.publish("Preferences:reset");var a=g.autoSave;g.autoSave=!1;Recite.Util.each(d,function(a,b){Recite.Preferences.reset(a)});g.autoSave=a;g.autoSave&&
Recite.Preferences.save();Recite.Gui.Notification.show("Your preferences have been reset.");Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Preferences",event:"resetAll"})}}}();Recite.namespace("UI.Toggle");
Recite.UI.Toggle=function(){function h(g){var a=g.ownerDocument?g.ownerDocument:document;g.setAttribute("class","recite-ui-toggle");a=a.createElement("div");a.setAttribute("class","recite-ui-toggle-slider");a.setAttribute("data-recite-tabbable","");g.appendChild(a);Object.defineProperty?Object.defineProperty(g,"checked",{get:function(){return this._checked},set:function(a){(this._checked=a)?this.setAttribute("class",this.getAttribute("class")+" recite-ui-toggle-active"):this.setAttribute("class",
this.getAttribute("class").replace(" recite-ui-toggle-active",""));this.fireEvent?this.fireEvent("onClick"):(a=document.createEvent("Event"),a.initEvent("change",!0,!0),this.dispatchEvent(a))}}):Recite.Debug.log("Recite.UI.Toggle","defineProperty not found");g.checked=!0}return{invoke:function(g,a){g=Recite.Util.isArray(g)?g:[g];Recite.Util.each(g,function(a,b){h(b);Recite.DomEvent.add(b.childNodes[0],"click",function(a){a=a.target.parentNode;a.checked=!a.checked})})}}}();Recite.namespace("UI.Dropdown");
Recite.UI.Dropdown=function(){function h(d,c,l){c=c||"default";"undefined"===typeof b[c]&&(b[c]=[]);var f=d.getAttribute("class")||"";d.setAttribute("class",f+" recite-active");g(d,l);b[c].push(d);"default"!==c&&Recite.Util.each(b[c],function(b,f){"undefined"!==typeof f&&f!==d&&a(f,c)});Recite.Event.publish("DropDown:menuShown",d)}function g(a,b){Recite.Dom.getWindowDimensions(window);var c=Recite.Sizzle(".recite-controls")[0];b=Recite.Dom.getPosition(b).left-c.scrollLeft-a.offsetWidth/2+20;0>b&&
(b=0);a.style.left=b+"px"}function a(a,c){if(1===a.nodeType||3===a.nodeType){var d=a.getAttribute("class")||"";for(a.setAttribute("class",d.replace(" recite-active",""));-1!==(d=Recite.Util.inArray(a,b[c]));)b[c].splice(d,1);c=Recite.Sizzle(".recite-dropdown-invoke, .recite-dropdown-invoke-active, .recite-dropdown-invoke .recite-button",document);Recite.Util.each(c,function(a,b){b.setAttribute("class",b.getAttribute("class").replace("-active",""))});Recite.Event.publish("DropDown:menuHidden",a)}}
function d(d){for(var c in b)for(var l in b[c])a(b[c][l],c)}var b={};Recite.Event.subscribe("Recite:Style:wrappedElements",function(){var a=Recite.Sizzle("#recite-wrapper")[0];Recite.DomEvent.add(a,"touchstart",d);Recite.DomEvent.add(a,"click",d)});return{loaded:function(){return!1},invoke:function(b,c){b=Recite.Util.isArray(b)?b:[b];Recite.Util.each(b,function(b,c){Recite.DomEvent.add(c,"click",function(b){var c=b.target,d=Recite.Sizzle(c.getAttribute("data-target"))[0],f=c.getAttribute("data-group")||
"default";"undefined"!==typeof d&&(Recite.DomEvent.add(d,"click",function(a){"undefined"!==typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}),/recite-active/g.test(d.getAttribute("class"))?(a(d,f),c.setAttribute("class",c.getAttribute("class").replace("-active",""))):(h(d,f,c),c.setAttribute("class",c.getAttribute("class")+"-active")),"undefined"!==typeof b.stopPropagation?b.stopPropagation():b.cancelBubble=!0)})})},hideGroup:function(d){d=d||null;for(var c in b)null!==d&&d!==c||Recite.Util.each(b[c],
function(b,c){a(c)})}}}();Recite.namespace("UI.ColorPicker");
Recite.UI.ColorPicker=function(){function h(a){var b=a.clientY-(A+p.offsetTop);b=255<b?255:b;var c=Math.abs(360*(b-0)/255-360);w.style.top=b+"px";b=Recite.Tinycolor("hsl("+Math.ceil(c)+", 100%, 50%)");r.style.backgroundColor=b.toRgbString();b=m.getColor().toHsv();b.h=Math.ceil(c);m.setColor(b,a)}function g(a){var b=a.clientY-(A+r.offsetTop),c=a.clientX-(z+r.offsetLeft);b=252<b?252:b;c=252<c?252:c;b=3>b?3:b;c=3>c?3:c;var d=m.getColor().toHsv();d.v=Math.ceil(Math.abs(b-255)/255*100);d.s=Math.ceil(c/
255*100);m.setColor(d,a);v.style.top=b+C.selectorAdjust.top+"px";v.style.left=c+C.selectorAdjust.left+"px"}function a(){Recite.DomEvent.add(p,"mousedown",function(a){h(a)});Recite.DomEvent.add(p,"mouseup",function(a){h(a)});Recite.DomEvent.add(p,"mousemove",function(a){k&&h(a)})}function d(){Recite.DomEvent.add(r,"mousedown",function(a){g(a)});Recite.DomEvent.add(r,"mouseup",function(a){g(a)});Recite.DomEvent.add(r,"mousemove",function(a){k&&g(a)})}function b(){Recite.DomEvent.add(x,"click",function(){q.style.display=
"none"})}function e(a){w.style.top=Math.abs(a-360)/360*100+"%";a=Recite.Tinycolor("hsl("+Math.ceil(a)+", 100%, 50%)");r.style.backgroundColor=a.toRgbString()}function c(a){var b=parseInt(Recite.Dom.getStyle(r,"width"));v.style.left=Math.ceil(b/100*100*a)+C.selectorAdjust.left+"px"}function l(a){a=Math.abs(100*a-100);var b=parseInt(Recite.Dom.getStyle(r,"height"));v.style.top=Math.ceil(b/100*a)+C.selectorAdjust.top+"px"}function f(a){Recite.UI.ColorPicker.hide()}var k=!1,m=null,n=!1,q=null,p=null,
w=null,r=null,x=null,v=null,A=0,z=0,C={selectorAdjust:{left:-5,top:-5},markup:'<div id="recite-ui-colorpicker">                    <div class="recite-colorbox-close">Close</div>                    <div class="recite-colorbox recite-sprite-colorpicker-mask">                        <div class="recite-colorselector recite-sprite-colorpicker-selector"></div>                    </div>                    <div class="recite-huebox recite-sprite-colorpicker-hue">                        <div class="recite-hueslider"></div>                    </div>                </div>'};
return{setOptions:function(a){C=Recite.Util.merge(C,a)},init:function(){Recite.DomEvent.add(document.body,"mousedown",function(a){k=!0});Recite.DomEvent.add(document.body,"mouseup",function(a){k=!1});Recite.DomEvent.add(document.body,"click",f);Recite.Dom.append(C.markup,document.body);q=Recite.Sizzle("#recite-ui-colorpicker")[0];x=Recite.Sizzle(".recite-colorbox-close")[0];r=Recite.Sizzle(".recite-colorbox")[0];v=Recite.Sizzle(".recite-colorselector")[0];p=Recite.Sizzle(".recite-huebox")[0];w=Recite.Sizzle(".recite-hueslider")[0];
Recite.DomEvent.add(q,"click",function(a){"undefined"!==typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0});n=!0;d();a();b()},invoke:function(a,b){b=b||{};a=Recite.Util.isArray(a)?a:[a];n||this.init();Recite.Util.each(a,function(a,d){a="INPUT"===d.tagName?"focus":"click";d.colorPicker={};d.setColor=function(a,b,d,f){var k=void 0==b||"mouseup"==b.type;if(k||!Recite.Tinycolor.equals(a,this.getColor()))d=!1===d?!1:!0,f=!1===f?!1:!0,a=Recite.Tinycolor(a),a.ok&&(this.colorPicker.color=a,"INPUT"===
this.tagName?d&&(this.value=this.colorPicker.color.toHexString()):this.innerText=this.colorPicker.color.toHexString(),"undefined"!==typeof this.colorPicker.callback&&(f||k)&&this.colorPicker.callback(m,a,b),m===this&&(b=this.colorPicker.color.toHsv(),e(b.h),c(b.s),l(b.v)))};d.getColor=function(){return this.colorPicker.color};var f=Recite.Tinycolor(d.style.backgroundColor);f.ok?d.setColor(f):d.setColor(Recite.Tinycolor("#000"));Recite.DomEvent.add(d,a,function(a){Recite.UI.ColorPicker.show();m=a.target;
var b=Recite.Dom.getPosition(m),c=Recite.Dom.getStyle(m,"width"),d=Recite.Sizzle("#recite-colors-advanced")[0];parseInt(Recite.Dom.getPosition(d).top);parseInt(Recite.Dom.getStyle(d,"height"));d=parseInt(Recite.Dom.getStyle(q,"height"));A=window.innerHeight/2-d/2;z=parseInt(b.left)+parseInt(c);q.style.top=A+"px";q.style.left=z+"px";Recite.UI.ColorPicker.invalidate();"undefined"!==typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0});"undefined"!==typeof b.callback&&(d.colorPicker.callback=
b.callback);"INPUT"===d.tagName&&Recite.DomEvent.add(d,"keyup",function(a){this.setColor(a.target.value,a,!1,!0);"undefined"!==typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0})})},show:function(){q.style.display="block"},hide:function(){q.style.display="none"},invalidate:function(){var a=m.colorPicker.color.toHsv();e(a.h);c(a.s);l(a.v)}}}();Recite.namespace("UI.AdvancedColors");
Recite.UI.AdvancedColors=function(){function h(a,b,d){var c=a.getAttribute("data-key"),f=b.toRgbString();g(a,b);a=Recite.Preferences.get(c);f==a||void 0==d||"mouseup"!=d.type&&"blur"!=d.type||(Recite.Debug.log("Recite.UI.AdvancedColors"," set "+c+" to "+f),Recite.Preferences.set(c,f))}function g(b,d){var c=null!=d?d.toRgbString():"transparent";b.parentNode.style.borderColor=c;a(b,c);b.value=null!=d?d.toHexString():""}function a(a,b){switch(a.getAttribute("data-key")){case "style.backgroundColor":a=
Recite.Sizzle("#advanced_colors_background,#advanced_colors_text,#advanced_colors_links");Recite.Util.each(a,function(a,c){c.style.backgroundColor=b});break;case "style.font.color":a=Recite.Sizzle("#advanced_colors_background,#advanced_colors_text,#advanced_colors_ruler,#advanced_colors_mask");Recite.Util.each(a,function(a,c){c.style.color=b});break;case "style.link.color":a=Recite.Sizzle("#advanced_colors_links");Recite.Util.each(a,function(a,c){c.style.color=b});break;case "style.screenMask.color":case "style.ruler.color":a.style.backgroundColor=
b}}function d(a,b){if(void 0===a||"style"==a||"Preferences:reset"==a&&void 0!=b&&"style"==b.key||"Preferences:set"==a||"Preferences:load"==a)Recite.Debug.log("AdvancedColors","Update Color Pickers"),Recite.Util.each(e,function(a,b){a=Recite.Preferences.get(a);void 0!=a&&"null"!=a&&""!=a.trim()?(a=Recite.Tinycolor(a),b.value!=a.toHexString()&&g(b,a)):g(b,null)})}var b={enabled:!0},e={};return{setOptions:function(a){Recite.Debug.log("UI.AdvancedColors",a);b=Recite.Util.merge(b,a)},invoke:function(a,
l){Recite.Debug.log("UI.AdvancedColors","invoke "+b.enabled);b.enabled?(a=Recite.Sizzle(a,l),Recite.Util.each(a,function(a,b){a=b.getAttribute("data-key");e[a]=b}),Recite.UI.ColorPicker.invoke(a,{callback:function(a,b,c){h(a,b,c)}}),Recite.Util.each(a,function(a,b){Recite.DomEvent.add(b,"blur",function(a){var c=Recite.Tinycolor(b.value);h(b,c,a)})}),Recite.Event.subscribe("Preferences:load",d),Recite.Event.subscribe("Preferences:reset",d),Recite.Event.subscribe("Preferences:set",d),Recite.Event.subscribe("DropDown:menuHidden",
function(a,b){Recite.UI.ColorPicker.hide()})):(a=Recite.Sizzle("#recite-themes-advanced")[0],a.parentNode.removeChild(a))}}}();Recite.namespace("Controls");
Recite.Controls=function(){function h(){Recite.Util.each(Recite.Sizzle(".recite-sprite-button-magnifier"),function(a,b){b.style.display="none"});Recite.Util.each(Recite.Sizzle(".recite-sprite-button-ruler"),function(a,b){b.style.display="none"});Recite.Util.each(Recite.Sizzle(".recite-sprite-button-mp3"),function(a,b){b.style.display="none"});Recite.Util.each(Recite.Sizzle(".recite-sprite-button-dictionary"),function(a,b){b.style.display="none"})}function g(a,b){Recite.Debug.log("Controls","Setting up custom user guide for lang: "+
a);Recite.Util.each(Recite.Sizzle(".recite-sprite-button-userguide"),function(a,c){c.setAttribute("href",b)})}function a(){var a=Recite.Dom.getLanguage(Recite.Sizzle("html")[0]);Recite.Util.each(c.languageOverrides.userGuide.languages,function(b,d){b.toLowerCase()==a.toLowerCase()?g(b,d.src):"undefined"!=typeof d.additionalLangs?Recite.Util.each(d.additionalLangs,function(b,c){c.toLowerCase()==a.toLowerCase()&&g(c,d.src)}):g(b,c.languageOverrides.userGuide["default"].src)})}function d(){var a=Recite.Dom.getLanguage(Recite.Sizzle("html")[0]);
Recite.Util.each(c.modules,function(b,c){null!==a&&"undefined"!=typeof c.localize&&c.localize(a)})}function b(a){c.enabled&&(0===c.modules.length&&(c.modules=[Recite.Controls.Desktop,Recite.Controls.Core]),Recite.Debug.log("Recite.Controls","Loading controls"),Recite.Debug.log("Recite.Controls","Getting controls content"),Recite.Ajax.get(c.url,null,function(b,f){c.enabled&&(Recite.Debug.log("Recite.Controls","Got controls content"),b=document.createElement("div"),b.innerHTML=f,l=b.childNodes[0],f=
Recite.Sizzle("body",a)[0],Recite.Dom.prepend(l,f),Recite.Browser.isMobile()&&h(),Recite.Util.each(c.modules,function(a,b){b.init();b.invoke(l)}),d(),Recite.Debug.log("Recite.Controls","Controls loaded"),e=!0,Recite.Event.publish("Controls:loaded"))}))}var e=!1,c={enabled:!0,url:Recite.baseUrl+"/assets/"+Recite.version+"/html/header.htm",modules:[],languageOverrides:{userGuide:{languages:{cy:{src:"http://reciteme.com/user-guides/welsh.pdf"},ar:{src:"https://api.reciteme.com/common/user_guide_ar.pdf",
additionalLangs:["ar-UAE","ar-AE"]}},"default":{src:"http://reciteme.com/user-guide"}}}};Recite.Event.subscribe("Translate:restore_complete",function(){d();a()});Recite.Event.subscribe("Translate:complete",function(){a()});Recite.Event.subscribe("Controls:loaded",function(){a()});var l=null;return{setOptions:function(a){Recite.Debug.log("Recite.Controls","Setting options");c=Recite.Util.merge(c,a);Recite.Controls.Mobile.setOptions(a.Mobile);Recite.Controls.Core.setOptions(a.Core);Recite.Controls.Desktop.setOptions(a.Desktop)},
load:function(a){window.self!=window.top?setTimeout(function(){b(a)},2E3):b(a)},disableOverlay:function(){var a=0;Recite.Magnifier.isEnabled()&&(a=1,Recite.Magnifier.disable());Recite.Ruler.isEnabled()&&(a=2,Recite.Ruler.disable());Recite.ScreenMask.isEnabled()&&(a=3,Recite.ScreenMask.disable());return a},reEnableOverlay:function(a){switch(a){case 1:Recite.Magnifier.enable();break;case 2:Recite.Ruler.enable();break;case 3:Recite.ScreenMask.enable()}},disableInstanceOverlay:function(){Recite.Magnifier.disableInstance();
Recite.Ruler.disableInstance();Recite.ScreenMask.disableInstance()},loaded:e,disable:function(){e&&Recite.Util.each(c.modules,function(a,b){"undefined"!=typeof b.disable&&b.disable()});c.enabled=!1}}}();Recite.namespace("Controls.Core");
Recite.Controls.Core=function(){function h(a,c){b();g()}function g(){Recite.Util.each(Recite.Sizzle(".recite-ui-toggle",document),function(a,b){a=b.getAttribute("data-preference");"undefined"!==Recite.Preferences.get(a)&&(Recite.Preferences.get(a)?b.setAttribute("class",b.getAttribute("class").replace("recite-ui-toggle-active","")+" recite-ui-toggle-active"):b.setAttribute("class",b.getAttribute("class").replace("recite-ui-toggle-active","")))});var a=Recite.Preferences.get("voice.gender");"undefined"!=
typeof a&&null!=a&&Recite.Util.each(Recite.Sizzle(".recite-voice",document),function(b,c){b=c.getAttribute("data-value");c.setAttribute("class",c.getAttribute("class").replace("active",""));-1!==b.indexOf(a)&&c.setAttribute("class",c.getAttribute("class")+" active")});var b=Recite.Preferences.get("player.playbackSpeed");b&&(Recite.Sizzle("#recite-playback-current-speed")[0].innerText=b)}function a(){Recite.Api.call("user","GET",{success:function(a){m.user=a;b()}})}function d(a){if("undefined"===typeof a)return m;
var b;a=a.split(".");var c=m;for(b=0;b<a.length;b++)if(c=c[a[b]],"undefined"===typeof c)return null;return c}function b(){Recite.Util.each(k,function(a,b){if("undefined"!==typeof b.text){a=b.text;var c;f.tagPattern.lastIndex=0;for(var k=a;null!==(c=f.tagPattern.exec(a));){var l=d(c[1])||"";k=k.replace(c[0],l)}b.node.nodeValue=k}"undefined"!==typeof b.attributes&&Recite.Util.each(b.attributes,function(a,c){f.tagPattern.lastIndex=0;for(var k=c.value;null!==(a=f.tagPattern.exec(c.value));){var l=d(a[1]);
"undefined"===typeof l&&(l=null);k=k.replace(a[0],l)}b.node.setAttribute(c.name,k)})})}function e(a,b){var d=b.target?b.target:b.srcElement;Recite.Debug.log("event",b);b=d.getAttribute("data-key").split(" ");a=d.getAttribute("data-value").split(" ");if(b.length!==a.length)Recite.Debug.log("Recite.Controls.Core","Warning: Number of \n                keys does not match number of values.",d);else{d={};for(var k=0;k<b.length;k++){var l=b[k],e=("-"===a[k].charAt(0)?"-":"")+a[k].replace(/-/g," ");"toggle"===
e&&(e=!Recite.Preferences.get(l));if(/\+|\-/.test(e[0])){var g="+"===e[0],q=parseInt(e.replace(/[^0-9]/g,""),10),n=!1;if(g&&"0"==e[1]&&"."==e[2]||"0"==e[2]&&"."==e[3])n=!0,q/=10;var m=Recite.Preferences.get(l);m=null===m?c(l):m;e=g?m+q:m-q;n&&(e=Math.round(10*e)/10);n=l.replace("style.","").split(".");var h="";Recite.Util.each(n,function(a,b){h+=b.charAt(0).toUpperCase()+b.slice(1)});n=f.hasOwnProperty("max"+h+"Percentage")?f["max"+h+"Percentage"]:f.hasOwnProperty("max"+h)?f["max"+h]:f.defaultMax;
var t=f.hasOwnProperty("min"+h+"Percentage")?f["min"+h+"Percentage"]:f.hasOwnProperty("min"+h)?f["min"+h]:f.defaultMin;e>n&&(e=n);e<t&&(e=t);"style.font.size"==l&&(n=Recite.Preferences.get("style.zoom"),n=null===n?100:n,g=g?n+q:n-q,g>f.maxFontSizePercentage&&(g=f.maxFontSizePercentage),g<f.minFontSizePercentage&&(g=f.minFontSizePercentage),m>=f.zoomThreshold&&100<g?(d["style.font.size"]=f.zoomThreshold,l="style.zoom",e=g):100!=n&&(d["style.zoom"]=100));if(0===e.length||"null"===e)e=null}d[l]=e}Recite.Preferences.set(d)}}
function c(a){if("undefined"===typeof a)return 100;var b;a=a.split(".");var c=f.defaults;for(b=0;b<a.length;b++)if(c=c[a[b]],"undefined"===typeof c)return 100;return c}function l(a){var b=Recite.Sizzle(".recite-preference-set",a);Recite.DomEvent.add(b,"click",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;Recite.Event.publish("Controls:affect",a)});b=Recite.Sizzle(".recite-save",a);Recite.DomEvent.add(b,"click",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;Recite.Preferences.save()});
b=Recite.Sizzle(".recite-reset",a);Recite.DomEvent.add(b,"click",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;Recite.Preferences.resetAll()});b=Recite.Sizzle("#recite-toolbar-button-guide");Recite.DomEvent.add(b,"click",function(a){a.preventDefault&&(a.preventDefault?a.preventDefault():a.returnValue=!1);"undefined"!=typeof a.target&&window.open(a.target.getAttribute("href"))});Recite.DomEvent.add(Recite.Sizzle(".recite-language-set",a),"click",function(a){var b=(a.currentTarget?
a.currentTarget:a.srcElement).getAttribute("data-language");"default"===b?(Recite.Language.Translate.restore(),Recite.Preferences.set("language",null)):Recite.Preferences.set("language",b);Recite.Util.each(Recite.Sizzle(".recite-language-set"),function(a,c){c.getAttribute("data-language")===b?c.setAttribute("class",c.getAttribute("class")+" recite-active"):c.setAttribute("class",c.getAttribute("class").replace(" recite-active",""))})})}var f={tagPattern:/{{([A-Za-z._]+)}}/g,defaultMax:200,defaultMin:30,
maxFontSizePercentage:200,minFontSizePercentage:30,zoomThreshold:150,minLineHeight:50,maxLineHeight:300,minCharSpacing:0,maxCharSpacing:20,defaults:{style:{charSpacing:0}},minPlayerPlaybackSpeed:.5,maxPlayerPlaybackSpeed:2},k=[],m={links:{logout:Recite.baseUrl+"/user/logout"},preferences:null};return{setOptions:function(a){f=Recite.Util.merge(f,a)},init:function(){Recite.Debug.log("Recite.Controls.Core","Core controls invoked");Recite.Event.subscribe("Preferences:load",h);Recite.Event.subscribe("Preferences:set",
h);Recite.Event.subscribe("Preferences:reset",h);Recite.Event.subscribe("Auth:reauthorize",a);Recite.Event.subscribe("Controls:affect",e)},invoke:function(b){for(var c=b;null!==c;){if(3===c.nodeType&&0<c.nodeValue.trim().length){var e=c.nodeValue;if(f.tagPattern.test(e)){var g;f.tagPattern.lastIndex=0;for(var n=e;null!==(g=f.tagPattern.exec(e));){var m=d(g[1])||"";n=n.replace(g[0],m)}c.nodeValue=n;k.push({node:c,text:e})}}if(1===c.nodeType){var h=[];Recite.Util.each(c.attributes,function(a,b){a=b.value;
if(f.tagPattern.test(a)){var c;f.tagPattern.lastIndex=0;for(h.push({name:b.name,value:b.value});null!==(c=f.tagPattern.exec(a));)a=d(c[1]),"undefined"===typeof a&&(a=null),b.value=b.value.replace(c[0],a)}});0<h.length&&k.push({node:c,attributes:h})}if(c.hasChildNodes())c=c.firstChild;else{for(;null===c.nextSibling&&c!==b;)c=c.parentNode;c=c===b?null:c.nextSibling}}Recite.Util.each(Recite.Sizzle(".recite-ui-toggle",b),function(a,b){Recite.UI.Toggle.invoke(b);Recite.DomEvent.add(b,"click",function(a){a=
a.currentTarget?a.currentTarget:a.srcElement;Recite.Preferences.set(a.getAttribute("data-preference"),a.checked)})});Recite.Util.each(Recite.Sizzle(".recite-slider"),function(a,b){var c=b.getAttribute("data-type");Recite.UI.Slider.invoke(b,function(a){Recite.Event.publish("Slider:"+c,a)})});l(b);a()}}}();Recite.namespace("Controls.Desktop");
Recite.Controls.Desktop=function(){function h(a,b){if("play"===b||"stopped"===a.getAttribute("data-status")&&"undefined"===b)return a.setAttribute("class",a.getAttribute("class").replace("recite-sprite-button-play","recite-sprite-button-stop")),a.setAttribute("data-status","playing"),"playing";if("stop"===b||"playing"===a.getAttribute("data-status")&&"undefined"===b)return a.setAttribute("class",a.getAttribute("class").replace("recite-sprite-button-stop","recite-sprite-button-play")),a.setAttribute("data-status",
"stopped"),"stopped"}function g(){var a=Recite.Sizzle("[tabindex]");Recite.Util.each(a,function(a,b){a=parseInt(b.getAttribute("tabindex"));a>=f.tabIndexStartValue&&b.setAttribute("tabindex",a+200)})}function a(b){f.tabEnabled&&(null==l&&(l=f.tabIndexStartValue),b=Recite.Sizzle("[data-recite-tabbable]",b),Recite.Util.each(b,function(b,c){if("undefined"!=typeof c.getAttribute("data-tabbable-offset"))var f=parseInt(c.getAttribute("data-tabbable-offset"));null==c.getAttribute("tabindex")&&(b=l,isNaN(f)||
(b+=f),c.setAttribute("tabindex",b),l++,-1<(" "+c.className+" ").replace(/[\n\t]/g," ").indexOf(" recite-dropdown-invoke ")&&(f=Recite.Sizzle(c.getAttribute("data-target"))[0],a(f)),c.onfocus=function(a){var b="undefined"!=typeof a.target?a.target:a.srcElement;Recite.Util.each(Recite.Sizzle(".recite-dropdown-invoke-active"),function(a,b){a=Recite.Sizzle(b.getAttribute("data-target"))[0];Recite.Dom.isDescendant(document.activeElement,a)||b.click()});Recite.Util.each(Recite.Sizzle(".recite-dropdown"),
function(a,c){Recite.Dom.isDescendant(b,c)&&(a=Recite.Sizzle("[data-target='#"+c.getAttribute("id")+"']")[0],"undefined"!=a&&-1==(" "+a.className+" ").replace(/[\n\t]/g," ").indexOf(" recite-dropdown-invoke-active ")&&d(a))})})}))}function d(a){var b=parseInt(a.getAttribute("tabindex")),c=0;Recite.Util.each(Recite.Sizzle(".recite-button-primary"),function(a,d){a=parseInt(d.getAttribute("tabindex"));a>b&&(0==c||a<c)&&(c=a)});Recite.Sizzle("[tabindex="+c+"]")[0].focus()}function b(){Recite.Key("enter",
function(){if(null!=document.activeElement.getAttribute("data-recite-tabbable"))return document.activeElement.click(),!1});Recite.Key("space",function(){if(null!=document.activeElement.getAttribute("data-recite-tabbable"))return document.activeElement.click(),!1});Recite.Key("shift+tab",function(){var a=parseInt(document.activeElement.getAttribute("tabindex"))-1,b=Recite.Sizzle("[tabindex="+a+"]")[0],c=!1;Recite.Util.each(Recite.Sizzle(".recite-dropdown"),function(a,d){Recite.Dom.isDescendant(b,d)&&
(a=Recite.Sizzle("[data-target='#"+d.getAttribute("id")+"']")[0],-1==(" "+a.className+" ").replace(/[\n\t]/g," ").indexOf(" recite-dropdown-invoke-active ")&&(c=!0,a.focus()))});if(c)return!1})}function e(){0<f.disabledButtons.length&&Recite.Util.each(f.disabledButtons,function(a,b){c.hasOwnProperty(b)&&(a=c[b],a.hasOwnProperty("buttonClass")&&(b=Recite.Sizzle(a.buttonClass),Recite.Util.each(b,function(a,b){b.style.display="none"})),a.hasOwnProperty("module")&&Recite.hasOwnProperty(a.module)&&"function"==
typeof Recite[a.module].disable&&"function"==typeof Recite[a.module].isEnabled&&Recite[a.module].isEnabled()&&(Recite[a.module].disable(),Recite.Debug.log("Recite.Controls.Desktop","Disable button : "+a.module)))})}var c={previous:{buttonClass:".recite-sprite-button-back"},play:{buttonClass:".recite-sprite-button-play"},forward:{buttonClass:".recite-sprite-button-forward"},fontMinus:{buttonClass:".recite-sprite-button-font-minus"},font:{buttonClass:".recite-sprite-button-font"},fontPlus:{buttonClass:".recite-sprite-button-font-plus"},
themes:{buttonClass:".recite-sprite-button-themes"},ruler:{buttonClass:".recite-sprite-button-ruler",module:"Ruler",preferences:{"style.ruler.enabled":!1}},screenMask:{buttonClass:".recite-sprite-button-screenmask",module:"ScreenMask",preferences:{"style.screenMask.enabled":!1}},dictionary:{buttonClass:".recite-sprite-button-dictionary",module:"Dictionary"},translate:{buttonClass:".recite-sprite-button-translate"},textMode:{buttonClass:".recite-sprite-button-textmode"},margin:{buttonClass:".recite-sprite-button-margin"},
alignment:{buttonClass:".recite-sprite-button-alignment"},mp3:{buttonClass:".recite-sprite-button-mp3"},magnifier:{buttonClass:".recite-sprite-button-magnifier",module:"Magnifier",preferences:{"magnifier.enabled":!1}},settings:{buttonClass:".recite-sprite-button-settings"},reset:{buttonClass:".recite-sprite-button-reset"},guide:{buttonClass:".recite-sprite-button-userguide"}},l=null,f={promptBeforeLeave:!0,tabEnabled:!0,tabIndexStartValue:1,autoIncrementTabIndex:!0,disabledButtons:[],fonts:[{name:"Default",
font:"Default"},{name:"Arial",font:"Arial"},{name:"Verdana",font:"Verdana"},{name:"Comic-Sans-MS",font:"Comic Sans MS"},{name:"Georgia",font:"Georgia"},{name:"Tahoma",font:"Tahoma"},{name:"Lato",font:"Lato"},{name:"Trebuchet",font:"Trebuchet"},{name:"Open-Dyslexic",font:"Open Dyslexic"}],swatches:[{backgroundColor:"#000",color:"#fff",linkColor:"#FF0000",rulerColor:"#fff",maskColor:"#fff",section:"dark"},{backgroundColor:"#000",color:"#FCED20",linkColor:"#FF0000",rulerColor:"#FCED20",maskColor:"#FCED20",
section:"dark"},{backgroundColor:"#005B0E",color:"#fff",linkColor:"#FFE100",section:"dark"},{backgroundColor:"#0201FF",color:"#fff",linkColor:"#FFAB00",section:"dark"},{backgroundColor:"#C83400",color:"#FFF",linkColor:"#F5FF00",section:"dark"},{backgroundColor:"#0201FF",color:"#FFAB00",linkColor:"#fff",section:"dark"},{backgroundColor:"#343A3F",color:"#B8BCC0",linkColor:"#FCED20",section:"dark"},{backgroundColor:"#4D4D4D",color:"#FFF",linkColor:"#ffcb53",section:"dark"},{backgroundColor:"#932191",
color:"#FFF",linkColor:"#fff902",section:"dark"},{backgroundColor:"#7C1818",color:"#FFF",linkColor:"#00ff67",section:"dark"},{backgroundColor:"#F4EED9",color:"#1D1916",linkColor:"#000",rulerColor:"#1D1916",maskColor:"#1D1916",section:"light"},{backgroundColor:"#CACFD3",color:"#343A3F",linkColor:"#000",rulerColor:"#343A3F",maskColor:"#343A3F",section:"light"},{backgroundColor:"#FFE9BD",color:"#000000",linkColor:"#000",rulerColor:"#000",maskColor:"#000",section:"light"},{backgroundColor:"#FCED20",color:"#000",
linkColor:"#000",rulerColor:"#000",maskColor:"#000",section:"light"},{backgroundColor:"#FCED20",color:"#0201FF",linkColor:"#000",rulerColor:"#000",maskColor:"#000",section:"light"},{backgroundColor:"#FFFFFF",color:"#C3272B",linkColor:"#000",rulerColor:"#000",maskColor:"#000",section:"light"},{backgroundColor:"#FFFFFF",color:"#955200",linkColor:"#000",rulerColor:"#000",maskColor:"#000",section:"light"},{backgroundColor:"#FFFFFF",color:"#007312",linkColor:"#000",rulerColor:"#000",maskColor:"#000",section:"light"},
{backgroundColor:"#FFFFFF",color:"#0100FF",linkColor:"#000",rulerColor:"#000",maskColor:"#000",section:"light"},{backgroundColor:"#fff",color:"#000",linkColor:"#C00",rulerColor:"#000",maskColor:"#000",section:"light"}],pallettes:[{backgroundColor:"#FCED20",color:"#000",linkColor:"#C00",rulerColor:"#000",maskColor:"#000"},{backgroundColor:"#FCED20",color:"#000",linkColor:"#C00",rulerColor:"#000",maskColor:"#000"},{backgroundColor:"#FCED20",color:"#000",linkColor:"#C00",rulerColor:"#000",maskColor:"#000"}],
languages:{"default":{name:"Default",native_name:"Reset",audible:!1,flag:null},af:{name:"Afrikaans",native_name:"Afrikaans",audible:!1,flag:"sa"},sq:{name:"Albanian",native_name:"shqip",audible:!1,flag:"al"},am:{name:"Amharic",native_name:"\u12a3\u121b\u122d\u129b",audible:!1,flag:null},ar:{name:"Arabic",native_name:"\u0639\u0631\u0628\u064a",audible:!0,flag:"dz"},hy:{name:"Armenian",native_name:"\u0540\u0561\u0575\u0565\u0580\u0567\u0576",audible:!1,flag:null},az:{name:"Azerbaijani",native_name:"\u0622\u0630\u0631\u0628\u0627\u064a\u062c\u0627\u0646\u062c\u0627 \u062f\u064a\u0644\u064a",
audible:!1,flag:"az"},eu:{name:"Basque",native_name:"euskara",audible:!1,flag:null},bn:{name:"Bengali",native_name:"\u09ac\u09be\u0982\u09b2\u09be (ba\u025b\u1e45l\u0101)",audible:!1,flag:"bd"},be:{name:"Belarusian",native_name:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f \u043c\u043e\u0432\u0430",audible:!1,flag:"by"},bs:{name:"Bosnian",native_name:"bosanski",audible:!1,flag:null},bg:{name:"Bulgarian",native_name:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 (b\u00e3lgarski)",
audible:!1,flag:"bg"},ca:{name:"Catalan",native_name:"catal\u00e0",audible:!1,flag:"ad"},ceb:{name:"Cebuano",native_name:"Sinugboanon",audible:!1,flag:null},ny:{name:"Chichewa",native_name:"Chiche\u0175a",audible:!1,flag:null},"zh-CN":{name:"Chinese Simplified",native_name:"\u4e2d\u56fd\u7b80\u5316",audible:!0,flag:"cn"},"zh-TW":{name:"Chinese Traditional",native_name:"\u4e2d\u570b\u50b3\u7d71",audible:!0,flag:"cn"},co:{name:"Corsican",native_name:"corsu",audible:!1,flag:null},hr:{name:"Croatian",
native_name:"Hrvatski",audible:!1,flag:"hr"},cs:{name:"Czech",native_name:"\u010de\u0161tina",audible:!0,flag:"cz"},da:{name:"Danish",native_name:"dansk",audible:!0,flag:"dk"},nl:{name:"Dutch",native_name:"Nederlands",audible:!0,flag:"nl"},en:{name:"English",native_name:"English",audible:!0,flag:"gb"},eo:{name:"Esperanto",native_name:"Esperanto",audible:!1,flag:null},et:{name:"Estonian",native_name:"eesti keel",audible:!1,flag:"ee"},tl:{name:"Filipino",native_name:"filipino",audible:!1,flag:"ph"},
fi:{name:"Finnish",native_name:"suomi",audible:!0,flag:"fi"},fr:{name:"French",native_name:"fran\u00e7ais",audible:!0,flag:"fr"},fy:{name:"Frisian (West)",native_name:"Frysk",audible:!1,flag:null},gl:{name:"Galician",native_name:"Galego",audible:!1,flag:"gl"},ka:{name:"Georgian",native_name:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8 (k\u02bbart\u02bbuli)",audible:!1,flag:"ge"},de:{name:"German",native_name:"Deutsch",audible:!0,flag:"de"},el:{name:"Greek",native_name:"\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac ",
audible:!0,flag:"gr"},gu:{name:"Gujarati",native_name:"\t\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0 ",audible:!1,flag:"gu"},ht:{name:"Haitian Creole",native_name:"Krey\u00f2l ayisyen",audible:!1,flag:"ht"},ha:{name:"Hausa",native_name:"\u062d\u064e\u0648\u0652\u0633",audible:!1,flag:null},haw:{name:"Hawaiian",native_name:"\u02bb\u014dlelo Hawai\u02bbi",audible:!1,flag:null},iw:{name:"Hebrew",native_name:"\u05e2\u05b4\u05d1\u05b0\u05e8\u05b4\u05d9\u05ea",audible:!1,flag:"il"},hi:{name:"Hindi",native_name:"\u0939\u093f\u0928\u094d\u0926\u0940",
audible:!0,flag:"in"},hmn:{name:"Hmong",native_name:"Hmong",audible:!1,flag:null},hu:{name:"Hungarian",native_name:"Hungarian Magyar",audible:!0,flag:"hu"},is:{name:"Icelandic",native_name:"\u00cdslenska",audible:!1,flag:"is"},ig:{name:"Igbo",native_name:"Igbo",audible:!1,flag:null},id:{name:"Indonesian",native_name:"Bahasa Indonesia",audible:!0,flag:"id"},ga:{name:"Irish (Gaelic)",native_name:"Gaeilge",audible:!0,flag:"ie"},it:{name:"Italian",native_name:"italiano",audible:!0,flag:"it"},ja:{name:"Japanese",
native_name:"\u65e5rus\u672c\u8a9e",audible:!0,flag:"jp"},jv:{name:"Javanese",native_name:"ba\u1e63a Jawa",audible:!1,flag:null},kn:{name:"Kannada",native_name:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1 ",audible:!1,flag:"id"},kk:{name:"Kazakh",native_name:"\u049a\u0430\u0437\u0430\u049b \u0442\u0456\u043b\u0456 ",audible:!1,flag:null},km:{name:"Khmer",native_name:"\t\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a ",audible:!1,flag:null},ko:{name:"Korean",native_name:"\ud55c\uad6d\uc5b4 ",audible:!0,
flag:"kr"},ku:{name:"Kurdish",native_name:"Kurmanji ",audible:!1,flag:null},ky:{name:"Kyrgyz",native_name:"\u0642\u0649\u0631\u0639\u0649\u0632 ",audible:!1,flag:null},lo:{name:"Lao",native_name:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7 ",audible:!1,flag:null},la:{name:"Latin",native_name:"Lingua Latina",audible:!1,flag:"va"},lv:{name:"Latvian",native_name:"\tlatvie\u0161u valoda",audible:!1,flag:"lv"},lt:{name:"Lithuanian",native_name:"lietuvi\u0173 kalba",audible:!1,flag:"lt"},lb:{name:"Luxembourgish",
native_name:"L\u00ebtzebuergesch",audible:!1,flag:null},mk:{name:"Macedonian",native_name:"\u043c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",audible:!1,flag:"mk"},mg:{name:"Malagasy",native_name:"Fiteny Malagasy",audible:!1,flag:null},ms:{name:"Malay",native_name:"Bahasa melayu",audible:!1,flag:"my"},ml:{name:"Malayalam",native_name:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02 ",audible:!1,flag:null},mt:{name:"Maltese",native_name:"Malti",audible:!1,flag:"mt"},mi:{name:"Maori",native_name:"\tte Reo M\u0101ori",
audible:!1,flag:null},mr:{name:"Marathi",native_name:"\u092e\u0930\u093e\u0920\u0940",audible:!1,flag:null},mn:{name:"Mongolian",native_name:"\u041c\u043e\u043d\u0433\u043e\u043b",audible:!1,flag:null},my:{name:"Myanmar (Burmese)",native_name:"\t\u1017\u1019\u102c\u1005\u1000\u102c\u1038 ",audible:!1,flag:null},ne:{name:"Nepali",native_name:"\u0928\u0947\u092a\u093e\u0932\u0940",audible:!1,flag:null},no:{name:"Norwegian",native_name:"norsk",audible:!0,flag:"no"},ps:{name:"Pashto",native_name:"\u067e\u069a\u062a\u0648",
audible:!1,flag:null},fa:{name:"Persian",native_name:"\u0641\u0627\u0631\u0633\u0649",audible:!1,flag:"ir"},pl:{name:"Polish",native_name:"polski",audible:!0,flag:"pl"},pt:{name:"Portuguese",native_name:"portugu\u00eas",audible:!0,flag:"pt"},pa:{name:"Punjabi",native_name:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",audible:!1,flag:null},ro:{name:"Romanian",native_name:"rom\u00e2n\u0103",audible:!0,flag:"ro"},ru:{name:"Russian",native_name:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a ",
audible:!0,flag:"ru"},sm:{name:"Samoan",native_name:"Gagana Samoa",audible:!1,flag:null},gd:{name:"Scots Gaelic",native_name:"G\u00e0idhlig",audible:!0,flag:null},sr:{name:"Serbian",native_name:"\u0441\u0440\u043f\u0441\u043a\u0438",audible:!1,flag:"rs"},st:{name:"Sesotho",native_name:"seSotho",audible:!1,flag:null},sn:{name:"Shona",native_name:"chiShona",audible:!1,flag:null},sd:{name:"Sindhi",native_name:"\u0633\u0646\u068c\u064a",audible:!1,flag:null},si:{name:"Sinhala",native_name:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",
audible:!1,flag:null},sk:{name:"Slovak",native_name:"sloven\u010dina",audible:!0,flag:"sk"},sl:{name:"Slovenian",native_name:"sloven\u0161\u010dina",audible:!1,flag:"sk"},so:{name:"Somali",native_name:"af Soomaali",audible:!1,flag:null},es:{name:"Spanish",native_name:"espa\u00f1ol",audible:!0,flag:"es"},su:{name:"Sundanese",native_name:"Basa Sunda",audible:!1,flag:null},sw:{name:"Swahili",native_name:"Kiswahili",audible:!1,flag:"ke"},sv:{name:"Swedish",native_name:"svenska",audible:!0,flag:"se"},
ta:{name:"Tamil",native_name:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd ",audible:!0,flag:"in"},tg:{name:"Tajik",native_name:"\u0442\u043e\u04b7\u0438\u043a\u0438",audible:!1,flag:null},te:{name:"Telugu",native_name:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",audible:!1,flag:"in"},th:{name:"Thai",native_name:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",audible:!1,flag:"th"},tr:{name:"Turkish",native_name:"T\u00fcrk\u00e7e",audible:!0,flag:"tr"},uk:{name:"Ukrainian",native_name:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",
audible:!1,flag:"ua"},ur:{name:"Urdu",native_name:"\u0627\u0631\u062f\u0648",audible:!1,flag:"pk"},uz:{name:"Uzbek",native_name:"\t\u0623\u06c7\u0632\u0628\u06d0\u0643 \ufe97\ufef4\ufee0\u06cc o'zbek tili \u045e\u0437\u0431\u0435\u043a \u0442\u0438\u043b\u0438",audible:!1,flag:null},vi:{name:"Vietnamese",native_name:"ti\u1ebfng vi\u1ec7t",audible:!1,flag:"vn"},cy:{name:"Welsh",native_name:"Cymraeg",audible:!0,flag:"wales"},yi:{name:"Yiddish",native_name:"\u05f2\u05b4\u05d3\u05d9\u05e9",audible:!1,
flag:"ua"},xh:{name:"Xhosa",native_name:"isiXhosa",audible:!1,flag:null},yo:{name:"Yoruba",native_name:"Yor\u00f9b\u00e1",audible:!1,flag:null},zu:{name:"Zulu",native_name:"isiZulu",audible:!1,flag:null}},margins:[{name:"Default",value:null,icon:null},{name:"Large",value:"5%",icon:"recite-sprite-margin-large"},{name:"Medium",value:"15%",icon:"recite-sprite-margin-medium"},{name:"Small",value:"30%",icon:"recite-sprite-margin-small"}],alignments:[{name:"Default",value:null,icon:null},{name:"Left aligned",
value:"left",icon:null},{name:"Right aligned",value:"right",icon:null},{name:"Centered",value:"center",icon:null},{name:"Justified",value:"justify",icon:null}],simplifiedControls:!0,showLogo:!0,customLogo:!1,customLogoLink:!1,customLogoTitle:!1,customCloseTitle:!1,repositionBackground:!0};Recite.Event.subscribe("Preferences:load",e);Recite.Event.subscribe("Preferences:set",e);Recite.Event.subscribe("Preferences:reset",e);Recite.Event.subscribe("Controls:loaded",function(){var a=document.getElementById("recite-toolbar-button-previous");
a&&a.focus()});return{setOptions:function(a){f=Recite.Util.merge(f,a)},getOptions:function(){return f},init:function(){},localize:function(a){Recite.Debug.log("Recite.Controls.Desktop","Localizing controls: "+a);Recite.Language.Translate.translate(Recite.Sizzle("#recite-header")[0],a)},applyTabOrder:function(){f.autoIncrementTabIndex&&g();a();b()},disable:function(){},invoke:function(a){var b=document.body;if(f.simplifiedControls){a.setAttribute("class",a.getAttribute("class")+" recite-controls-simplified");
var c=Recite.Sizzle(".recite-sprite-logo")[0],d=Recite.Sizzle("#recite-logo-header")[0];if(Recite.Browser.isMobile()){c.setAttribute("class","recite-sprite-logo-icon");d.setAttribute("class",d.getAttribute("class")+" recite-header-logo-icon");c=Recite.Sizzle(".recite-sprite-button-magnifier")[0];d=Recite.Sizzle(".recite-sprite-button-ruler")[0];var l=Recite.Sizzle(".recite-sprite-button-screenmask")[0];c.style.display="none";d.style.display="none";l.style.display="none"}else c.setAttribute("class",
"recite-sprite-logo-small")}e();var k=Recite.Dom.getStyle(a,"height");k=parseInt(k.replace("px",""),10);if("tooltip"===Recite.getOptions().selectionMethod)try{Recite.PlayerControls.getProvider().setTopProtection(k)}catch(y){}if(f.repositionBackground)if(c=Recite.Dom.getStyle(b,"background-position-y"),"0%"===c)b.setAttribute("style","background-position-y:"+k+" px !important");else if(c.match(/px/i)||"top"===c)c=c.replace("px",""),c=parseInt(c,10)+parseInt(k,10),b.setAttribute("style","background-position-y:"+
c+" px !important");b.style.setProperty?(b.style.setProperty("position","absolute","important"),b.style.setProperty("top",k+"px","important"),b.style.setProperty("width","100%","important")):(b.style.width="100%",b.style.position="absolute",b.style.top=k+"px");Recite.Util.each(Recite.Sizzle("*"),function(a,b){/recite/.test(b.getAttribute("id"))||/recite/.test(b.getAttribute("class"))||"fixed"!==Recite.Dom.getStyle(b,"position")||(a=b.offsetTop,a<k&&(b.style.top=k+a+"px"))});var g=Recite.Sizzle("#recite-fonts")[0];
Recite.Util.each(f.fonts,function(a,b){a=document.createElement("div");a.setAttribute("class","recite-font recite-preference-set recite-default-button recite-default-button-full recite-standard-border-radius");a.setAttribute("data-key","style.font.face");"Default"!==b?(a.setAttribute("data-value",b.name),a.style.fontFamily=b.font):a.setAttribute("data-value","null");a.innerText=b.name;a.textContent=b.name;a.setAttribute("data-recite-tabbable","");g.appendChild(a)});Recite.Sizzle("#recite-swatches");
var x=Recite.Sizzle("#recite-swatches-dark")[0],v=Recite.Sizzle("#recite-swatches-light")[0];Recite.Util.each(f.swatches,function(a,b){a=document.createElement("div");a.setAttribute("class","recite-swatch recite-preference-set recite-standard-border-radius");a.setAttribute("data-recite-translate-skip","true");null===b.backgroundColor&&null===b.color&&null===b.linkColor?(a.setAttribute("class",a.getAttribute("class")+" recite-swatch-default"),a.textContent="Default",a.innerText="Default"):(a.textContent=
"A",a.innerText="A");var c="style.backgroundColor style.font.color style.link.color",d=b.backgroundColor+" "+b.color+" "+b.linkColor;b.hasOwnProperty("rulerColor")&&(c+=" style.ruler.color",d+=" "+b.rulerColor);b.hasOwnProperty("maskColor")&&(c+=" style.screenMask.color",d+=" "+b.maskColor);b.hasOwnProperty("highlightColor")&&(c+=" style.wwHighlight.color",d+=" "+b.highlightColor);a.setAttribute("data-key",c);a.setAttribute("data-value",d);a.setAttribute("data-recite-tabbable","");a.style.color=b.color;
a.style.backgroundColor=b.backgroundColor;"dark"==b.section&&x.appendChild(a);"light"==b.section&&v.appendChild(a)});var A=Recite.Sizzle("#recite-languages")[0];Recite.Util.each(f.languages,function(a,b){var c=document.createElement("li"),d=document.createElement("div"),f=document.createElement("div");b.audible&&(f.setAttribute("class","recite_language_audible recite-sprite-audible "),c.appendChild(f));f=document.createElement("div");f.appendChild(document.createTextNode(b.name));f.setAttribute("class",
"recite_language_main_name_str");c.appendChild(f);"undefined"!=typeof b.native_name&&(d.setAttribute("class","recite_language_native_name_str"),d.setAttribute("data-recite-translate-skip","false"),d.appendChild(document.createTextNode(b.native_name)),c.appendChild(d));c.setAttribute("class","recite-language-set recite-default-button recite-default-button-full recite-standard-border-radius");c.setAttribute("data-language",a);c.setAttribute("data-recite-tabbable","");c.setAttribute("data-recite-translate-skip",
"false");A.appendChild(c)});var z=Recite.Sizzle("#recite-margins")[0];Recite.Util.each(f.margins,function(a,b){a=document.createElement("div");a.setAttribute("class","recite-margin recite-preference-set");a.setAttribute("data-key","style.marginSize");a.setAttribute("data-value",b.value);var c=b.icon||null;if(null!==c){var d=document.createElement("div");d.setAttribute("class",c);d.style.margin="0 auto";d.setAttribute("data-key","style.marginSize");d.setAttribute("data-value",b.value);a.appendChild(d)}else a.textContent=
b.name,a.innerText=b.name;z.appendChild(a)});var C=Recite.Sizzle(".recite-sprite-button-margin")[0];C.style.display="none";Recite.Event.subscribe("TextMode:enabled",function(a,b){C.style.display="block"});Recite.Event.subscribe("TextMode:disabled",function(a,b){C.style.display="none"});var u=Recite.Sizzle("#recite-alignments")[0];Recite.Util.each(f.alignments,function(a,b){a=document.createElement("div");a.setAttribute("class","recite-alignment recite-preference-set");a.setAttribute("data-key","style.textAlign");
a.setAttribute("data-value",b.value);var c=b.icon||null;if(null!==c){var d=document.createElement("div");d.setAttribute("class",c);d.style.margin="0 auto";d.setAttribute("data-key","style.text-align");d.setAttribute("data-value",b.value);a.appendChild(d)}else a.textContent=b.name,a.innerText=b.name;u.appendChild(a)});var t=Recite.Sizzle(".recite-sprite-button-alignment")[0];t&&(t.style.display="none",Recite.Event.subscribe("TextMode:enabled",function(a,b){t.style.display="block"}),Recite.Event.subscribe("TextMode:disabled",
function(a,b){t.style.display="none"}));b=Recite.Sizzle(".recite-button",a);Recite.UI.Dropdown.invoke(b);Recite.Debug.log("Recite.Desktop","launch advanced");Recite.UI.AdvancedColors.invoke(".recite-colorpicker",a);var B=Recite.Sizzle(".recite-sprite-button-play")[0];Recite.DomEvent.add(B,"click",function(a){"stopped"===B.getAttribute("data-status")?Recite.PlayerControls.play():Recite.PlayerControls.stop()});Recite.Event.subscribe("Audio:ended",function(a,b){h(B,"stop")});Recite.Event.subscribe("Audio:started",
function(a,b){h(B,"play")});f.showLogo&&Recite.getOptions("showBrand")||(a=Recite.Sizzle(".recite-logo")[0],a.innerHTML="",a.setAttribute("class","custom-logo"));0!=f.customLogo&&(a=Recite.Sizzle(".recite-logo")[0],a.setAttribute("class","custom-logo"),a.innerHTML='<img src="'+f.customLogo+'" />',0!=f.customLogoLink&&(a.href=f.customLogoLink),0!=f.customLogoTitle&&(a.title=f.customLogoTitle));0!=f.customCloseTitle&&(a=Recite.Sizzle("a.recite-close"),Recite.Util.each(a,function(a,b){b.title=f.customCloseTitle}));
!1===Recite.AudioDownload.getOptions().enabled&&(a=Recite.Sizzle(".recite-sprite-button-mp3")[0],a.outerHTML="");a=Recite.Sizzle(".recite-close");Recite.getOptions("showBrand")||Recite.Util.each(a,function(a,b){b.setAttribute("title","Close Accessibility Toolbar")});Recite.DomEvent.add(a,"click",function(a){a.preventDefault()});a=Recite.Sizzle(".recite-version");Recite.DomEvent.add(a,"click",function(a){Recite.Util.each(Recite.Sizzle(".recite-auth"),function(a,b){b.style.display="block"})});Recite.DomEvent.add(Recite.Sizzle("#recite-logo-header"),
"click",function(a){if(f.promptBeforeLeave){a.preventDefault();var b=Recite.Controls.disableOverlay();Recite.Gui.Modal.show(Recite.Message.getMessage("leavingCloseHeader","Leaving Website"),Recite.Message.getMessage("leavingCloseDialog","You are about to leave this website to go to http://www.reciteme.com. Click OK or hit <em>enter</em> key to continue. Press esc key or hit <em>cancel</em> to stay on this page."),Recite.Message.getMessage("leavingCloseOk","OK"),Recite.Message.getMessage("leavingCloseCancel",
"Cancel"),function(){window.open(Recite.Sizzle("#recite-logo-header")[0].getAttribute("href"),"_blank")},function(){Recite.Gui.Notification.show("Close operation canceled");Recite.Controls.reEnableOverlay(b)})}})}}}();Recite.namespace("Controls.Mobile");
Recite.Controls.Mobile=function(){function h(a,d){if("play"===d||"stopped"===a.getAttribute("data-status")&&"undefined"===d)return a.setAttribute("class",a.getAttribute("class").replace("recite-sprite-button-top-play-mobile","recite-sprite-button-top-stop-mobile")),a.setAttribute("data-status","playing"),"playing";if("stop"===d||"playing"===a.getAttribute("data-status")&&"undefined"===d)return a.setAttribute("class",a.getAttribute("class").replace("recite-sprite-button-top-stop-mobile","recite-sprite-button-top-play-mobile")),
a.setAttribute("data-status","stopped"),"stopped"}var g={fonts:"Default Arial Verdana Georgia Tahoma Trebuchet Tiresias".split(" "),swatches:[{backgroundColor:null,color:null,linkColor:null},{backgroundColor:"#000",color:"#fff",linkColor:"#C00"},{backgroundColor:"#C3272A",color:"#FFF",linkColor:"#00C"},{backgroundColor:"#F05924",color:"#FFF",linkColor:"#00C"},{backgroundColor:"#37B64B",color:"#fff",linkColor:"#2fc2ef"},{backgroundColor:"#0201FF",color:"#fff",linkColor:"#9c0001"},{backgroundColor:"#0000FE",
color:"#FCED20",linkColor:"#2fc2ef"},{backgroundColor:"#FCED20",color:"#0000FE",linkColor:"#2fc2ef"},{backgroundColor:"#fff",color:"#C3272A",linkColor:"#2fc2ef"},{backgroundColor:"#fff",color:"#F05924",linkColor:"#2fc2ef"},{backgroundColor:"#fff",color:"#37B64B",linkColor:"#C00"},{backgroundColor:"#fff",color:"#0201FF",linkColor:"#C00"},{backgroundColor:"#1DFF16",color:"#F4EED9",linkColor:"#C00"},{backgroundColor:"#CACFD3",color:"#343A3F",linkColor:"#C00"},{backgroundColor:"#F4EED9",color:"#1D1916",
linkColor:"#C00"},{backgroundColor:"#343A3F",color:"#CACFD3",linkColor:"#C00"},{backgroundColor:"#fff",color:"#000",linkColor:"#C00"}],languages:{"default":{name:"Default",flag:null},af:{name:"Afrikaans",flag:"sa"},sq:{name:"Albanian",flag:"al"},ar:{name:"Arabic",flag:"dz"},az:{name:"Azerbaijani",flag:"az"},eu:{name:"Basque",flag:null},bn:{name:"Bengali",flag:"bd"},be:{name:"Belarusian",flag:"by"},bg:{name:"Bulgarian",flag:"bg"},ca:{name:"Catalan",flag:"ad"},"zh-CN":{name:"Chinese Simplified",flag:"cn"},
"zh-TW":{name:"Chinese Traditional",flag:"cn"},hr:{name:"Croatian",flag:"hr"},cs:{name:"Czech",flag:"cz"},da:{name:"Danish",flag:"dk"},nl:{name:"Dutch",flag:"nl"},en:{name:"English",flag:"gb"},eo:{name:"Esperanto",flag:null},et:{name:"Estonian",flag:"ee"},tl:{name:"Filipino",flag:"ph"},fi:{name:"Finnish",flag:"fi"},fr:{name:"French",flag:"fr"},gl:{name:"Galician",flag:"gl"},ka:{name:"Georgian",flag:"ge"},de:{name:"German",flag:"de"},el:{name:"Greek",flag:"gr"},gu:{name:"Gujarati",flag:"gu"},ht:{name:"Haitian Creole",
flag:"ht"},iw:{name:"Hebrew",flag:"il"},hi:{name:"Hindi",flag:"in"},hu:{name:"Hungarian",flag:"hu"},is:{name:"Icelandic",flag:"is"},id:{name:"Indonesian",flag:"id"},ga:{name:"Irish",flag:"ie"},it:{name:"Italian",flag:"it"},ja:{name:"Japanese",flag:"jp"},kn:{name:"Kannada",flag:"id"},ko:{name:"Korean",flag:"kr"},la:{name:"Latin",flag:"va"},lv:{name:"Latvian",flag:"lv"},lt:{name:"Lithuanian",flag:"lt"},mk:{name:"Macedonian",flag:"mk"},ms:{name:"Malay",flag:"my"},mt:{name:"Maltese",flag:"mt"},no:{name:"Norwegian",
flag:"no"},fa:{name:"Persian",flag:"ir"},pl:{name:"Polish",flag:"pl"},pt:{name:"Portuguese",flag:"pt"},ro:{name:"Romanian",flag:"ro"},ru:{name:"Russian",flag:"ru"},sr:{name:"Serbian",flag:"rs"},sk:{name:"Slovak",flag:"sk"},sl:{name:"Slovenian",flag:"sk"},es:{name:"Spanish",flag:"es"},sw:{name:"Swahili",flag:"ke"},sv:{name:"Swedish",flag:"se"},ta:{name:"Tamil",flag:"in"},te:{name:"Telugu",flag:"in"},th:{name:"Thai",flag:"th"},tr:{name:"Turkish",flag:"tr"},uk:{name:"Ukrainian",flag:"ua"},ur:{name:"Urdu",
flag:"pk"},vi:{name:"Vietnamese",flag:"vn"},cy:{name:"Welsh",flag:"wales"},yi:{name:"Yiddish",flag:"ua"}}};return{setOptions:function(a){Recite.Debug.log("Recite.Controls.Mobile","Setting options");g=Recite.Util.merge(g,a)},init:function(){},localize:function(a){Recite.Debug.log("Recite.Controls.Desktop","Localizing controls: "+a)},invoke:function(a){var d=document.body,b=Recite.Dom.getStyle(a,"height");b=parseInt(b.replace("px",""),10)+10;d.style.position="absolute";d.style.paddingBottom=b+"px";
d.style.top=b+"px";d.style.width="100%";var e=Recite.Sizzle("#recite-fonts-list")[0];Recite.Util.each(g.fonts,function(a,b){a=document.createElement("li");var c=document.createTextNode(b);a.setAttribute("class","recite-font recite-preference-set");a.setAttribute("data-key","style.font.face");a.setAttribute("data-value",b);a.style.fontFamily=b;a.appendChild(c);e.appendChild(a)});var c=Recite.Sizzle("#recite-languages")[0];Recite.Util.each(g.languages,function(a,b){var d=document.createElement("li");
b=document.createTextNode(b.name);d.setAttribute("class","recite-language-set");d.setAttribute("data-language",a);d.appendChild(b);c.appendChild(d)});var l=Recite.Sizzle("#recite-swatches")[0];Recite.Util.each(g.swatches,function(a,b){a=document.createElement("div");a.setAttribute("class","recite-swatch recite-preference-set");null===b.backgroundColor&&null===b.color&&null===b.linkColor?(a.setAttribute("class",a.getAttribute("class")+" recite-swatch-default"),a.textContent="/",a.innerText="/"):(a.textContent=
"A",a.innerText="A");a.setAttribute("data-key","style.backgroundColor style.font.color style.link.color");a.setAttribute("data-value",b.backgroundColor+" "+b.color+" "+b.linkColor);a.style.setProperty("color",b.color,"important");a.style.backgroundColor=b.backgroundColor;l.appendChild(a)});a=Recite.Sizzle(".recite-dropdown-invoke",a);Recite.UI.Dropdown.invoke(a);a=Recite.Sizzle(".recite-language-set");Recite.DomEvent.add(a,"click",function(a){Recite.UI.Dropdown.hideGroup("main")});a=Recite.Sizzle(".recite-sprite-button-share-mobile")[0];
Recite.DomEvent.add(a,"click",function(a){ReciteAndroidInterface.sharePage(document.URL)});a=Recite.Sizzle(".recite-sprite-button-favourite-mobile")[0];Recite.DomEvent.add(a,"click",function(a){ReciteAndroidInterface.addToFavourites(document.URL)});var f=Recite.Sizzle(".recite-sprite-button-top-play-mobile")[0];Recite.DomEvent.add(f,"click",function(a){"stopped"===f.getAttribute("data-status")?Recite.PlayerControls.play():Recite.PlayerControls.stop()});Recite.Event.subscribe("Audio:ended",function(a,
b){h(f,"stop")});Recite.Event.subscribe("Audio:started",function(a,b){h(f,"play")})}}}();Recite.namespace("Recite.Parser.Html");
Recite.Parser.Html=function(){function h(a){!1!==e.bubbleEvents&&(a=Recite.Sizzle(".recite-ele"),Recite.DomEvent.add(a,"click",function(a){a.target.parentNode.click()}))}function g(b){var c=null;if(0<b.length){var d=0,l=!1;Recite.Util.each(b,function(a,b){d+=Recite.Dom.getText(b).trim().length;if("IMG"==b.nodeName||"INPUT"==b.nodeName||"TEXTAREA"==b.nodeName)l=!0,b.setAttribute(e.elementAttribute,"true"),c=b});if(d>=e.minCharacters&&!l){var g=!1;Recite.Util.each(Recite.Dom.getAncestors(b[0]),function(a,
d){/ui-datepicker/g.test(d.getAttribute("class"))&&3===b[0].nodeType&&(g=!0,c=b[0].parentNode,(a=b[0].parentNode.getAttribute("class"))&&(a=a.replace(" recite-ele","")),b[0].parentNode.setAttribute("class",a+" recite-ele"))});if(!g){c=a(b[0].ownerDocument);b[0].parentNode.insertBefore(c,b[0]);for(var h=0;h<b.length;h++){var p=b[h].parentNode.removeChild(b[h]);c.appendChild(p)}}}}return c}function a(a){a=a.createElement(e.wrapTag);a.className="recite-ele recite-ele-style";a.style.display="inline";
if(e.debug.highlightElements){var b=Math.floor(256*Math.random()),c=Math.floor(256*Math.random()),d=Math.floor(256*Math.random());try{a.style.backgroundColor="rgba("+b+","+c+","+d+",0.4)"}catch(n){a.style.backgroundColor="rgb("+b+","+c+","+d+")"}}return a}function d(a){var b=[],c=[];Recite.Util.each(e.concatenateElementExceptions,function(a,c){b.push(c.toLowerCase())});Recite.Util.each(e.concatenateTypes,function(a,b){c.push(b.toLowerCase())});Recite.Util.each(e.skipConcatenation.elementTypes,function(a,
c){b.push(c.toLowerCase())});var d=0<=Recite.Util.inArray(Recite.Dom.getStyle(a,"display"),c),l=0<=Recite.Util.inArray(a.tagName.toLowerCase(),b),g=!1;Recite.Util.each(e.skipConcatenation.selectors,function(b,c){b=Recite.Sizzle(c);Recite.Util.each(b,function(b,c){c==a&&(g=!0)})});return d&&!l&&!g}function b(a,f,g){"undefined"===typeof g&&(g=[[]]);var l=!1,k=!1;if(1===a.nodeType&&/recite-ele/g.test(a.getAttribute("class")))return g;if(a){a.shadowRoot&&1==Recite.getOptions("shadowDomSupport")&&(b(a.shadowRoot,
1,g),a.setAttribute("data-recite-shadow","true"));if(1===a.nodeType&&(0<=Recite.Util.inArray(a.tagName,e.skipElements)||"true"===a.getAttribute("data-recite-skip"))||1===a.nodeType&&0<c.length&&"BR"===a.tagName&&"BR"===c[c.length-1].tagName)return g;3===a.nodeType&&Recite.Dom.getText(a).replace(/^\s*/,"").replace(/\s*$/,"");if(1===a.nodeType){var h;if(h=d(a)){a:{if(1===a.nodeType){h=a.getElementsByTagName("*");for(var p=0;p<h.length;p++)if("block"===Recite.Dom.getStyle(h[p],"display")){h=!0;break a}}h=
!1}h=!h}if(h||"INPUT"==a.nodeName||"TEXTAREA"==a.nodeName&&"true"!==a.getAttribute("data-recite-skip"))l=!0}else 3===a.nodeType&&(l=!0);!0===l&&(c[c.length-1]!==a.previousSibling&&(g.push(c),c=[]),c.push(a),k=!0);l=0;h=a.childNodes[l];if(!k)for(;h;)b(h,f+1,g),l++,h=a.childNodes[l]}return g}var e={maxCharacters:1E3,minCharacters:1,wrapTag:"recite",elementAttribute:"data-recite-ele",concatenateTypes:["inline","inline-block"],skipConcatenation:{elementTypes:["li","img","label"],selectors:[]},skipElements:"SCRIPT STYLE SELECT OPTION FRAMESET FRAME IFRAME NOSCRIPT".split(" "),
parseImgAltAttribute:!0,bubbleEvents:!1,bubbleStyles:!0,debug:{highlightElements:!1},concatenateElementExceptions:["li"]},c=[];return{setOptions:function(a){Recite.Debug.log("Recite.Parser.Html","Setting options");e=Recite.Util.merge(e,a)},parse:function(a){var d=new Date,e=b(a,1);a=Recite.Sizzle("img");Recite.Util.each(a,function(a,b){"true"!==b.getAttribute("data-recite-skip")&&e.push([b])});0<c.length&&e.push(c);0===e[e.length-1].length&&e.pop();var l=[];Recite.Util.each(e,function(a,b){0!==b.length&&
(a=g(b),null!==a&&l.push(a))});Recite.Debug.log("Recite.Parser.Html","Parsed "+l.length+" elements in: "+((new Date).getTime()-d.getTime())+"ms");h(l);Recite.Event.publish("Recite.Parser:parsed");d=document.getElementsByTagName("*");a=0;for(var n=d.length;a<n;a++)Recite.Style.getOptions().preserve_background_images&&""!=d[a].style.backgroundImage&&d[a].setAttribute("class",d[a].getAttribute("class")+" recite-ignore-styles-background ");return l},wrapElements:function(a){Recite.Util.each(a,function(a,
b){g(b)})}}}();Recite.namespace("Recite.Parser.Selector");
Recite.Parser.Selector=function(){var h={maxCharacters:1E3,minCharacters:1,selector:".recite"};return{setOptions:function(g){Recite.Debug.log("Recite.Parser.Selector","Setting options");h=Recite.Util.merge(h,g)},parse:function(g){Recite.Debug.log("Recite.Parser.Selector","Parser invoked on element:",g);var a=Recite.Sizzle(h.selector,g);Recite.Util.each(a,function(d,b){b=Recite.Dom.getText(b);(b.length<h.minCharacters||b.length>h.maxCharacters)&&a.splice(d)});return a}}}();Recite.namespace("PlayerControls");
Recite.PlayerControls=function(){function h(){null===a.provider?a.enableMobileControls&&Recite.Browser.isMobile()?a.provider=Recite.PlayerControls.Fixed:a.provider=Recite.PlayerControls.Tooltip:"none"===a.provider?a.provider=Recite.PlayerControls.NoGUI:"disable"===a.provider&&(a.provider=null);null!=a.provider&&a.provider.init&&a.provider.init()}function g(){Recite.Preferences.get("playerControls.enabled")?Recite.PlayerControls.enable():Recite.PlayerControls.disable()}var a={provider:null,enableMobileControls:!0,
minSkipTime:300},d=null;Recite.Event.subscribe("Recite.Dom.Observor:change",function(a,d){void 0!=d&&d.hasOwnProperty("affectedElements")&&Recite.PlayerControls.invoke(d.affectedElements)});Recite.Event.subscribe("Recite:load",h);Recite.Event.subscribe("Preferences:load",g);Recite.Event.subscribe("Preferences:set",g);Recite.Event.subscribe("Preferences:reset",g);return{init:h,setOptions:function(b){b.provider&&a.provider&&a.provider.destroy();a=Recite.Util.merge(a,b);Recite.PlayerControls.Tooltip.setOptions(b.Tooltip);
Recite.PlayerControls.Fixed.setOptions(b.Fixed);Recite.PlayerControls.NoGUI.setOptions(b.NoGUI);b.provider&&b.provider.init&&a.provider.init()},invoke:function(b){null!=a.provider&&a.provider.invoke(b)},enable:function(){null!=a.provider&&a.provider.enable()},disable:function(){null!=a.provider&&a.provider.disable()},hide:function(){null!=a.provider&&a.provider.hide()},invalidate:function(){null!=a.provider&&a.provider.invalidate()},getControls:function(){return null!=a.provider?a.provider.getControls():
null},getProvider:function(){return a.provider},play:function(){Recite.Debug.log("Recite.PlayerControls PLAY",document.activeElement);return null!=a.provider?document.activeElement!==document.body?a.provider.play(document.activeElement):a.provider.play():null},stop:function(){return null!=a.provider?a.provider.stop():null},next:function(b){var e=Math.floor(Date.now());window.clearTimeout(null);if(null==d||e-d>a.minSkipTime)return Recite.Debug.log("Recite.PlayerControls","next"),Recite.FrameUpdater.isActive()&&
Recite.FrameUpdater.hasActiveChildFrame()?(Recite.FrameUpdater.activeFramePlayNext(),null):null!=a.provider?(b=a.provider.next(b),d=e,b):null;Recite.Debug.log("Recite.PlayerControls","Skipping too fast, halting")},previous:function(b){var e=Math.floor(Date.now());window.clearTimeout(null);if(null==d||e-d>a.minSkipTime)return Recite.Debug.log("Recite.PlayerControls","prev"),Recite.FrameUpdater.isActive()&&Recite.FrameUpdater.hasActiveChildFrame()?(Recite.FrameUpdater.activeFramePlayPrev(),null):null!=
a.provider?(b=a.provider.previous(b),d=e,b):null;Recite.Debug.log("Recite.PlayerControls","Skipping too fast, halting")},first:function(){var b=Math.floor(Date.now());window.clearTimeout(null);if(null==d||b-d>a.minSkipTime)return d=b,Recite.Debug.log("Recite.PlayerControls","first"),null!=a.provider?a.provider.first():null;Recite.Debug.log("Recite.PlayerControls","Skipping too fast, halting")},last:function(){var b=Math.floor(Date.now());window.clearTimeout(null);if(null==d||b-d>a.minSkipTime)return d=
b,Recite.Debug.log("Recite.PlayerControls","last"),null!=a.provider?a.provider.last():null;Recite.Debug.log("Recite.PlayerControls","Skipping too fast, halting")}}}();Recite.namespace("PlayerControls.Tooltip");
Recite.PlayerControls.Tooltip=function(){function h(a){Recite.Util.each(n,function(b,c){Recite.Dom.isDescendant(a.target,c)||a.target===c||Recite.Dom.isDescendant(a.target,q)||a.target===q||Recite.Dom.isDescendant(a.target,Recite.Sizzle("#recite-header")[0])||e(c)})}function g(){Recite.Event.unsubscribe(w);Recite.Util.each([window],function(a,b){Recite.DomEvent.remove(b,"resize",r);Recite.DomEvent.remove(b,"scroll",x);Recite.DomEvent.remove(b,"click",h)})}function a(a){if(k){clearTimeout(f.timeout);
var b=this;q!==this&&(f.timeout=setTimeout(function(){d(b)},f.intent))}}function d(a){null!==a&&(null!==q&&(null!=q.getAttribute("class")&&q.setAttribute("class",q.getAttribute("class").replace("recite-selected","")),Recite.Event.publish("Recite.Tooltip:hide",{target:q})),q=a,l(a),q.setAttribute("class",q.getAttribute("class")+" recite-selected"),Recite.Event.publish("Recite.Tooltip:show",{target:q}),Recite.Preferences.get("player.autoplay")&&Recite.PlayerControls.Tooltip.play())}function b(){Recite.Debug.log("Recite.Tooltip",
"Binding buttons for tooltip");var a=m.getElementById("recite-play");Recite.DomEvent.add(a,"click",function(a){Recite.PlayerControls.Tooltip.play()});a=m.getElementById("recite-stop");Recite.DomEvent.add(a,"click",function(a){Recite.Player.stop()});a=m.getElementById("recite-back");Recite.DomEvent.add(a,"click",function(a){Recite.Player.rewind()});a=m.getElementById("recite-forward");Recite.DomEvent.add(a,"click",function(a){Recite.Player.forward()})}function e(a){a.style.display="none";null!==q&&
(null!=q.getAttribute("class")&&q.setAttribute("class",q.getAttribute("class").replace("recite-selected","")),Recite.Event.publish("Recite.Tooltip:hide",{target:q}));q=null}function c(a){return a.style&&a.style.transform?a.style.transform:"HTML"!=a.nodeName&&a.parentNode?c(a.parentNode):""}function l(a){a&&q&&a===q&&Recite.PlayerControls.getProvider().current&&Recite.PlayerControls.getProvider().current!==a&&(a=Recite.PlayerControls.getProvider().current);var d=Recite.Sizzle("#recite-tooltip",m)[0];
"undefined"===typeof d&&(Recite.Debug.log("Recite.Tooltip","Adding tooltip to document"),d=m.createElement("div"),d.setAttribute("class","recite-tooltip small"),d.setAttribute("id","recite-tooltip"),d.style.position="absolute",d.innerHTML='<div class="recite-tooltip-content">'+f.content+'</div>                         <div class="recite-sprite-tip-bottomleft" id="recite-tip"></div>',Recite.Sizzle("body",m)[0].appendChild(d),Recite.getOptions(),!1!==Recite.Controls.Desktop.getOptions().showLogo&&!1!==
Recite.getOptions("showBrand")&&!1===Recite.Controls.Desktop.getOptions().customLogo&&(document.getElementById("recite-tooltip-logo").setAttribute("class","recite-sprite-tooltip-logo"),d.setAttribute("class","recite-tooltip")),b(m),n.push(d));var e=d;e.style.display="block";for(var g=0;g<n.length;g++)n[g]!==e&&(n[g].style.display="none");var l=m.body,k=Recite.Dom.getPosition(a);g=Recite.Dom.getScroll(a.ownerDocument.defaultView);var h=k.top-e.offsetHeight-f.adjust.y,p=k.left+("right"==f.position?
a.offsetWidth:0);d="recite-sprite-tip-bottom-left";var v=h-g.y-f.adjust.y,r=p+e.offsetWidth-g.x;e.style.position="absolute";var x=Recite.Dom.getAncestors(a);for(g=0;g<x.length;g++)"fixed"===Recite.Dom.getStyle(x[g],"position")&&(e.style.position="fixed",v=h-f.adjust.y);v<f.protect.top-f.adjust.y?(h=k.top+a.offsetHeight+f.adjust.y,d="recite-sprite-tip-top-left",r>l.clientWidth-f.protect.right&&(p=k.left-e.offsetWidth+f.adjust.x,d="recite-sprite-tip-top-right")):r>l.clientWidth&&(p=k.left-e.offsetWidth+
f.adjust.x,d="recite-sprite-tip-bottom-right");e.style.top=h+"px";e.style.left=p+"px";a&&(e.style.transform=c(a));a=m.getElementById("recite-tip");a.setAttribute("class",d);a.setAttribute("className",d)}var f={dimensions:{height:0},adjust:{x:0,y:15},protect:{top:40,right:0,bottom:0,left:0},position:"left",intent:500,timeout:null,content:'<div id="recite-tooltip-logo" data-recite-skip="true"></div>            <a id="recite-play" class= "recite-sprite-tooltip-btn recite-sprite-tooltip-play" ></a>            <a id="recite-stop" class="recite-sprite-tooltip-btn recite-sprite-tooltip-stop"></a>            <a id="recite-back" class="recite-sprite-tooltip-btn recite-sprite-tooltip-back"></a>            <a id="recite-forward" class="recite-sprite-tooltip-btn recite-sprite-tooltip-forward"></a>'},
k=!0,m,n=[],q=null,p=!1,w=null,r;var x=r=function(){q&&l(q)};return{init:function(){if(!p){w=Recite.Event.subscribe("Style:updated",Recite.PlayerControls.Tooltip.invalidate);for(var a=[window],b=0;b<a.length;b++)Recite.DomEvent.add(a[b],"resize",r),Recite.DomEvent.add(a[b],"scroll",x),Recite.DomEvent.add(a[b],"click",h);p=!0}},destroy:function(){g();p=!1},enable:function(){k=!0},disable:function(){k=!1;Recite.Util.each(n,function(a,b){e(b)})},hide:function(){Recite.Util.each(n,function(a,b){e(b)})},
setOptions:function(a){f=Recite.Util.merge(f,a)},getOptions:function(){return f},invoke:function(b){this.init();m=b.ownerDocument?b.ownerDocument:document;Recite.DomEvent.add(b,"mouseover",a);Recite.DomEvent.add(b,"mouseout",function(a){clearTimeout(f.timeout)})},invalidate:function(){q&&l(q)},play:function(a){a?(Recite.PlayerDispatcher.dispatch(a),d(a)):null===q?Recite.PlayerControls.next():Recite.PlayerDispatcher.dispatch(q)},stop:function(){Recite.Player.stop()},seekingSupported:function(){return!0},
next:function(a){"undefined"!=typeof a&&(q=a);a=Recite.Dom.getNextElement(q);if(a===q||null==a)return Recite.Debug.log("Recite.PlayerControls.Tooltip","next element same as current or null, halting"),null;d(a);Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a);return a},previous:function(a){"undefined"!=typeof a&&(q=a);a=Recite.Dom.getPreviousElement(q);if(a===q||null==a)return Recite.Debug.log("Recite.PlayerControls.Tooltip","prev element same as current or null, halting"),null;d(a);Recite.Dom.isVisible(a)||
Recite.Dom.scrollTo(a);return a},first:function(){var a=Recite.Dom.getFirstElement();if(null!=a)d(a);else return Recite.Debug.log("Recite.PlayerControls.Tooltip","no first element, halting"),null;Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a)},last:function(){var a=Recite.Dom.getLastElement();if(null!=a)d(a);else return Recite.Debug.log("Recite.PlayerControls.Tooltip","no last element, halting"),null;Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a)},setCurrent:function(a){q=a},current:q}}();Recite.namespace("PlayerControls.Fixed");
Recite.PlayerControls.Fixed=function(){function h(){p=Recite.Event.subscribe("Style:updated",Recite.PlayerControls.Tooltip.invalidate);for(var a=[window],b=0;b<a.length;b++)Recite.DomEvent.add(a[b],"resize",w),Recite.DomEvent.add(a[b],"scroll",r),Recite.DomEvent.add(a[b],"click",x)}function g(){Recite.Event.unsubscribe(p);Recite.Util.each([window],function(a,b){Recite.DomEvent.remove(b,"resize",w);Recite.DomEvent.remove(b,"scroll",r);Recite.DomEvent.remove(b,"click",x)})}function a(a){if(f){clearTimeout(l.timeout);
var b=this;n!==this&&(l.timeout=setTimeout(function(){d(b)},l.intent))}}function d(a){null!==n&&null!=n.getAttribute("class")&&n.setAttribute("class",n.getAttribute("class").replace("recite-selected",""));n=a;c(a);Recite.Preferences.get("player.autoplay")&&Recite.PlayerDispatcher.dispatch(n);n.setAttribute("class",n.getAttribute("class")+" recite-selected")}function b(){Recite.Debug.log("Recite.PlayerControls.Fixed","Binding buttons for fixed controls");var a=k.getElementById("recite-play");Recite.DomEvent.add(a,
"click",function(a){Recite.PlayerDispatcher.dispatch(n)});a=k.getElementById("recite-stop");Recite.DomEvent.add(a,"click",function(a){Recite.Player.stop()});a=k.getElementById("recite-back");Recite.DomEvent.add(a,"click",function(a){Recite.PlayerControls.previous()});a=k.getElementById("recite-forward");Recite.DomEvent.add(a,"click",function(a){Recite.PlayerControls.next()})}function e(a){a.style.display="none";null!==n&&null!=n.getAttribute("class")&&n.setAttribute("class",n.getAttribute("class").replace("recite-selected",
""));Recite.Sizzle("body",document)[0].style.paddingBottom="0px";n=null}function c(a){a=Recite.Sizzle("#recite-tooltip",k)[0];"undefined"===typeof a&&(Recite.Debug.log("Recite.PlayerControls.Fixed","Adding fixed controls to document"),a=k.createElement("div"),a.setAttribute("class","recite-tooltip-fixed"),a.setAttribute("id","recite-tooltip"),a.style.position="absolute",a.innerHTML='<div class="recite-tooltip-content">'+l.content+'</div>               <div class="recite-tip-bottomleft" id="recite-tip"></div>',
Recite.Sizzle("body",k)[0].appendChild(a),b(k),m.push(a));Recite.Debug.log("Recite.PlayerControls.Fixed","Fixed controls added to document: "+a);a.style.display="block";a.style.position="fixed";for(var c=0;c<m.length;c++)m[c]!==a&&(m[c].style.display="none");Recite.Sizzle("body",document)[0].style.paddingBottom=l.dimensions.height+"px"}var l={dimensions:{height:98},intent:500,timeout:null,content:'<a id="recite-back" class="recite-sprite-mobile-previous" onclick="Recite.PlayerControls.previous();"></a>                   <a id="recite-play" class="recite-sprite-mobile-play"></a>                   <a id="recite-stop" class="recite-sprite-mobile-stop"></a>                   <a id="recite-forward" class="recite-sprite-mobile-next" onclick="Recite.PlayerControls.next();"></a>'},
f=!0,k,m=[],n=null,q=!1,p=null,w;var r=w=function(){n&&c(n)};var x=function(a){Recite.Util.each(m,function(b,c){Recite.Dom.isDescendant(a.target,c)||a.target===c||Recite.Dom.isDescendant(a.target,n)||a.target===n||Recite.Dom.isDescendant(a.target,Recite.Sizzle("#recite-header")[0])||e(c)})};return{init:function(){q||(h(),q=!0)},destroy:function(){g();q=!1},enable:function(){f||h();f=!0},disable:function(){f&&g();f=!1},hide:function(){Recite.Util.each(m,function(a,b){e(b)})},setOptions:function(a){l=
Recite.Util.merge(l,a)},getOptions:function(){return l},invoke:function(b){Recite.Debug.log("Recite.Tooltop.Desktop","Invoking fixed playerControls");k=b.ownerDocument?b.ownerDocument:document;Recite.DomEvent.add(b,"mouseover",a);Recite.DomEvent.add(b,"mouseout",function(a){clearTimeout(l.timeout)})},invalidate:function(){n&&c(n)},seekingSupported:function(){return!0},play:function(a){a?(Recite.PlayerDispatcher.dispatch(a),d(a)):null===n?Recite.PlayerControls.next():Recite.PlayerDispatcher.dispatch(n)},
stop:function(){Recite.Player.stop()},next:function(a){"undefined"!=typeof a&&(n=a);a=Recite.Dom.getNextElement(n);a===n||null===a?Recite.Debug.log("Recite.PlayerControls.Fixed","next element same as current or null, halting"):(d(a),Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a))},previous:function(a){"undefined"!=typeof a&&(n=a);a=Recite.Dom.getPreviousElement(n);a===n||null===a?Recite.Debug.log("Recite.PlayerControls.Fixed","prev element same as current or null, halting"):(d(a),Recite.Dom.isVisible(a)||
Recite.Dom.scrollTo(a))},first:function(){var a=Recite.Dom.getFirstElement();if(null!=a)d(a);else return Recite.Debug.log("Recite.PlayerControls.Fixed","no first element, halting"),null;Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a)},last:function(){var a=Recite.Dom.getLastElement();if(null!=a)d(a);else return Recite.Debug.log("Recite.PlayerControls.Fixed","no last element, halting"),null;Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a)},current:n}}();Recite.namespace("PlayerControls.NoGUI");
Recite.PlayerControls.NoGUI=function(){function h(a){null!==a&&(null!==b&&null!=b.getAttribute("class")&&b.setAttribute("class",b.getAttribute("class").replace("recite-selected","")),b=a,b.setAttribute("class",b.getAttribute("class")+" recite-selected"),Recite.Preferences.get("player.autoplay")&&Recite.PlayerControls.NoGUI.play())}function g(c){if(d){clearTimeout(a.timeout);var e=this;b!==this&&(a.timeout=setTimeout(function(){h(e)},a.intent))}}var a={timeout:null,dimensions:{height:0}},d=!0,b=null,
e=!1;return{init:function(){e||(Recite.Event.subscribe("Style:updated",Recite.PlayerControls.Tooltip.invalidate),e=!0)},destroy:function(){e=!1},enable:function(){d=!0},disable:function(){d=!1},hide:function(){null!==b&&(null!=b.getAttribute("class")&&b.setAttribute("class",b.getAttribute("class").replace("recite-selected","")),Recite.Event.publish("Recite.Tooltip:hide",{target:b}));b=null},setOptions:function(b){a=Recite.Util.merge(a,b)},getOptions:function(){return a},invoke:function(b){this.init();
Recite.Debug.log("Recite.PlayerControls.NoGUI","Invoking NoGUI controls.");Recite.DomEvent.add(b,"mouseover",g);Recite.DomEvent.add(b,"mouseout",function(b){clearTimeout(a.timeout)})},invalidate:function(){},play:function(a){a?(Recite.PlayerDispatcher.dispatch(a),h(a)):null===b?Recite.PlayerControls.next():Recite.PlayerDispatcher.dispatch(b)},stop:function(){Recite.Player.stop()},seekingSupported:function(){return!0},next:function(a){"undefined"!=typeof a&&(b=a);a=Recite.Dom.getNextElement(b);a===
b||null===a?Recite.Debug.log("Recite.PlayerControls.NoGUI","next element same as current or null, halting"):h(a)},previous:function(a){"undefined"!=typeof a&&(b=a);a=Recite.Dom.getPreviousElement(b);a===b||null===a?Recite.Debug.log("Recite.PlayerControls.NoGUI","prev element same as current or null, halting"):h(a)},first:function(){var a=Recite.Dom.getFirstElement();if(null!=a)h(a);else return Recite.Debug.log("Recite.PlayerControls.NoGUI","no first element, halting"),null},last:function(){var a=
Recite.Dom.getLastElement();if(null!=a)h(a);else return Recite.Debug.log("Recite.PlayerControls.NoGUI","no last element, halting"),null},current:b}}();Recite.namespace("PlayerControls.MobileControls");
Recite.PlayerControls.MobileControls=function(){function h(){x=Recite.Event.subscribe("Style:updated",Recite.PlayerControls.Tooltip.invalidate);for(var a=[window],b=0;b<a.length;b++)Recite.DomEvent.add(a[b],"resize",A),Recite.DomEvent.add(a[b],"scroll",z),Recite.DomEvent.add(a[b],"click",C)}function g(){Recite.Event.unsubscribe(x);Recite.Util.each([window],function(a,b){Recite.DomEvent.remove(b,"resize",A);Recite.DomEvent.remove(b,"scroll",z);Recite.DomEvent.remove(b,"click",C)})}function a(a){if(m)if(w)w=
!1;else{Recite.Player.prepare();clearTimeout(k.timeout);var b=this;p!==this&&(k.timeout=setTimeout(function(){d(b)},k.intent))}}function d(a){null!==p&&null!=p.getAttribute("class")&&p.setAttribute("class",p.getAttribute("class").replace("recite-selected",""));p=a;f(a);Recite.Preferences.get("player.autoplay")&&(Recite.Debug.log("Recite.MobileControls","Playing audio..."),Recite.PlayerDispatcher.dispatch(p));p.setAttribute("class",p.getAttribute("class")+" recite-selected")}function b(){Recite.Debug.log("Recite.PlayerControls.MobileControls",
"Binding buttons for mobile controls");var a=n.getElementById("recite-play");Recite.DomEvent.add(a,"click",function(a){n.getElementById("recite-play");v?(c(),Recite.Player.stop(),v=!1):(l(),Recite.PlayerDispatcher.dispatch(p),v=!0)});a=n.getElementById("recite-back");Recite.DomEvent.add(a,"click",function(a){Recite.PlayerControls.Mobile.previous()});a=n.getElementById("recite-forward");Recite.DomEvent.add(a,"click",function(a){Recite.PlayerControls.next()})}function e(a){a.style.display="none";null!==
p&&null!=p.getAttribute("class")&&p.setAttribute("class",p.getAttribute("class").replace("recite-selected",""));Recite.Sizzle("body",document)[0].style.paddingBottom="0px";p=null}function c(){n.getElementById("recite-play").setAttribute("class","recite-sprite-mobile-play")}function l(){n.getElementById("recite-play").setAttribute("class","recite-sprite-mobile-stop")}function f(a){a=Recite.Sizzle("#recite-tooltip",n)[0];"undefined"===typeof a&&(Recite.Debug.log("Recite.PlayerControls.MobileControls",
"Adding mobile controls to document"),a=n.createElement("div"),a.setAttribute("class","recite-tooltip-mobile"),a.setAttribute("id","recite-tooltip"),a.style.position="absolute",a.innerHTML='<div class="recite-tooltip-content">'+k.content+'</div>               <div class="recite-tip-bottomleft" id="recite-tip"></div>',Recite.Sizzle("body",n)[0].appendChild(a),b(n),q.push(a));Recite.Debug.log("Recite.PlayerControls.MobileControls","Mobile controls added to document: "+a);a.style.display="block";a.style.position=
"mobile";for(var c=0;c<q.length;c++)q[c]!==a&&(q[c].style.display="none");Recite.Sizzle("body",document)[0].style.paddingBottom=k.dimensions.height+"px"}var k={dimensions:{height:58},intent:500,timeout:null,content:'<a id="recite-back" class="recite-sprite-mobile-previous" onclick="Recite.PlayerControls.previous();"></a>                   <a id="recite-play" class="recite-sprite-mobile-play"></a>                   <a id="recite-forward" class="recite-sprite-mobile-next" onclick="Recite.PlayerControls.next();"></a>'},
m=!0,n,q=[],p=null,w=!1,r=!1,x=null,v=!1,A;var z=A=function(){p&&f(p)};var C=function(a){Recite.Util.each(q,function(b,c){Recite.Dom.isDescendant(a.target,c)||a.target===c||Recite.Dom.isDescendant(a.target,p)||a.target===p||Recite.Dom.isDescendant(a.target,Recite.Sizzle("#recite-header")[0])||e(c)})};return{init:function(){r||(h(),r=!0)},destroy:function(){g();r=!1},enable:function(){m||h();m=!0},disable:function(){m&&g();m=!1},hide:function(){Recite.Util.each(q,function(a,b){e(b)})},setOptions:function(a){k=
Recite.Util.merge(k,a)},getOptions:function(){return k},invoke:function(b){Recite.Debug.log("Recite.Tooltop.Desktop","Invoking mobile playerControls");n=b.ownerDocument?b.ownerDocument:document;Recite.DomEvent.add(b,"touchmove",function(){w=!0});Recite.DomEvent.add(b,"click",a);Recite.Event.subscribe("Audio:started",function(){v=!0;l()});Recite.Event.subscribe("Audio:ended",function(){c()})},invalidate:function(){p&&f(p)},seekingSupported:function(){return!0},play:function(a){a?(Recite.PlayerDispatcher.dispatch(a),
d(a)):null===p?Recite.PlayerControls.next():Recite.PlayerDispatcher.dispatch(p)},stop:function(){Recite.Player.stop()},next:function(a){"undefined"!=typeof a&&(p=a);a=Recite.Dom.getNextElement(p);a===p||null===a?Recite.Debug.log("Recite.PlayerControls.MobileControls","next element same as current or null, halting"):(d(a),Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a))},previous:function(a){"undefined"!=typeof a&&(p=a);a=Recite.Dom.getPreviousElement(p);a===p||null===a?Recite.Debug.log("Recite.PlayerControls.MobileControls",
"prev element same as current or null, halting"):(d(a),Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a))},first:function(){var a=Recite.Dom.getFirstElement();if(null!=a)d(a);else return Recite.Debug.log("Recite.PlayerControls.MobileControls","no first element, halting"),null;Recite.Dom.isVisible(a)||Recite.Dom.scrollTo(a)},last:function(){var a=Recite.Dom.getLastElement();if(null!=a)d(a);else return Recite.Debug.log("Recite.PlayerControls.MobileControls","no last element, halting"),null;Recite.Dom.isVisible(a)||
Recite.Dom.scrollTo(a)},current:p}}();Recite.namespace("PlayerDispatcher");
Recite.PlayerDispatcher=function(){function h(a){if("A"===a.tagName&&!a.getAttribute("href")||"IMG"===a.tagName&&!a.getAttribute("alt"))return e[d.readElements.SPAN];if("LABEL"===a.tagName){var b=a.getAttribute("for");if(b&&(b=document.getElementById(b))&&b.checked)return e.checked}return e[d.readElements[a.tagName]]}function g(a,b){b=void 0===b?"":b;if("undefined"==typeof a)return"";var c=h(a);if(c){var d="";c.translated?d=c.translated:c["default"]&&(d=c["default"]);b+=d+": "}if(!b){d=Recite.Dom.getAncestors(a);
for(var f=0;f<d.length;f++)if(c=h(d[f])){d="";c.translated?d=c.translated:c["default"]&&(d=c["default"]);b+=d+": ";break}}a.nodeType===Node.TEXT_NODE?b+=Recite.Dom.getText(a)+" ":"IMG"===a.tagName&&a.getAttribute("alt")?b+=a.getAttribute("alt")+" ":"INPUT"!==a.tagName&&"TEXTAREA"!==a.tagName||""!=a.value||(c=a.getAttribute("placeholder"))&&(b+=c+" ");if(a.childNodes)for(f=0;f<a.childNodes.length;f++)b=g(a.childNodes[f],b);return b}function a(a,c){var d=null,f=null;"string"===typeof a?d=a:(d=g(a),
f=a.getAttribute("data-recite-voice")||null);try{if(d&&0<d.length&&(Recite.Player.play(d,c,f),Recite.getOptions().autoCache&&"string"!==typeof a)){var e=Recite.Dom.getNextElement(a,!0);e!==a&&null!=e&&setTimeout(function(){b===a&&Recite.Player.cache(g(e),c,f)},500)}}catch(q){if(q instanceof Recite.Player.PlayerException)switch(q.code){case 400:Recite.Gui.Notification.show("This language is not supported by Recite",{play:!0})}}}var d={readElements:{A:"link",IMG:"image"}},b=null,e={link:{"default":"link",
translated:!1},image:{"default":"image",translated:!1},checked:{"default":"selected",translated:!1}},c="en";Recite.Event.subscribe("Translate:begin",function(a,b){a=b["lang:"];if(a!=c){c=a;b=[];for(var d in e)b.push(e[d]["default"]);Recite.Api.call("translate","POST",{data:{target:a,source:"en",text:b},contentType:"application/json",success:function(a){var b=0,c;for(c in e)e[c].translated=a[b++]}})}});Recite.Event.subscribe("Translate:restore_begin",function(){c="en";for(var a in e)e[a].translated=
!1});return{setOptions:function(a){d=Recite.Util.merge(d,a)},dispatch:function(c){(null===Recite.Player.getPlayer()||Recite.Player.getPlayer().getOptions().prepareAudio)&&Recite.Player.prepare();var d=null,e=null;"string"===typeof c?d=c:(e=Recite.Dom.getLanguage(c),b=c,d=Recite.Dom.getText(c));var g=Recite.Player.getOptions().languageDetection;2===g||null===e&&1<=g?e=Recite.Dom.detectLanguage(d,function(b){"und"===b&&(b=null);a(c,b)}):a(c,e)}}}();Recite.namespace("Player");
Recite.Player=function(){function h(){if(a)return a;var b=Recite.Audio.AEBroker.init();b?a=b:alert("Sorry, Recite requires either an HTML5 compatible browser or Flash support. Please upgrade your browser or install Flash to use Recite.");return a}function g(b,e,c,g,f){e=e||d.language;if(!Recite.Player.languageSupported(e))throw Recite.Debug.log("Recite.Player","Language not supported:"+e),new Recite.Player.PlayerException(400,"Unsupported Language");var k=h().format();c={q:b,f:k};null!==e&&(c.l=e);
var l=Recite.Preferences.get("voice.gender");c.g=l;(l=Recite.Preferences.get("player.playbackSpeed"))||(l=1);c.s=l;Recite.Debug.log("Recite.Player","Audio request: "+b);0>b.length&&!g.cache?(Recite.Debug.log("Recite.Player","GET Request"),Recite.Api.getUri("tts",{authRequired:!0,data:c,success:function(a){Recite.Debug.log("Recite.Player","Request url: "+a);f&&f(a)}})):(Recite.Debug.log("Recite.Player","POST Request"),a.getOptions().playlist||(c.playlist=!1),a.getOptions().waitForAudioProcessing&&
(c.waitForProcessing=!0),Recite.Api.call("tts","POST",{data:c,contentType:"application/json; charset=UTF-8",success:function(a){var b=a.data;Recite.Auth.getStatus(function(a){g.cache&&f.call();var c=[];Recite.Debug.log("Recite.Player","POST Callback");void 0!==b.id?(Recite.Debug.log("Recite.Player","Playing single file"),b.url=Recite.baseUrl+"/api/tts/"+b.id+"?f="+k+"&access_token="+a.access_token,c.push(b)):(Recite.Debug.log("Recite.Player","Playing multiple files - create a playlist"),Recite.Util.each(b,
function(b,d){d.url=Recite.baseUrl+"/api/tts/"+d.id+"?f="+k+"&access_token="+a.access_token;Recite.Debug.log("Recite.Player","Adding to playlist: "+d.url);c.push(d);Recite.Debug.log("Recite.Player","Added to playlist: "+d.url)}));f&&(Recite.Debug.log("Recite.Player","Calling callback with playlist"),f(c))})}}));Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Player",event:"play ("+e+")"})}var a=null,d={language:null,voices:{},languages:["cy","cy-gb","en","en-gb","en-us","en-in","en-au","fr","fr-fr","fr-ca","cn","da","nl","de","de-de","hi","is","it","ja","ko","no","pl","pl-pl","pt-br","pt","ro","ru","es","es-es","es-mx","es-us","sv","tr","cy","cy-gb","en","en-gb","en-us","en-in","en-au","fr","fr-fr","fr-ca","cn","da","nl","de","de-de","hi","is","it","ja","ko","no","pl","pl-pl","pt-br","pt","ro","ru","es","es-es","es-mx","es-us","sv","tr","cy","cy-gb","en","en-gb","en-us","en-in","en-au","fr","fr-fr","fr-ca","cn","da","nl","de","de-de","hi","is","it","ja","ko","no","pl","pl-pl","pt-br","pt","ro","ru","es","es-es","es-mx","es-us","sv","tr","ar-ae","ar","zh-cn","zh-tw","cs","el","fi","sk","hu","hu-hu","id","ta","ar-ae","ar","zh-cn","zh-tw","cs","el","fi","sk","hu","hu-hu","id","ta","ar-ae","ar","zh-cn","zh-tw","cs","el","fi","sk","hu","hu-hu","id","ta","ar-ae","ar","zh-cn","zh-tw","cs","el","fi","sk","hu","hu-hu","id","ta","ar-ae","ar","zh-cn","zh-tw","cs","el","fi","sk","hu","hu-hu","id","ta","ar-ae","ar","zh-cn","zh-tw","cs","el","fi","sk","hu","hu-hu","id","ta","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","ar-ae","ar","zh-cn","zh-tw","cs","el","fi","sk","hu","hu-hu","id","ta","ar-ae","ar","zh-cn","zh-tw","cs","el","fi","sk","hu","hu-hu","id","ta","ar-ae","ar","zh-cn","zh-tw","cs","el","fi","sk","hu","hu-hu","id","ta","ar-ae","ar","zh-cn","zh-tw","cs","el","fi","sk","hu","hu-hu","id","ta","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","en","EN-US","en-us","en-gb","en-sc","en-au","ar-ae","ar","tr","it","ko","zh-CN","zh-TW","th","ja","id","eu","ca","cs","da","nl","fi","fr","fr-fr","de","el","hi","hu","no","pl","pt","ro","ru","sk","es","sv","gl","iw","ar-ae","ar","zh-cn","zh-tw","cs","el","fi","sk","hu","hu-hu","id","ta","ar-ae","ar","zh-cn","zh-tw","cs","el","fi","sk","hu","hu-hu","id","ta","gd","ga","ga-ga","gd","ga","ga-ga","gd","ga","ga-ga","cy","cy-gb","en","en-gb","en-us","en-in","en-au","fr","fr-fr","fr-ca","cn","da","nl","de","de-de","hi","is","it","ja","ko","no","pl","pl-pl","pt-br","pt","ro","ru","es","es-es","es-mx","es-us","sv","tr","cy","cy-gb"],languageDetection:1};Recite.Event.subscribe("Audio:ended",
function(){Recite.Debug.log("Recite.Player","-------\x3eAudio ended")});return{setOptions:function(a){d=Recite.Util.merge(d,a)},getOptions:function(){return d},init:function(){if(null===d.language){var a=document.documentElement.lang;0<a.length&&this.setOptions({language:a})}},prepare:function(){h().getOptions().prepareAudio&&(Recite.Debug.log("Recite.Player","--------------------\x3e Preloading audio..."),h().play({url:Recite.baseUrl+"/audio/blank.mp3"}))},play:function(a,d,c){h().getOptions().playlist&&
h().clearPlaylist();g(a,d,c,{},function(a){Recite.Debug.log("Recite.Player","In callback");1==a.length?(Recite.Debug.log("Recite.Player","Queue length == 1 ... "+a[0].url),h().play(a[0])):(Recite.Debug.log("Recite.Player","Queue length = "+a.length),Recite.Util.each(a,function(a,b){Recite.Debug.log("Recite.Player","Adding URL to playlist: "+b.url);h().addToPlaylist(b)}),Recite.Debug.log("Recite.Player","Play the playlist"),h().playPlaylist(),Recite.Debug.log("Recite.Player","Finished invoking play"))})},
pause:function(){h().pause()},restart:function(){h().restart()},resume:function(){h().resume()},cache:function(a,d,c){g(a,d,c,{cache:!0},function(b){Recite.Debug.log("Recite.Player","Cached audio for: "+a)})},stop:function(){h().stop()},rewind:function(){h().rewind()},forward:function(){h().forward()},setPlayer:function(b){a=b},getPlayer:function(){return a},getSupportedLanguauges:function(){return d.languages},languageSupported:function(a){return-1<Recite.Util.inArray(a,d.languages)||null===a}}}();
Recite.Player.PlayerException=function(h,g){this.code=h;this.message=g};Recite.namespace("Audio.WebAudio");
Recite.Audio.WebAudio=function(){function h(){Recite.Player.getPlayer().play(d[0]);d.splice(0,1)}function g(a){null!=b&&Recite.Audio.WebAudio.stop();Recite.Event.publish("Audio:started");b=e.createBufferSource();b.buffer=a;b.connect(e.destination);b.start(0);b.onended=function(){0<d.length?(Recite.Event.publish("Audio:playlist-item-ended"),h()):Recite.Preferences.get("player.continuePlay")?Recite.PlayerControls.next():Recite.Event.publish("Audio:ended")}}var a="",d=[],b=null,e=null,c={prepareAudio:!0,
playlist:!0,waitForAudioProcessing:!1};return{setOptions:function(a){c=Recite.Util.merge(c,a)},init:function(){Recite.Debug.log("Recite.Audio.WebAudio","Init");a=Recite.Audio.WebAudio.support();Recite.Debug.log("Recite.Audio.WebAudio","Preferred format detected as:"+a);Recite.Debug.log("Recite.Audio.WebAudio",a)},play:function(a){Recite.Debug.log("Recite.Audio.WebAudio","Webaudio play called!");var b=new XMLHttpRequest;b.open("GET",a,!0);b.responseType="arraybuffer";b.onload=function(){Recite.Debug.log("Recite.Audio.WebAudio",
"ONLOAD CALLED!");e.decodeAudioData(b.response,function(a){Recite.Debug.log("Recite.Audio.WebAudio","PLAY SOUND CALLED!");g(a)})};b.send()},stop:function(){null!=b&&(b.onended=null,b.stop(0),Recite.Event.publish("Audio:ended"))},rewind:function(){},forward:function(){},support:function(){try{var a=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext;return AudioContext?(window.AudioContext=a,e=new a,!0):!1}catch(f){return!1}},format:function(){return"mp3"},
getOptions:function(){return c},getPlaylistState:function(){return _playlistPlaying},addToPlaylist:function(a){d.push(a);return d},clearPlaylist:function(){return d=[]},playPlaylist:function(){h()},updateMeta:function(a,b){if(b&&a)for(var c=0,f=d.length;c<f;c++)d[c]&&d[c].hasOwnProperty("id")&&d[c].id==b&&(d[c].meta=a);return d}}}();Recite.namespace("Audio.HTML5");
Recite.Audio.HTML5=function(){function h(){var a=e[0];e.splice(0,1);Recite.Player.getPlayer().play(a)}function g(){Recite.Debug.log("Recite.Audio.HTML5","Moving onto next playlist item");Recite.Preferences.get("player.continuePlay")&&0>=e.length?Recite.PlayerControls.next():(Recite.Debug.log("Recite.Audio.HTML5","Playlist length: "+e.length),Recite.Event.publish("Audio:playlist-item-ended"))}function a(){var a=d.play();void 0!==a&&(a.then(function(){}),a.catch(function(a){Recite.Audio.AEBroker.stop();
Recite.WordByWord.resetSection();Recite.Gui.Notification.show("Recite would like to read this content aloud.  Please click the play button.")}))}var d=null,b="",e=[],c={prepareAudio:!0,playlist:!0,waitForAudioProcessing:!1};return{setOptions:function(a){c=Recite.Util.merge(c,a)},init:function(){Recite.Event.subscribe("Audio:playlist-item-ended",function(){0<e.length?h():Recite.Event.publish("Audio:ended")});null==d&&(Recite.Debug.log("Recite.Audio.HTML5","Init"),d=document.createElement("audio"),
b=Recite.Audio.HTML5.format(),d.addEventListener("ended",function(){g()},!1),d.addEventListener("error",function(){Recite.Debug.log("Recite.Audio.HTML5","Audio failed");g()},!1),d.addEventListener("canplay",function(){Recite.Debug.log("Recite.Audio.HTML5","Can play");a()},!1),Recite.Debug.log("Recite.Audio.HTML5","Preferred format detected as:"+b),Recite.Debug.log("Recite.Audio.Html5",b))},play:function(a){Recite.Event.publish("Audio:started");d.setAttribute("src",a);Recite.Debug.log("Recite.Audio.HTML5",
"PLAY CALLED..."+a);return d.load()},pause:function(){d.pause();Recite.Event.publish("Audio:paused")},resume:function(){d.play();Recite.Event.publish("Audio:started")},restart:function(){d.currentTime=0;d.load();d.play();Recite.Event.publish("Audio:restarted")},stop:function(){Recite.Debug.log("Recite.Audio.HTML5","STOP CALLED...");d.pause();e=[];Recite.Event.publish("Audio:ended")},rewind:function(){--d.currentTime},forward:function(){d.currentTime+=2},support:function(){var a=document.createElement("audio"),
b=!!a.canPlayType;b&&(b=new Boolean(b),b.ogg=a.canPlayType('audio/ogg; codecs="vorbis"'),b.mp3=a.canPlayType("audio/mpeg;"),b.wav=a.canPlayType('audio/wav; codecs="1"'),b.m4a=a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;"));return b},format:function(){var a=Recite.Audio.HTML5.support();return a.ogg?"ogg":a.mp3?"mp3":a.wav?"wav":a.m4a?"m4a":!1},getOptions:function(){return c},getPlaylistState:function(){return _playlistPlaying},addToPlaylist:function(a){e.push(a);return e},clearPlaylist:function(){Recite.Debug.log("Recite.Audio.HTML5",
"CLEAR PLAYLIST CALLED...");return e=[]},playPlaylist:function(){h()},getCurrentTime:function(){return Math.floor(1E3*d.currentTime)},updateMeta:function(a,b){if(b&&a)for(var c=0,d=e.length;c<d;c++)e[c]&&e[c].hasOwnProperty("id")&&e[c].id==b&&(e[c].meta=a);return e}}}();Recite.namespace("Audio.SoundManager");
Recite.Audio.SoundManager=function(){function h(){Recite.Player.getPlayer().play(a[0]);a.splice(0,1)}var g=null,a=[],d={path:Recite.baseUrl+"/common/js/soundmanager/soundmanager2-jsmin.js",soundmanager:{debugMode:!1,debug:!1,url:Recite.baseUrl+"/common/swf/"},prepareAudio:!0,playlist:!0,waitForAudioProcessing:!1};return{setOptions:function(a){d=Recite.Util.merge(d,a)},init:function(){Recite.Debug.log("Recite.Audio.SoundManager","Init soundmanager");Recite.Event.subscribe("Audio:ended",function(){Recite.Preferences.get("player.continuePlay")&&
Recite.PlayerControls.next()});Recite.Event.subscribe("Audio:playlist-item-ended",function(){0<a.length?h():Recite.Event.publish("Audio:ended")})},play:function(a){Recite.Debug.log("Recite.Audio.SoundManager","Play called");window.soundManager?((g=soundManager.getSoundById(a))||(g=soundManager.createSound({id:a,url:a})),soundManager.stopAll(),g.play({onload:function(a){a||(Recite.Debug.log("Recite.Audio.SoundManager","Cannot load audio file"),Recite.Event.publish("Audio:playlist-item-ended"))},onfinish:function(){Recite.Debug.log("Recite.Audio.SoundManager",
"Onfinish called");Recite.Event.publish("Audio:playlist-item-ended")},ondataerror:function(){Recite.Debug.log("Sound manager --- > Item failed: "+a);Recite.Event.publish("Audio:playlist-item-ended")}})):Recite.AssetLoader.js(d.path,function(){window.soundManager=new SoundManager;Recite.Util.each(d.soundmanager,function(a,b){soundManager[a]=b});soundManager.beginDelayedInit();soundManager.stopAll();soundManager.onready(function(){g=soundManager.createSound({id:a,url:a}).play({onload:function(a){a||
(Recite.Debug.log("Recite.Audio.SoundManager","Cannot load audio file"),Recite.Event.publish("Audio:playlist-item-ended"))},onfinish:function(){Recite.Debug.log("Recite.Audio.SoundManager","Onfinish called");Recite.Event.publish("Audio:playlist-item-ended")},ondataerror:function(){Recite.Debug.log("Sound manager --- > Item failed: "+a);Recite.Event.publish("Audio:playlist-item-ended")}})})});Recite.Event.publish("Audio:started")},preload:function(a){Recite.Audio.SoundManager.play(a)},pause:function(){g.pause();
Recite.Event.publish("Audio:paused")},resume:function(){g.resume();Recite.Event.publish("Audio:started")},restart:function(){g&&(Recite.Debug.log("Recite.Audio.Soundmanager","Restarting track"),g.setPosition(0))},stop:function(){g&&g.stop();Recite.Event.publish("Audio:ended")},rewind:function(){g&&(Recite.Debug.log("Recite.Audio.Soundmanager","Skiping backwards"),g.setPosition(g.position-500))},forward:function(){g?(Recite.Debug.log("Recite.Sudio.Soundmanager","Skiping forward"),g.setPosition(g.position+
500)):Recite.Debug.log("Recite.Sudio.Soundmanager","No sound object!?")},support:function(){return!0},format:function(){return"mp3"},addToPlaylist:function(b){a.push(b);return a},clearPlaylist:function(){return a=[]},playPlaylist:function(){h()},getOptions:function(){return d},getCurrentTime:function(){return g.position},updateMeta:function(b,d){if(d&&b)for(var c=0,e=a.length;c<e;c++)a[c]&&a[c].hasOwnProperty("id")&&a[c].id==d&&(a[c].meta=b);return a}}}();Recite.namespace("Audio.Download");
Recite.Audio.Download=function(){var h={prepareAudio:!1,playlist:!1,waitForAudioProcessing:!0};return{setOptions:function(g){h=Recite.Util.merge(h,g)},init:function(){},play:function(g){Recite.Audio.AEBroker.setDownload(!1);Recite.Debug.log("Recite.Audio.Download","PLAY");window.location.href=g+"&download=true"},stop:function(){},rewind:function(){},forward:function(){},support:function(){return!0},format:function(){return"mp3"},getOptions:function(){return h}}}();Recite.namespace("Audio.AEBroker");
Recite.Audio.AEBroker=function(){function h(){var a=Recite.Preferences.get("player.playbackSpeed");0>m?m=a:0<m&&m!=a&&(m=a,setTimeout(function(){if(k&&m==a){g();var b=Recite.Sizzle("recite.recite-selected");0<b.length&&Recite.PlayerDispatcher.dispatch(b[0])}},l.speedChangeWait))}function g(){null!=c&&c.stop()}function a(b){var e=b.id,g=b.url;if("blank.mp3"!=g.substr(g.length-9,9)){var h=d(e,"meta");if(h)c.updateMeta(h,e),k&&k.hasOwnProperty("id")&&k.id==e&&(k.meta=h);else{var n=d(e,"count");null==
n&&(n=0);n<=l.metaLoadAttempts&&Recite.Ajax.ajax(g+"&meta=true",{method:"get",success:function(a){200==a.status&&a.response&&(a=JSON.parse(a.response))&&(null!=e&&null!=n&&(f[e]={meta:a,count:n}),c.updateMeta(a,e),k&&k.hasOwnProperty("id")&&k.id==e&&(k.meta=a))},error:function(c){if(404==c.status||408==c.status)n++,null!=e&&null!=n&&(f[e]={meta:null,count:n}),n<l.metaLoadAttempts&&setTimeout(function(){a(b)},l.metaLoadPause)}})}}}function d(a,b){return f.hasOwnProperty(a)&&f[a].hasOwnProperty(b)?
f[a][b]:null}function b(){Recite.Audio.HTML5.support()?(Recite.Debug.log("Recite.Player","HTML5 Audio support detected, using Recite.Audio.HTML5 as backend."),Recite.Audio.HTML5.init(),c=Recite.Audio.HTML5):Recite.Audio.SoundManager.support()&&(Recite.Debug.log("Recite.Player","HTML5 Audio not supported, using Recite.Audio.SoundManager as backend."),Recite.Audio.SoundManager.init(),c=Recite.Audio.SoundManager)}function e(a,b){null!=c&&(a=a?c.play(a):c.play(),void 0!==a?(a.then(function(){"function"==
typeof b&&b()}),a.catch(function(a){Recite.Audio.AEBroker.stop();Recite.WordByWord.resetSection();Recite.Gui.Notification.show("Recite would like to read this content aloud.  Please click the play button.")})):"function"==typeof b&&b())}var c=null,l={metaLoadAttempts:10,metaLoadPause:500,speedChangeWait:300},f={},k=null,m=-1,n=!1;Recite.Event.subscribe("Translate:global-begin",g);Recite.Event.subscribe("Preferences:load",h);Recite.Event.subscribe("Preferences:set",h);Recite.Event.subscribe("Preferences:reset",
h);Recite.Event.subscribe("Audio:ended",function(){k=null});return{setOptions:function(a){l=Recite.Util.merge(l,a)},init:function(){if(null!=c)return this;b();return this},play:function(d){var f=null;if(d&&(d.hasOwnProperty("url")&&(f=d.url),null!=f&&"blank.mp3"==f.toLowerCase().substr(f.length-9)))return;n&&null!==f?(c.play(f),b()):((k=d)&&!k.hasOwnProperty("meta")&&a(k),e(f,"_setStartPlay"))},getMeta:function(){return k&&k.hasOwnProperty("meta")?k.meta:null},pause:function(){null!=c&&"function"==
typeof c.pause&&c.pause()},resume:function(){null!=c&&"function"==typeof c.play&&c.play()},restart:function(){null!=c&&"function"==typeof c.restart&&c.restart()},stop:function(){null!=c&&"function"==typeof c.stop&&c.stop()},rewind:function(){null!=c&&"function"==typeof c.rewind&&(c.rewind(),Recite.Event.publish("Audio:rewind"))},forward:function(){null!=c&&"function"==typeof c.forward&&(c.forward(),Recite.Event.publish("Audio:forward"))},getOptions:function(){return null!=c?Recite.Util.merge(l,c.getOptions()):
l},getPlaylistState:function(){if(null!=c)return c.getPlaylistState()},addToPlaylist:function(b){null!=c&&(c.addToPlaylist(b),!b.hasOwnProperty("meta")&&b.hasOwnProperty("id")&&b.hasOwnProperty("url")&&a(b))},clearPlaylist:function(){null!=c&&"function"==typeof c.clearPlaylist&&c.clearPlaylist()},playPlaylist:function(){null!=c&&c.playPlaylist()},format:function(){if(null!=c)return c.format()},getPlayTime:function(){return null!=c&&c.hasOwnProperty("getCurrentTime")?c.getCurrentTime():Date.now()-
0},setDownload:function(a){n=1==a;Recite.Audio.Download.init();c=Recite.Audio.Download}}}();Recite.namespace("WordByWord");
Recite.WordByWord=function(){function h(){for(var a=Recite.Sizzle("reciteword[data-highlight=1]"),b=d(),c=0;c<a.length;c++)a[c]&&(b.fg&&(a[c].style.color=b.fg),b.bg&&(a[c].style.background=b.bg))}function g(){if(null!=B)return B;var b=null;G&&(b=G.color);if(null!=b){b=b.replace("rgb(","").replace("rgba(","").replace(")","");b=b.split(",");b=a(b);var c="rgb("+(255-parseInt(b[0]))+","+(255-parseInt(b[1]))+","+(255-parseInt(b[2]))+")";b=[parseInt(b[0]),parseInt(b[1]),parseInt(b[2])];b=a(b);b="rgb("+
b[0]+","+b[1]+","+b[2]+")";return B={bg:b,fg:c}}return{bg:"black",fg:"white"}}function a(a){for(var b=0;b<a.length;b++)parseInt(a[b])<v.colorRoundingThreshold&&(a[b]=0),a[b]>255-v.colorRoundingThreshold&&(a[b]=255);return a}function d(){var a=g(),b=Recite.Preferences.get("style.wwHighlight.color"),c=Recite.Preferences.get("style.font.color"),d=Recite.Preferences.get("style.backgroundColor");return{fg:null==d||"null"==d?a.fg:d,bg:null==b||"null"==b?null==c||"null"==c?a.bg:c:b}}function b(){c();t=!0}
function e(){t=!1}function c(){v.enabled&&!t&&(x(),Recite.Audio.AEBroker.pause(),(0<Recite.Sizzle("[data-have-read]").length||0<Recite.Sizzle("reciteword[data-highlight=1]").length)&&p())}function l(){if(y&&u&&!t){var a=Recite.Audio.AEBroker.getMeta();if(E!=a&&void 0!=a){var b=v.wordCheckRate;for(var c=1,d=a.length;c<d;c++){var e=a[c].time-a[c-1].time;e<b&&(b=e)}b<v.wordCheckRate&&(v.wordCheckRate=b,r());E=a}if(a){b=Recite.Audio.AEBroker.getPlayTime();c=null;d=0;for(e=a.length;d<e;d++)a[d].time<=
b?c=a[d]:d=e+10;(a=c)&&a.hasOwnProperty("time")&&a.hasOwnProperty("value")&&(null==F||a.time!=F)&&(F=a.time,f(a.value))}}}function f(a){if(u&&!t){m();var b=k(a),c=void 0,d=Recite.Sizzle("reciteword[data-have-read]"),f=Recite.Sizzle("reciteword:not([data-have-read])"),e=void 0;if(!H&&f){var g=/^[0-9a-zA-Z]+$/,l=0;-1=="af eu ca da nl en fi fr gl de id id id ms no pt es sw sv".split(" ").indexOf(Recite.Language.Translate.getWorkingPageLanguage())&&(e=f[l],c=f[l].getAttribute("data-word-value"));for(;l<
f.length&&void 0==c;){var n=f[l].getAttribute("data-word-value");n.match(g)&&(e=f[l],c=n);l++}}if(c&&c==b&&!e.hasAttribute("data-partword"))e.setAttribute("data-highlight",1),h();else if(f=null,d&&(f=d[d.length-1]),f&&(f=f.getAttribute("data-word-value")),d=c?c.length>a.length:!1,e=c?c.length<a.length:!1,b=void 0,e&&(g=k(a),l=k(c),0==g.indexOf(l)&&(b=[c],g=g.substr(l.length),b=b.concat(g.split(z)))),void 0==b&&(b=-1<["&amp;"].indexOf(a)?[a]:a.split(z)),!(!e&&2<=b.length&&f&&c&&b.includes(f)&&b.includes(c))){for(a=
b.length-1;-1<a;a--)if(f=k(b[a]).trim(),""!=f){e=Recite.Sizzle("reciteword[data-word-value"+(H||d?"*":"")+'="'+f+'"]:not([data-have-read]):not([data-currentword])');if(0<e.length)var q=e[0];void 0!=q&&(q.setAttribute("data-highlight",1),q.setAttribute("data-currentword",1),d&&(e=q.getAttribute("data-partword"),g="",e&&(g=e),e=k(g+f),g=c?k(c):"",e!=g&&e.length<g.length?q.setAttribute("data-partword",f):q.removeAttribute("data-partword")))}Recite.Util.each(Recite.Sizzle("[data-currentword]"),function(){this.removeAttribute("data-currentword")});
H=!1;h()}}}function k(a){a=a.replace(/\u00a0/g," ");for(var b=0;b<A.length;b++)a=a.replace(A[b],"");return a}function m(){Recite.Util.each(Recite.Sizzle("reciteword[data-highlight]:not([data-partword])"),function(){var a=this,b=!1,c=Recite.Sizzle("reciteWordByWord")[0];Recite.Util.each(Recite.Sizzle("reciteword:not([data-have-read])",c),function(){if(!b&&(this.setAttribute("data-have-read",1),this.removeAttribute("data-highlight"),this.removeAttribute("style"),this==a))return b=!0,!1})})}function n(a){Recite.Util.each(Recite.Sizzle("reciteword["+
a+"]"),function(){this.removeAttribute(a)})}function q(){v.enabled&&!t&&(H=!0,F=null,n("data-have-read"),n("data-currentword"),n("data-partword"),n("data-highlight"),n("style"))}function p(){u&&y&&D&&(D.remove(),D=null,y.setAttribute("style",I));y&&(y.positionalProxy=null);u=!1;y=B=G=F=null}function w(a){try{return document.createTreeWalker(a)}catch(J){v.enabled=!1}return null}function r(){x();C=setInterval(function(){l()},v.wordCheckRate)}function x(){C&&(clearInterval(C),C=null)}var v={enabled:!1,
wordCheckRate:50,css:"",colorRoundingThreshold:75},A=[/"/g,/'/g,/\//g,/\\/g,/`/g,/-/g,/\(/g,/\)/g,/{/g,/}/g,/\[/g,/\]/g],z=/([ . !:;\u2013?,\n])/gi,C=null,u=!1,t=!1,B=null,y=null,F=null,E;Recite.Event.subscribe("Audio:started",function(){if(v.enabled&&!t){var a=Recite.Sizzle("recite.recite-selected");if(0<a.length){a=a[0];y&&y==a||(p(),u=!1,y=a);if(!u&&v.enabled&&!t&&y){D=document.createElement("reciteWordByWord");D.setAttribute("class","recite-word-by-word");D.setAttribute("data-recite-skip","true");
a=y.cloneNode(!0);G=getComputedStyle(y);d();var b=D;b:{var c=void 0;void 0==c&&(c=z);var f=w(a);if(null==f)c=a;else{var e=document.createElement(a.tagName);for(e.innerHTML=a.innerHTML;f.nextNode();){var g=f.currentNode;if(3==g.nodeType){var k=document.createElement("recitesentence");k.setAttribute("class","recite-ignore-styles-background recite-ignore-styles-color");for(var h=g.textContent.replace(/\u00a0/g," ").split(c),n=0;n<h.length;n++)if(""!=h[n].trim()){var q=document.createElement("reciteword");
q.innerText=h[n];var m=h[n];1<m.length&&(m=m.replace(/^[ '".,;:'`|\/?]/,""),m=m.replace(/[ '".,;:'`|\/?]+$/,""));"&"==m&&(m="&amp;");for(var E=0;E<A.length;E++)m=m.replace(A[E],"");q.setAttribute("data-word-value",m);q.setAttribute("class","recite-ignore-styles-background recite-ignore-styles-color");k.appendChild(q)}else q=document.createTextNode(h[n]),k.appendChild(q);h=w(e);if(null==h){c=a;break b}for(;h.nextNode();)n=h.currentNode,q=n.parentElement,3==n.nodeType&&n.textContent==g.textContent&&
"RECITEWORD"!=q.tagName&&(q.insertBefore(k,n),q.removeChild(n))}}c=e}}b.innerHTML=c.innerHTML;D.innerHTML!==a.innerHTML&&(y.parentNode.insertBefore(D,y),I=y.getAttribute("style"),D.style=v.css,D.style.color=G.color,y.setAttribute("style",I+" "+K),u=!0,y.positionalProxy=D)}x();F=null;l();r()}}});Recite.Event.subscribe("Audio:ended",c);Recite.Event.subscribe("Audio:rewind",q);Recite.Event.subscribe("Audio:forward",q);Recite.Event.subscribe("Translate:global-begin",b);Recite.Event.subscribe("Translate:restore_begin",
b);Recite.Event.subscribe("Translate:global-end",e);Recite.Event.subscribe("Translate:restore_complete",e);Recite.Event.subscribe("Preferences:load",h);Recite.Event.subscribe("Preferences:set",h);Recite.Event.subscribe("Preferences:reset",h);var H=!1,D=null,K=" ; display:none; color:transparent !IMPORTANT; background:transparent",I="",G=null;return{updateWordHighlight:function(){v.enabled&&!t&&l()},enable:function(){v.enabled=!0},disable:function(){p();v.enabled=!1},getOptions:function(){return v},
setOptions:function(a){v=Recite.Util.merge(v,a)},resetSection:function(){p()}}}();Recite.namespace("Style");
Recite.Style=function(){function h(a){var b=Recite.Sizzle("style[id=recite-style]");0===b.length?(b=a.createElement("style"),b.type="text/css",b.id="recite-style",b.setAttribute("data-recite-skip","true"),Recite.Sizzle("head",a)[0].appendChild(b)):b=b[0];return b}function g(){var a="",c=Recite.Preferences.get("style"),d=Recite.Preferences.get("textMode.enabled");null!==c.marginSize&&d&&(a+="#recite-wrapper, recitewordbyword,  #recite-dictionary * { padding: 0 "+c.marginSize+"; } body { padding-left: 0 !important; padding-right: 0 !important; margin-left: 0 !important; margin-right: 0 !important; } ",
c.marginSize!==b.marginSize&&(b.marginSize=c.marginSize,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"margin: "+c.marginSize})));null!==c.textAlign&&d&&(a+="#recite-wrapper, recitewordbyword, #recite-dictionary * { text-align: "+c.textAlign+"; }",c.textAlign!==b.textAlign&&(b.textAlign=c.textAlign,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"textAlign: "+c.textAlign})));c.font&&null!==c.font.face&&(a+="[data-recite-shadow] *, #recite-wrapper, recitewordbyword, #recite-wrapper *, #recite-dictionary * { font-family: "+
c.font.face+" !important; }",c.font.face!==b.font.face&&(b.font.face=c.font.face,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"font-family: "+c.font.face})));c.font&&null!==c.font.size&&(a+=".recite-ele,  recitewordbyword, #recite-dictionary * { font-size: "+c.font.size+"% !important; } ",c.font.size!==b.font.size&&(b.font.size=c.font.size,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"font-size: "+c.font.size+"%"})));c.font&&null!==c.font.color&&(a+=
"#recite-wrapper, #recite-wrapper *:not(.recite-ignore-styles-color):not(a), [data-recite-shadow] *:not(.recite-ignore-styles-color):not(a), #recite-dictionary *  {color: "+c.font.color+"!important; text-shadow: none !important; }",a+="*::-webkit-input-placeholder { color: "+c.font.color+" !important; }",a+="*:-moz-placeholder { color: "+c.font.color+" !important; }",a+="*::-moz-placeholder { color: "+c.font.color+" !important; }",a+="*::-ms-input-placeholder { color: "+c.font.color+" !important; }",
a+="input:not(.recite-colorpicker) { color: "+c.font.color+" !important; }",a+="textarea { color: "+c.font.color+" !important; }",a+="select { color: "+c.font.color+" !important; }",a+="button { color: "+c.font.color+" !important; }",c.font.color!==b.font.color&&(b.font.color=c.font.color,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"font-colour: "+c.font.color})));c.link&&null!==c.link.color&&(a+="#recite-wrapper a, [data-recite-shadow] a { color: "+c.link.color+" !important; } ",
c.link.color!==b.link.color&&(b.link.color=c.link.color,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"link-colour: "+c.link.color})));null!==c.backgroundColor&&(a+="#recite-wrapper *:not(.recite-ignore-styles-background), #recite-dictionary, #recite-dictionary *, [data-recite-shadow] *:not(.recite-ignore-styles-background) { background: "+c.backgroundColor+" !important; box-shadow: none !important; }",a+="body, html, #recite-wrapper { background: "+c.backgroundColor+" !important; }",
a+="input:not(.recite-colorpicker) { background: "+c.backgroundColor+" !important; }",a+="textarea { background: "+c.backgroundColor+" !important; }",a+="select { background: "+c.backgroundColor+" !important; }",a+="button:not(#recite-header button) { background: "+c.backgroundColor+" !important; }",c.backgroundColor!==b.backgroundColor&&(b.backgroundColor=c.backgroundColor,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"background-colour: "+c.backgroundColor})));c.ruler&&null!==
c.ruler.color&&c.ruler.color!==b.ruler.color&&(b.ruler.color=c.ruler.color,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"ruler-colour: "+c.ruler.color}));c.screenMask&&null!==c.screenMask.color&&c.screenMask.color!==b.screenMask.color&&(b.screenMask.color=c.screenMask.color,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"screenMask-colour: "+c.screenMask.color}));if(null!==c.zoom&&void 0!==c.zoom){d=parseInt(c.zoom);var f=d/100;a+="#recite-wrapper {  -moz-transform: scale( "+
f+" , "+f+" ); /* Moz-browsers */  zoom: "+f+"; /* Other non-webkit browsers */  zoom: "+d+"%; /* Webkit browsers*/ } ";c.zoom!==b.zoom&&(b.zoom=c.zoom,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"zoom: "+c.zoom}))}null!==c.lineHeight&&(a+=".recite-ele,  recitewordbyword, #recite-dictionary * { line-height: "+c.lineHeight+"% !important; } ",c.lineHeight!==b.lineHeight&&(b.lineHeight=c.lineHeight,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"line-height: "+
c.lineHeight+"%"})));null!==c.charSpacing&&(a+=".recite-ele,  recitewordbyword, #recite-dictionary * { letter-spacing: "+c.charSpacing+"px !important; } ",c.charSpacing!==b.charSpacing&&(b.charSpacing=c.charSpacing,Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Style",event:"character-spacing: "+c.charSpacing+"px"})));return a}function a(){var a=h(window.document);if(a.styleSheet)a.styleSheet.cssText=g();else{for(var b=window.document.createTextNode(g());a.hasChildNodes();)a.removeChild(a.lastChild);
a.appendChild(b)}1==Recite.getOptions("shadowDomSupport")&&(b=Recite.Sizzle("[data-recite-shadow='true']"),Recite.Util.each(b,function(b,c){b=a.cloneNode(!0);b.setAttribute("id","recite-shadow-style");if("undefined"!=typeof c.shadowRoot){var d=c.shadowRoot.querySelectorAll("#recite-shadow-style");Recite.Util.each(d,function(a,b){b.remove()});c.shadowRoot.appendChild(b)}}));Recite.Event.publish("Style:updated",{origin:"Recite.Style"})}var d={preserve_background_images:!1},b={marginSize:null,font:{color:null,
face:null,size:null},backgroundColor:null,link:{color:null},ruler:{color:null},screenMask:{color:null,opacity:1},zoom:null,lineHeight:null,charSpacing:null};Recite.Event.subscribe("Preferences:load",function(){a()});Recite.Event.subscribe("Preferences:set",function(){a()});Recite.Event.subscribe("Preferences:reset",function(){a()});Recite.Event.subscribe("Recite:enable",function(){var a=Recite.Sizzle("body > *",document),b=Recite.Sizzle("body",document)[0];Recite.Debug.log("Recite.Style","Wrapping body elements in a recite-wrapper.");
var d=document.createElement("div");d.id="recite-wrapper";Recite.Util.each(a,function(a,b){"true"!==b.getAttribute("data-recite-skipwrap")&&(b.parentNode.removeChild(b),d.appendChild(b))});b.appendChild(d);Recite.Event.publish("Recite:Style:wrappedElements")});return{setOptions:function(a){d=Recite.Util.merge(d,a)},getOptions:function(){return d},update:a}}();Recite.namespace("Ruler");
Recite.Ruler=function(){function h(){Recite.Preferences.get("style.ruler.enabled")?Recite.Ruler.enable():Recite.Ruler.disable();d()}function g(c){var d=Recite.Sizzle("#recite-ruler",c);if(0==d.length){var g=Recite.Sizzle("body",c)[0];d=c.createElement("div");d.id="recite-ruler";d.style.backgroundColor=a();d.style.opacity=b.opacity;g.appendChild(d)}else d=d[0];return d}function a(){var a=Recite.Preferences.get("style.ruler.color");if(null==a||"null"==a||""==a.trim())a=b.backgroundColor;return a}function d(c){if(b.enabled&&
!e){clearTimeout(b.timeout);Recite.Util.unSetIFramePointerEvents();b.timeout=setTimeout(function(){Recite.Util.reSetIFramePointerEvents()},b.intent);var d=g(document),k=c?c.clientY:0;switch(b.mode){case "bottom":void 0!=c&&(d.style.bottom=0,d.style.top=k+b.modes.bottom.yOffset+"px");break;case "top":void 0!=c&&(d.style.top=0,d.style.height=k+b.modes.top.yOffset+"px");break;case "bar":void 0!=c&&(d.style.bottom="auto",d.style.top=k+b.modes.bar.yOffset+"px"),d.style.height=b.modes.bar.height+"px"}d.style.backgroundColor=
a();d.style.opacity=b.opacity}}var b={enabled:!1,mode:"bar",backgroundColor:"#000",opacity:1,modes:{top:{yOffset:-80},bottom:{yOffset:-80},bar:{yOffset:40,height:160}},timeout:null,intent:200},e=!1,c=null;Recite.Event.subscribe("Preferences:load",h);Recite.Event.subscribe("Preferences:set",h);Recite.Event.subscribe("Preferences:reset",h);return{setOptions:function(a){b=Recite.Util.merge(b,a)},enable:function(){if(Recite.Browser.isMobile())Recite.Debug.log("Recite.Ruler","Preventing load as feature not supported on mobile"),
Recite.Gui.Notification.show("This feature is not available on your platform.",{read:!1});else if(!e&&!b.enabled){Recite.Debug.log("Recite.Ruler","Enabled ruler");Recite.PlayerControls.disable();Recite.Player.stop();Recite.ScreenMask.disable();Recite.Magnifier.disable();Recite.Sizzle("body",document);g(document);if(null==c){var a=Recite.Sizzle("iframe");c=[];Recite.Util.each(a,function(a,b){c.push({frame:b,state:void 0==b.style.pointerEvents?"all":b.style.pointerEvents})})}Recite.Util.unSetIFramePointerEvents();
Recite.DomEvent.add(document,"mousemove",d);b.enabled=!0;Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Ruler",event:"enable"})}},disable:function(){if(b.enabled){Recite.Debug.log("Recite.Ruler","Disabled ruler");Recite.Util.reSetIFramePointerEvents();Recite.PlayerControls.enable();Recite.Preferences.set("style.ruler.enabled",!1);Recite.Sizzle("body",document);Recite.DomEvent.remove(document,"mousemove",d);var a=g(document);a.parentNode.removeChild(a);b.enabled=!1;Recite.Event.publish("Recite:ModuleEvent",
{name:"Recite.Ruler",event:"disable"});Recite.Event.publish("Recite.Dom.Observor:change")}},disableInstance:function(){e=!0},isEnabled:function(){return b.enabled}}}();Recite.namespace("ScreenMask");
Recite.ScreenMask=function(){function h(){Recite.Preferences.get("style.screenMask.enabled")?Recite.ScreenMask.enable():Recite.ScreenMask.disable();a()}function g(a){var c=Recite.Sizzle("#recite-screen-mask-top",a),f=Recite.Sizzle("#recite-screen-mask-bottom",a);if(0==c.length){var g=Recite.Sizzle("body",a)[0];c=a.createElement("div");c.id="recite-screen-mask-top";c.style.backgroundColor=d();c.style.opacity=b.opacity;g.appendChild(c)}else c=c[0];0==f.length?(g=Recite.Sizzle("body",a)[0],f=a.createElement("div"),
f.id="recite-screen-mask-bottom",f.style.backgroundColor=d(),f.style.opacity=b.opacity,g.appendChild(f)):f=f[0];return{top:c,bottom:f}}function a(a){if(!e){clearTimeout(b.timeout);Recite.Util.unSetIFramePointerEvents();b.timeout=setTimeout(function(){Recite.Util.reSetIFramePointerEvents()},b.intent);var c=g(document);if(b.enabled){var f=b.height/2;if(void 0!=a){var k=a.clientY+b.yOffset;a=k+f;f=k-f;c.top.style.height=(0<f?f:0)+"px";c.bottom.style.top=(0<a?a:0)+"px"}c.top.style.backgroundColor=d();
c.bottom.style.backgroundColor=d();c.top.style.opacity=b.opacity;c.bottom.style.opacity=b.opacity}}}function d(){var a=Recite.Preferences.get("style.screenMask.color");if(null==a||"null"==a||""==a.trim())a=b.backgroundColor;return a}var b={enabled:!1,height:160,yOffset:0,backgroundColor:"#000",opacity:1,timeout:null,intent:200},e=!1;Recite.Event.subscribe("Preferences:load",h);Recite.Event.subscribe("Preferences:set",h);Recite.Event.subscribe("Preferences:reset",h);return{setOptions:function(a){b=
Recite.Util.merge(b,a)},enable:function(){if(Recite.Browser.isMobile())Recite.Debug.log("Recite.ScreenMask","Preventing load as feature not supported on mobile"),Recite.Gui.Notification.show("This feature is not available on your platform.",{read:!1});else if(!e&&!b.enabled){Recite.Debug.log("Recite.ScreenMask","Enabled ScreenMask");Recite.PlayerControls.disable();Recite.Player.stop();Recite.Ruler.disable();Recite.Magnifier.disable();var c=Recite.Sizzle("body",document)[0];g(document);Recite.Util.unSetIFramePointerEvents();
Recite.DomEvent.add(c,"mousemove",a);b.enabled=!0;Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.ScreenMask",event:"enable"})}},disable:function(){if(b.enabled){Recite.Debug.log("Recite.ScreenMask","Disabled screen mask");Recite.Preferences.set("style.screenMask.enabled",!1);Recite.Util.reSetIFramePointerEvents();Recite.PlayerControls.enable();var c=Recite.Sizzle("body",document)[0];Recite.DomEvent.remove(c,"mousemove",a);c=g(document);var d=c.top.parentNode;d.removeChild(c.top);d.removeChild(c.bottom);
b.enabled=!1;Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.ScreenMask",event:"disable"});Recite.Event.publish("Recite.Dom.Observor:change")}},isEnabled:function(){return b.enabled},disableInstance:function(){e=!0}}}();Recite.namespace("Browser");
Recite.Browser=function(){function h(){d=g(l)||"unknown browser";b=a(navigator.userAgent)||a(navigator.appVersion)||"unknown version";e=g(f)||"unknown OS"}function g(a){for(var b=0;b<a.length;b++){var d=a[b].string,f=a[b].prop;c=a[b].versionSearch||a[b].identity;if(d){if(-1!==d.indexOf(a[b].subString))return a[b].subString}else if(f)return a[b].subString}return!1}function a(a){var b=a.indexOf(c);return-1===b?!1:parseFloat(a.substring(b+c.length+1))}var d,b,e,c,l=[{string:navigator.userAgent,subString:"Chrome",
identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,subString:"Opera",identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",
identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Internet Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],f=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,
subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Andriod"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.platform,subString:"Andriod",identity:"Andriod"}];return{getName:function(){h();return d},getVersion:function(){h();return b},getOS:function(){h();return e},getData:function(){h();return{name:d,version:b,OS:e}},isMobile:function(){return"Android"===
Recite.Browser.getOS()||"iPhone"===Recite.Browser.getOS()||"iPad"===Recite.Browser.getOS()?!0:!1}}}();Recite.namespace("Selection");
Recite.Selection=function(){function h(){var a="";"undefined"!==typeof window.getSelection?a=window.getSelection().toString():"undefined"!==typeof document.selection&&"Text"===document.selection.type&&(a=document.selection.createRange().text);return a.replace(/^\s+|\s+$/g,"")}var g={playOnSelection:!1};Recite.DomEvent.add(document,"mouseup",function(a){a=h();0<a.length&&(Recite.Event.publish("Selection:textSelection",{method:"selection",text:a}),g.playOnSelection&&Recite.Player.play(a))});return{setOptions:function(a){g=
Recite.Util.merge(g,a)},getOptions:function(){return g},getTextSelection:h}}();Recite.namespace("AudioDownload");
Recite.AudioDownload=function(){function h(a){Recite.Audio.AEBroker.stop();Recite.Audio.AEBroker.clearPlaylist();Recite.Gui.Notification.show("Your download file is being created.  It will be automatically downloaded once created",{read:!1});Recite.Audio.AEBroker.setDownload(!0);Recite.PlayerDispatcher.dispatch(a);Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Audio",event:"download"})}var g={enabled:!0},a=!1;Recite.Event.subscribe("Selection:textSelection",function(d,b){"selection"===b.method&&
g.enabled&&a&&(h(b.text),a=!1)});return{setOptions:function(a){g=Recite.Util.merge(g,a)},getOptions:function(){return g},getEnabled:function(){return g.enabled},generateDownload:function(d){Recite.Debug.log("AudioDownload","Generate");g.enabled?(d=d||null)&&void 0!=d&&null!=d&&""!=d?(Recite.Debug.log("AudioDownload","Generate: "+d),h(d)):(Recite.Debug.log("AudioDownload","Listen for selection...."),Recite.Gui.Notification.show("Please select some text.",{read:!1}),a=!0):(Recite.Debug.log("AudioDownload",
"Disabled"),Recite.Gui.Notification.show("MP3 download functionality currently disabled",{read:!0}))},init:function(){}}}();Recite.namespace("TextMode");
Recite.TextMode=function(){function h(a,b){Recite.Util.each(a.styleSheets,function(a,c){b?"true"!==(c.ownerNode||c.owningElement).getAttribute("data-recite-skip")&&(c.prevState=c.disabled,c.disabled=!0):"undefined"!==typeof c.prevState?(c.disabled=c.prevState,c.prevState=null):c.disabled=!1})}var g={disableInlineStyles:!0,disableStylesheets:!0,hideElements:["img","iframe","object","embed"],textAlign:!1,defaultMarginSize:"30%"},a=[];Recite.Event.subscribe("Preferences:load",function(a,b){Recite.Preferences.get("textMode.enabled")&&
(a=Recite.Sizzle("#recite-wrapper")[0],Recite.TextMode.transform(a))});Recite.Event.subscribe("Preferences:set",function(a,b){a=Recite.Preferences.get("textMode.enabled");b=Recite.Sizzle("#recite-wrapper")[0];a?Recite.TextMode.transform(b):Recite.TextMode.restore(b)});Recite.Event.subscribe("Preferences:reset",function(){var a=Recite.Preferences.get("textMode.enabled"),b=Recite.Sizzle("#recite-wrapper")[0];!0===a?Recite.TextMode.transform(b):Recite.TextMode.restore(b)});return{setOptions:function(a){g=
Recite.Util.merge(g,a)},transform:function(d){if(!(0<=Recite.Util.inArray(d,a))){a.push(d);var b=d.ownerDocument;g.disableStylesheets&&h(b,!0);b=Recite.Sizzle("*",d);g.disableInlineStyles&&Recite.Util.each(b,function(a,b){null!==b.getAttribute("style")&&(b.setAttribute("data-recite-restore-style",b.getAttribute("style")),b.setAttribute("style",null))});g.textAlign&&Recite.Util.each(b,function(a,b){b&&b.style&&(b.style.textAlign&&b.setAttribute("data-recite-restore-text-align",b.style.textAlign),b.style.textAlign=
g.textAlign)});Recite.Util.each(g.hideElements,function(a,b){a=Recite.Sizzle(b,d);Recite.Util.each(a,function(a,b){b.setAttribute("data-recite-restore-display",Recite.Dom.getStyle(b,"display"));b.style.display="none"})});Recite.Preferences.get("style.marginSize")||Recite.Preferences.set("style.marginSize",g.defaultMarginSize);Recite.Event.publish("TextMode:enabled");Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.TextMode",event:"enable"})}},restore:function(d){var b=Recite.Util.inArray(d,
a);if(!(0>b)){var e=d.ownerDocument;g.disableStylesheets&&h(e,!1);e=Recite.Sizzle("*",d);g.textAlign&&Recite.Util.each(e,function(a,b){null!==b.getAttribute("data-recite-restore-text-align")&&b.style?b.style.textAlign=b.getAttribute("data-recite-restore-text-align"):b.style.textAlign=null});g.disableInlineStyles&&Recite.Util.each(e,function(a,b){null!==b.getAttribute("data-recite-restore-style")&&(b.setAttribute("style",b.getAttribute("data-recite-restore-style")),b.setAttribute("data-recite-restore-style",
null))});Recite.Util.each(g.hideElements,function(a,b){a=Recite.Sizzle(b,d);Recite.Util.each(a,function(a,b){null!==b.getAttribute("data-recite-restore-display")&&(b.style.display=b.getAttribute("data-recite-restore-display"),b.setAttribute("data-recite-restore-display",null))})});a.splice(b,1);Recite.Event.publish("TextMode:disabled");Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.TextMode",event:"disable"})}}}}();Recite.namespace("Recite.Dictionary");
Recite.Dictionary=function(){function h(){Recite.Preferences.get("dictionary.enabled")?Recite.Dictionary.enable():Recite.Dictionary.disable()}function g(){Recite.Sizzle("#recite-dictionary",document)[0].style.display="block";Recite.DomEvent.add(Recite.Sizzle("#recite-dictionary-inner-reveal",document)[0],"click",function(){if(""===Recite.Sizzle("#recite-dictionary-inner",document)[0].style.height){var a=Recite.Sizzle("#recite-dictionary-inner",document)[0],b=Recite.Dom.getWindowDimensions(window).height-
l.offsets.height;a.style.height=b+"px";a.style.overflow="auto";Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Dictionary",event:"enable"})}else a=Recite.Sizzle("#recite-dictionary-inner",document)[0],a.style.height="",a.style.overflow="hidden",Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Dictionary",event:"disable"})})}function a(a){var c=Recite.Sizzle("#recite-dictionary-inner-words",document)[0];c.innerHTML=a?"<h4>Recite English Dictionary</h4> <br /><br />"+a:"<h4>Recite English Dictionary</h4> <br /> Select one or more words to get definition";
a=Recite.Parser.Html.parse(c);Recite.PlayerControls.invoke(a);Recite.DomEvent.add(Recite.Sizzle(".recite-dictionary-synonym"),"click",function(a){b({text:a.target.innerHTML})})}function d(a,c){if("selection"===c.method){if(!k||""===c.text||!1===c.text||c.text===m)return!1;b(c);m=c.text}return!0}function b(b){a("Getting definition...");e(b.text.replace(/ /g,","),function(b){a("");var c="";Recite.Util.each(b,function(a,b){c+="<strong>"+unescape(b.word)+"</strong><br />"+unescape(b.definition)+"<br /><br />";
b.synonyms&&(c+="<strong>Synonyms</strong><br />",Recite.Util.each(b.synonyms,function(a,b){c+="<span class='recite-dictionary-synonym'>"+unescape(b)+"</span>,<br />"}),c+="<hr />")});a(c)})}function e(a,b){Recite.Debug.log("Recite.Dictionary","Start ajax");Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Dictionary",event:"definition: "+a});Recite.Api.call("dictionary","POST",{data:{words:escape(a)},contentType:"application/json",success:b});return!1}function c(a,b){a=document.createElement("div");
a.id="recite-dictionary";a.setAttribute("data-recite-skip","true");a.innerHTML=l.content;document.body.appendChild(a);a.className="recite-dictionary-"+l.position;"header"!==l.position&&(a.style.width=l.dimensions.width,a.style.height=l.dimensions.height);b.call()}var l={offsets:{height:140},position:"top-left",dimensions:{width:"250px",height:"400px"},content:'<div id="recite-dictionary-inner">                        <div id="recite-dictionary-inner-words">                        </div>                  </div>                  <div id="recite-dictionary-inner-reveal">                  </div>'},
f=null,k=!1,m=null;Recite.Event.subscribe("Recite.disable",function(){Recite.Dictionary.disable()});Recite.Event.subscribe("Preferences:load",h);Recite.Event.subscribe("Preferences:set",h);Recite.Event.subscribe("Preferences:reset",h);return{enable:function(){k||(0!==Recite.Dom.getLanguage(Recite.Sizzle("html")[0]).lastIndexOf("en",0)?Recite.Gui.Notification.show("Dictionary not available for this language."):(c(document,function(){g();a()}),f=Recite.Event.subscribe("Selection:textSelection",d),k=
!0,Recite.PlayerControls.disable(),Recite.Player.stop(),Recite.Debug.log("Recite.Dictionary","Dictionary enabled"),Recite.Gui.Notification.show("Recite dictionary enabled.  Select any word on the page to view it's definition"),Recite.Event.publish("Recite.Dictionary.enabled"),Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Dictionary",event:"enable"})))},disable:function(){k&&(Recite.Sizzle("#recite-dictionary",document)[0].style.display="none",Recite.Event.unsubscribe(f),k=!1,Recite.PlayerControls.enable(),
Recite.Gui.Notification.show("Dictionary disabled"),Recite.Event.publish("Recite.Dictionary.disabled"),Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Dictionary",event:"disable"}))},isEnabled:function(){return k},setOptions:function(a){l=Recite.Util.merge(l,a)}}}();Recite.namespace("Docreader");
Recite.Docreader=function(){function h(a){-1===a.getAttribute("href").indexOf(b.endpoint)&&a.setAttribute("href",b.endpoint+encodeURI(g(a.getAttribute("href"))))}function g(a){var b=document.createElement("span");b.innerHTML='<a href="'+a.split("&").join("&amp;").split('"').join("&quot;").split("<").join("&lt;")+'">&nbsp;</a>';return b.firstChild.href}var a=[],d=["pdf"],b={enabled:!0,selector:"docreader",urlMatches:[],endpoint:"https://docreader.reciteme.com/doc/url?q="};return{setOptions:function(a){b=Recite.Util.merge(b,
a)},enabled:function(){return b.enabled},setEnabled:function(a){b.enabled=a},load:function(){if(b.enabled){a=document.getElementsByTagName("a");for(var g=0;g<a.length;g++){var c=a[g];if(null!==c.getAttribute("href")){for(var l=c,f=0;f<b.urlMatches.length;f++)null!==l.getAttribute("href").match(b.urlMatches[f])&&h(l);l=c;f=l.getAttribute("href").split(".").pop();for(var k=0;k<d.length;k++)f===d[k]&&h(l);-1===c.className.indexOf(" "+b.selector)&&-1===c.className.indexOf(b.selector+" ")&&c.className!==
b.selector&&c.getAttribute("id")!==b.selector||h(c)}}}}}}();Recite.namespace("Keyboard");
Recite.Keyboard=function(){function h(){Recite.Debug.log("Recite.Keyboard","Binding keyboard keys");g.enabled&&Recite.Util.each(g.key_bindings,function(a,d){Recite.Key(a,d)})}var g={enabled:!0,key_bindings:{"ctrl+right":function(){Recite.PlayerControls.next();return!1},"ctrl+left":function(){Recite.PlayerControls.previous();return!1},"ctrl+alt+p":function(){Recite.PlayerControls.play();return!1},"ctrl+alt+f":function(){Recite.Sizzle(".recite-sprite-button-font")[0].click();return!1},"ctrl+alt+c":function(){Recite.Sizzle(".recite-sprite-button-themes")[0].click();
return!1},"ctrl+r":function(){Recite.Sizzle(".recite-sprite-button-ruler")[0].click();return!1},"ctrl+d":function(){Recite.Sizzle(".recite-sprite-button-dictionary")[0].click();return!1},"ctrl+l":function(){Recite.Sizzle(".recite-sprite-button-translate")[0].click();return!1},"ctrl+x":function(){Recite.Sizzle(".recite-sprite-button-textmode")[0].click();return!1},"ctrl+m":function(){Recite.Sizzle(".recite-sprite-button-margin")[0].click();return!1},"ctrl+shift+o":function(){Recite.Sizzle(".recite-sprite-button-settings")[0].click();
return!1},"ctrl+s":function(){Recite.Sizzle(".recite-sprite-button-save")[0].click();return!1}}};Recite.Event.subscribe("Recite:enable",h);return{setOptions:function(a){g=Recite.Util.merge(g,a)},enabled:function(){return g.enabled},setEnabled:function(a){g.enabled=a},load:function(){h()}}}();Recite.namespace("Tracker");
Recite.Tracker=function(){var h={enabled:!0};return{setOptions:function(g){h=Recite.Util.merge(h,g);Recite.Tracker.Api.setOptions(h.Api);Recite.Tracker.Ga.setOptions(h.Ga)},track:function(g,a){Recite.Debug.log("Recite.Tracker",g);Recite.Tracker.Api.track(g,a);Recite.Tracker.Ga.track(g,a)}}}();Recite.namespace("Tracker.Ga");
Recite.Tracker.Ga=function(){var h={enabled:!1,trackerName:void 0};return{setOptions:function(g){h=Recite.Util.merge(h,g)},track:function(g,a){h.enabled?(window.hasOwnProperty=window.hasOwnProperty||Object.prototype.hasOwnProperty,window.hasOwnProperty("GoogleAnalyticsObject")&&"function"==typeof window[window.GoogleAnalyticsObject]&&(Recite.Debug.log("Recite.Tracker.Ga",g),window[window.GoogleAnalyticsObject](void 0==h.trackerName?"send":h.trackerName+".send","event","ReciteMe",g+": "+a))):Recite.Debug.log("Recite.Tracker.Ga",
"Not enabled, ignoring")}}}();Recite.namespace("Tracker.Api");
Recite.Tracker.Api=function(){var h={enabled:!0};return{setOptions:function(g){h=Recite.Util.merge(h,g)},track:function(g,a){if(h.enabled){Recite.Debug.log("Recite.Tracker.Api",g);var d={};d.type=g;d.value=a;d.uri=window.location.toString();d.referrer=window.document.referrer||null;Recite.Api.call("tracking","POST",{data:{events:[d],system_info:{type:"browser",recite_version:"3.2.56",screenWidth:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,screenHeight:window.innerHeight||
document.documentElement.clientHeight||document.body.clientHeight}},success:function(a){Recite.Debug.log("Recite.Tracker.Api","Tracked event type: "+g)}})}}}}();Recite.namespace("Language.Translate");
Recite.Language.Translate=function(){function h(){var a=Recite.Dom.getLanguage(k);null==a&&(a="en");if(null==m.sourceLanguage||m.sourceLanguage!=a)m.sourceLanguage=a;null==m.workingPageLanguage&&(m.workingPageLanguage=a);m.listenForPreferenceChanges?(Recite.Debug.log("Recite.Language.Translate","Listening for prerefrence changes"),Recite.Event.subscribe("Preferences:load",c),Recite.Event.subscribe("Preferences:set",c),Recite.Event.subscribe("Preferences:reset",c)):Recite.Debug.log("Recite.Language.Translate",
"NOT Listening for prerefrence changes")}function g(b){if("undefined"!=typeof b.getAttribute&&("true"===b.getAttribute("data-recite-skip")||null!=m.translateIgnore&&void 0!=b.getAttribute(m.translateIgnore)))return!1;if(m.ignoreSelectors)for(var c=0;c<m.ignoreSelectors.length;c++){var d=m.ignoreSelectors[c];if(a(b,d))return!1;for(var f=Recite.Dom.getAncestors(b),g=0;g<f.length;g++)if(a(f[g],d))return!1}return!0}function a(a,b){if("function"==typeof a.matches)return a.matches(b);if("function"==typeof a.matchesSelector)return a.matchesSelector(b);
if("function"==typeof a.mozMatchesSelector)return a.mozMatchesSelector(b);if("function"==typeof a.msMatchesSelector)return a.msMatchesSelector(b);if("function"==typeof a.oMatchesSelector)return a.oMatchesSelector(b);if("function"==typeof a.webkitMatchesSelector)return a.webkitMatchesSelector(b);b=document.querySelectorAll(b);for(var c=0;c<b.length;c++)if(b[c]==a)return!0;return!1}function d(a,b){var c={};Recite.Util.each(a,function(a,d){a=null;for("undefined"!=typeof d&&(a=d.childNodes[0]);null!==
a&&"undefined"!=typeof a;){var f=!g(a);if(!f&&3===a.nodeType&&0<a.nodeValue.trim().length){if("undefined"===typeof a.originalContent||null===a.originalContent){a.originalContent=a.nodeValue;var e=Recite.Dom.getLanguage(a);a.originalLang=null!==e?e:m.sourceLanguage;a.originalParentLang=a.parentNode.lang}if(a.originalLang===b||a.originalLang.split("-")[0]===b){if(a.nodeValue=a.originalContent,a.parentNode.lang=a.originalParentLang||null,null==a.parentNode.lang||"null"==a.parentNode.lang)a.parentNode.lang=
m.sourceLanguage}else e=a.originalLang.split("-")[0],"undefined"===typeof c[e]&&(c[e]=[]),c[e].push(a)}if(a.hasChildNodes()&&0>Recite.Util.inArray(a.tagName,m.disallowedTags)&&!f)a=a.firstChild;else{for(;null===a.nextSibling&&a!==d;)a=a.parentNode;a=a===d?null:a.nextSibling}}});return c}function b(a){var b=[];if("INPUT"===a.nodeName&&a.attributes&&a.attributes.type){var c=a.attributes.type.value.toLowerCase();if("submit"==c||"reset"==c||"button"==c)b=["value"]}"BUTTON"===a.nodeName&&(b=["value"]);
return m.translateableAttributes.concat(b)}function e(a,c){var d={};if(0===m.translateableAttributes.length)return d;Recite.Util.each(a,function(a,f){var e=null;for("undefined"!=typeof f&&(e=f.childNodes[0]);null!==e&&"undefined"!=typeof e;){e.affectedAttributes=[];var h=!1;if("undefined"!==typeof e.attributes&&null!==e.attributes){var k=b(e);if(g(e))for(var l=0;l<k.length;l++)for(a=0;a<e.attributes.length;a++)if(e.attributes[a].nodeName===k[l]){e.affectedAttributes.push(e.attributes[a].nodeName);
"undefined"===typeof e.originalContent&&(e.originalContent=[]);if("undefined"===typeof e.originalContent[k[l]]||null===e.originalContent[k[l]])e.originalContent[k[l]]=e.getAttribute(k[l]),e.originalLang=null!==Recite.Dom.getLanguage(e)?Recite.Dom.getLanguage(e):m.sourceLanguage,e.originalParentLang=e.parentNode.lang;if(e.originalLang===c||"string"===typeof e.originalLang&&e.originalLang.split("-")[0]===c)e.setAttribute(e.attributes[a].nodeName,e.originalContent[k[l]]),e.parentNode.lang=e.originalParentLang||
m.sourceLanguage,null==e.parentNode.lang&&(e.parentNode.lang=m.sourceLanguage),h=!0}h||"undefined"===typeof e.originalLang||(a=e.originalLang.split("-")[0],"undefined"===typeof d[a]&&(d[a]=[]),d[a].push(e))}if(e.hasChildNodes()&&0>Recite.Util.inArray(e.tagName,m.disallowedTags))e=e.firstChild;else{for(;null===e.nextSibling&&e!==f;)e=e.parentNode;e=e===f?null:e.nextSibling}}});return d}function c(){var a=Recite.Preferences.get("language");null==m.sourceLanguage&&h();var b=null===a?m.workingPageLanguage!=
m.sourceLanguage:a!=m.workingPageLanguage;b&&Recite.Event.publish("Translate:global-begin");if(null!==a){if(Recite.Language.Translate.translate(Recite.Sizzle("#recite-wrapper")[0],a),Recite.Language.Translate.translate(Recite.Sizzle("#recite-header")[0],a),Recite.getOptions("shadowDomSupport")){var c=Recite.Sizzle("[data-recite-shadow]");Recite.Util.each(c,function(b,c){"undefined"!=typeof c.shadowRoot&&Recite.Language.Translate.translate(c.shadowRoot,a)})}}else Recite.Language.Translate.restore(),
Recite.Language.Translate.setWorkingPageLaguage(a);b&&Recite.Event.publish("Translate:global-end");if(null!==a)var d=Recite.Event.subscribe("Translate:complete",function(){Recite.Language.Translate.setWorkingPageLaguage(a);Recite.Event.unsubscribe(d)})}var l=[],f=[],k=Recite.Sizzle("html")[0];Text.prototype.originalContent=null;Text.prototype.originalLang=null;Text.prototype.originalParentLang=null;var m={sourceLanguage:"en",workingPageLanguage:null,maxChunkSize:100,maxCharacterLimit:3E3,disallowedTags:["SCRIPT",
"STYLE","NOSCRIPT"],translateableAttributes:["title","alt","placeholder"],translateIgnore:"data-recite-translate-skip",ignoreSelectors:[],listenForPreferenceChanges:!0};Recite.Event.subscribe("Recite.Dom.Observor:change",function(a,b){var c=Recite.Preferences.get("language");null!=c&&void 0!=b&&b.hasOwnProperty("affectedElements")&&Recite.Util.each(b.affectedElements,function(a,b){Recite.Debug.log("Recite.Language.Translate","DOM observer detected change");Recite.Debug.log("Recite.Language.Translate",
b);void 0==b.getAttribute("lang")&&(a=Recite.Dom.getLanguage(b.textContent),a=null===a?m.sourceLanguage:a,b.setAttribute("lang",a));Recite.Language.Translate.translate(b,c)})});return{init:function(){h()},setOptions:function(a){null!=a.sourceLanguage&&(a.workingPageLanguage=a.sourceLanguage);m=Recite.Util.merge(m,a)},getOptions:function(){return m},translate:function(a,b){if(Recite.Dom.getLanguage(a)!=b||b!==m.sourceLanguage&&0!==b.indexOf(m.sourceLanguage)){Recite.Event.publish("Translate:begin",
{"lang:":b});a=Recite.Util.isArray(a)?a:[a];var c=[],g=[];c=d(a,b);g=e(a,b);for(var h in g){var k=[];Recite.Util.each(g[h],function(a,b){for(a=0;a<b.affectedAttributes.length;a++)k.push(b.originalContent[b.affectedAttributes[a]])});a="null"!=h?h:m.sourceLanguage;var n=-1!==a.indexOf("-")?a.substring(0,a.indexOf("-")):a,q=-1!==b.indexOf("-")?b.substring(0,b.indexOf("-")):b;"zh"!==n&&(a=n);"zh"!==q&&(b=q);if(a!=b){var z={target:b,source:a,text:k};Recite.Api.call("translate","POST",{data:z,contentType:"application/json",
success:function(a){Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Language",event:"translate:"+b});for(var c in g)Recite.Util.each(g[c],function(c,d){for(c=0;c<d.affectedAttributes.length;c++)d.setAttribute(d.affectedAttributes[c],a[0]),d.lang=b,a.shift&&a.shift();f.push(d)})}})}}for(h in c){var C=[],u=0,t=[];Recite.Util.each(c[h],function(a,b){if(null!==m.maxChunkSize&&t.length>=m.maxChunkSize||null!==m.maxCharacterLimit&&u>=m.maxCharacters)C.push(t),t=[],u=0;t.push(b.originalContent);
u+=b.originalContent.length});C.push(t);Recite.Util.each(C,function(a,d){var f="null"!=h?h:m.sourceLanguage,e=-1!==f.indexOf("-")?f.substring(0,f.indexOf("-")):f,g=-1!==b.indexOf("-")?b.substring(0,b.indexOf("-")):b;"zh"!==e&&(f=e);"zh"!==g&&(b=g);f!=b&&(z={target:b,source:f,text:d},Recite.Api.call("translate","POST",{data:z,contentType:"application/json",success:function(d){Recite.Util.each(d,function(d,e){if(d=c[f][a*m.maxChunkSize+d])3===d.nodeType?(d.nodeValue=e,d.parentNode&&(d.parentNode.lang=
b)):(d.innerHTML=e,d.lang=b),l.push(d)});Recite.Event.publish("Translate:complete");Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Language",event:"translate:"+b})}}))})}}else Recite.Language.Translate.restore()},restore:function(){Recite.Language.Translate.resetWorkingPageLanguage();0<l.length&&(Recite.Debug.log("Language","Restoring source language"),Recite.Event.publish("Translate:restore_begin"),Recite.Util.each(l,function(a,b){b.nodeValue=b.originalContent;b.parentNode&&(b.parentNode.lang=
null!==b.originalParentLang?b.originalParentLang:m.sourceLanguage)}),Recite.Util.each(f,function(a,c){var d=b(c);for(a=0;a<c.attributes.length;a++)for(var f=0;f<d.length;f++)d[f]===c.attributes[a].nodeName&&(c.setAttribute(c.attributes[a].nodeName,c.originalContent[c.attributes[a].nodeName]),c.lang=null!==c.originalLang?c.originalLang:m.sourceLanguage)}),l=[],f=[],Recite.Event.publish("Translate:restore_complete"))},setWorkingPageLaguage:function(a){if(null!=a){if(null==k.originalLang||"undefined"==
typeof k.originalLang)k.originalLang=Recite.Dom.getLanguage(k);"undefined"!=typeof k.getAttribute&&k.setAttribute("lang",a);m.workingPageLanguage=a}},getWorkingPageLanguage:function(){return m.workingPageLanguage},resetWorkingPageLanguage:function(){null===k.originalLang&&(k.originalLang=m.sourceLanguage);null!==k.originalLang&&"undefined"!==typeof k.originalLang&&k.setAttribute("lang",k.originalLang);m.workingPageLanguage=m.sourceLanguage},hasActiveWorkingPageLanguage:function(){return m.workingPageLanguage!=
m.sourceLanguage?!0:!1}}}();Recite.namespace("Gui.Notification");
Recite.Gui.Notification=function(){function h(a){var b=document.createElement("div");b.innerHTML=a;b.id=l;b.content=a;b.setAttribute("role","alert");l++;var d=!1;Recite.Util.each(c,function(a,c){c.content==b.content&&(d=!0)});d||(c.push(b),document.body.appendChild(b));return b}function g(a){try{document.body.removeChild(a),c.splice(c.indexOf(a.id),1)}catch(k){}}function a(a,b){a.style.display="block";a.setAttribute("lang","en");e.timeout&&setTimeout(function(){g(a)},e.timeout);if(e.read)try{setTimeout(function(){Recite.Player.play(a.innerHTML)},
200)}catch(m){}e.localize&&d(a);Recite.DomEvent.add(a,"click",function(b,c){g(a)})}function d(a){var c=[];null==a?c=b():c.push(a);var d=null;Recite.Language.Translate.hasActiveWorkingPageLanguage()&&(d=Recite.Language.Translate.getWorkingPageLanguage());null==d&&(d=Recite.Dom.getLanguage(Recite.Sizzle("html")[0]));null!==d&&Recite.Util.each(c,function(a,b){"object"==typeof b&&Recite.Language.Translate.translate(b,d)})}function b(){var a=Recite.Sizzle(".recite-notification");return 1<a.length?a:[]}
var e={position:"top-right",timeout:4E3,read:!1,elementTopMgn:5,suppress:!1,localize:!0},c=[],l=0;Recite.Event.subscribe("Translate:restore_complete",d);Recite.Event.subscribe("Translate:complete",d);return{show:function(b,c){e.suppress||Recite.Browser.isMobile()||(Recite.Gui.Notification.setOptions(c),b=h(b),b.className="recite-notification recite-notification-"+e.position,c=Recite.Sizzle(".recite-notification"),1<c.length&&(c=c[c.length-2],c=parseInt(c.offsetTop+c.offsetHeight+e.elementTopMgn,10),
b.style.top=c+"px"),a(b))},destroy:function(a){g(a)},setOptions:function(a){e=Recite.Util.merge(e,a)},getOptions:function(){return e},getActive:function(){return b()},localizeActive:function(){d()}}}();Recite.namespace("Gui.Modal");
Recite.Gui.Modal=function(){function h(a,b){Recite.DomEvent.add(f,"click",function(b){d();a.call()});Recite.DomEvent.add(k,"click",function(a){d();b.call()})}function g(a){var b=[];Recite.Util.each(Recite.Sizzle("#recite-modal [tabindex]"),function(a,c){b.push(c)});0<b.length&&(b[0].focus(),Recite.Key("tab",function(){if(document.activeElement==b[b.length-1])return b[0].focus(),!1}),Recite.Key("shift+tab",function(){if(document.activeElement==b[0])return b[b.length-1].focus(),!1}))}function a(){m||
(Recite.DomEvent.add(Recite.Sizzle("#recite-wrapper")[0],"click",function(a){Recite.Gui.Modal.hide()}),Recite.Key("enter",function(){null!=e&&document.activeElement.click()}),Recite.Key("esc",function(){null!=e&&k.click()}),m=!0)}function d(){if(null!=e){e.parentNode.removeChild(e);e=null;var a=Recite.Sizzle("#recite-wrapper")[0];a.setAttribute("class",a.getAttribute("class").replace(" recite-fade",""))}}function b(a){var b=[];null==a?null!=e&&b.push(e):b.push(a);if(0!=b.length){var c=null;Recite.Language.Translate.hasActiveWorkingPageLanguage()&&
(c=Recite.Language.Translate.getWorkingPageLanguage());null==c&&(c=Recite.Dom.getLanguage(Recite.Sizzle("html")[0]));null!==c&&Recite.Util.each(b,function(a,b){"object"==typeof b&&Recite.Language.Translate.translate(b,c)})}}var e=null,c=null,l=null,f=null,k=null,m=!1;Recite.Event.subscribe("Translate:restore_complete",b);Recite.Event.subscribe("Translate:complete",b);return{init:function(){a()},show:function(m,q,p,w,r,x){a();d();if(null==e){var n=document.createElement("div");n.id="recite-modal";
n.setAttribute("aria-modal","true");e=n;var A=document.createElement("div");A.id="recite-modal-header";n.appendChild(A);c=A;A=document.createElement("div");A.id="recite-modal-content";n.appendChild(A);l=A;A=document.createElement("div");A.id="recite-modal-buttons";n.appendChild(A);var z=document.createElement("a");z.id="recite-modal-button-ok";z.className="recite-modal-button";z.setAttribute("tabindex",9001);z.innerHTML="OK";A.appendChild(z);f=z;z=document.createElement("a");z.id="recite-modal-button-cancel";
z.className="recite-modal-button";z.setAttribute("tabindex",9002);z.innerHTML="Cancel";A.appendChild(z);k=z;document.body.appendChild(n)}c.innerHTML=m;l.innerHTML=q;null!=p&&(f.innerHTML=p);null!=w&&(k.innerHTML=w);h(r,x);e.style.display="block";e.setAttribute("lang","en");g(e);m=Recite.Sizzle("#recite-wrapper")[0];m.setAttribute("class",m.getAttribute("class")+" recite-fade");b(e)},hide:function(){d()},localizeActive:function(){b()}}}();Recite.namespace("Magnifier");
Recite.Magnifier=function(){var h;function g(){Recite.Preferences.get("magnifier.enabled")&&!r?Recite.Magnifier.enable():r&&!Recite.Preferences.get("magnifier.enabled")&&Recite.Magnifier.disable()}function a(){if(!n){if(x||!r)return!1;Recite.Debug.log("Recite.Magnifier","Rendering Magnifier ...");x=!0;if(v){p=document.createElement("div");p.className="magnifying_holder";p.id="magnifying_holder";w=document.createElement("div");w.className="magnifying_glass";w.id="magnifying_glass";p.appendChild(w);
var a=document.createElement("div");a.className="magnifying_handle";a.id="magnifying_handle";p.appendChild(a);document.body.appendChild(p)}a=document.createElement("div");a.className="magnifying_content";a.id="magnifying_content";a.innerHTML+=Recite.Sizzle("body")[0].innerHTML;d("magnifying_holder",a);e(Recite.Sizzle("#recite-header",a)[0],a);b("script",a);a.style.visibility="hidden";a.style.top=B+"px";a.style.left=t+"px";a.style.width=window.innerWidth+"px";a.style.height="auto";var c=window.getComputedStyle(Recite.Sizzle("body")[0],
null).getPropertyValue("padding-top");a.style.paddingTop=c;""!=Recite.Dom.getStyle(document.body,"background")&&(a.style.background=Recite.Dom.getStyle(document.body,"background"));w.appendChild(a);a.style.visibility="visible";q&&e(q,document);q=a;v&&(a=window.pageXOffset,p.style.top=window.pageYOffset+30+"px",p.style.left=a+30+"px",v=!1);x=!1}}function d(a,b){a=b.getElementsByClassName(a);Recite.Util.each(a,function(a,c){e(c,b)})}function b(a,b){a=b.getElementsByTagName(a);Recite.Util.each(a,function(a,
c){e(c,b)})}function e(a,b){try{a.parentNode.removeChild(a)}catch(E){Recite.Debug.log("Recite.Magnifier","Error "+E)}}function c(){document.onmousemove=function(a){var b=a.pageX-p.offsetWidth/2,c=-(Math.abs(a.pageY)*m.scale)+p.offsetHeight-20,d=-(Math.abs(a.pageX)*m.scale)+p.offsetWidth;p.style.top=a.pageY-p.offsetHeight/2+"px";p.style.left=b+"px";q.style.top=c+"px";q.style.left=d+"px"}}function l(){var a=document.getElementById("magnifying_holder");document.getElementById("magnifying_glass");var b=
document.getElementById("magnifying_content");Recite.DomEvent.add(b,"mousedown",function(a){var b=[];var c=Recite.Dom.getIndex(p),d=Recite.Dom.getPath(a.target);c=d.indexOf(c);--d[c];var e=Recite.Dom.getPath(q.querySelector("#recite-wrapper")),g=Recite.Dom.getPath(document.querySelector("#recite-wrapper"));--e[c];for(var f in e)-1>=g.indexOf(e[f])&&b.push(f);for(f in b)d.splice(b[0],1);b=Recite.Dom.getNode(d);a=a.target;"INPUT"==a.nodeName&&a.focus();try{Recite.Debug.log("Recite.Magnifier","simulate mousedown");
var h=k(u,{});d=a=null;for(var l in C)if(C[l].test("mousedown")){d=l;break}if(!d)throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported");if(document.createEvent)a=document.createEvent(d),"HTMLEvents"==d?a.initEvent("mousedown",h.bubbles,h.cancelable):a.initMouseEvent("mousedown",h.bubbles,h.cancelable,document.defaultView,h.button,h.pointerX,h.pointerY,h.pointerX,h.pointerY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button,b),b.dispatchEvent(a);else{h.clientX=h.pointerX;h.clientY=
h.pointerY;var m=document.createEventObject();a=k(m,h);b.fireEvent("onmousedown",a)}}catch(L){Recite.Debug.log("Recite.Magnifier","Error "+L)}});Recite.DomEvent.add(a,"mousedown",function(a){a.preventDefault();this.setAttribute("data-drag",!0);this.setAttribute("data-dragMouseTop",a.pageY);this.setAttribute("data-dragMouseLeft",a.pageX);this.setAttribute("data-dragOffsetTop",parseInt(document.defaultView.getComputedStyle(this,null).getPropertyValue("top")));this.setAttribute("data-dragOffsetLeft",
parseInt(document.defaultView.getComputedStyle(this,null).getPropertyValue("left")))});Recite.DomEvent.add(document,"mousemove",function(a){h=a.pageX;z=a.pageY;if("true"==p.getAttribute("data-drag")){a=parseInt(p.getAttribute("data-dragOffsetLeft"))+(h-p.getAttribute("data-dragMouseLeft"));var b=parseInt(p.getAttribute("data-dragOffsetTop"))+(z-p.getAttribute("data-dragMouseTop"));p.style.top=b+60+"px";p.style.left=a+"px";b=-(b*m.scale)-p.offsetHeight/2;a=-(a*m.scale)-p.offsetWidth/2;q.style.top=
b+"px";q.style.left=a+"px";t=a;B=b}});Recite.DomEvent.add(window,"mouseup",function(a){p.setAttribute("data-drag",!1)})}function f(){var a=!1;window.onkeydown=function(b){17==b.keyCode&&(p.style.borderColor="#FF9600",p.style.pointerEvents="none",q.style.pointerEvents="none",a=1==a?!1:!0);if(192==b.keyCode){b=h;var c=z,d=p;d.setAttribute("data-dragMouseTop",c);d.setAttribute("data-dragMouseLeft",b);d.setAttribute("data-dragOffsetTop",c);d.setAttribute("data-dragOffsetLeft",b);b=h-p.offsetWidth/2;c=
z-p.offsetHeight/2;b=parseInt(p.getAttribute("data-dragOffsetLeft"))+(b-p.getAttribute("data-dragMouseLeft"));c=parseInt(p.getAttribute("data-dragOffsetTop"))+(c-p.getAttribute("data-dragMouseTop"));p.style.top=c+"px";p.style.left=b+"px";c=-(c*m.scale)-p.offsetHeight/2;b=-(b*m.scale)-p.offsetWidth/2;q.style.top=c+"px";q.style.left=b+"px";t=b;B=c}};window.onkeyup=function(b){0==a&&17==b.keyCode&&(p.style.borderColor="#333333",p.style.pointerEvents="inherit",q.style.pointerEvents="inherit",a=!1)}}function k(a,
b){for(var c in b)a[c]=b[c];return a}var m={realtimeRender:!0,followMouse:!1,scale:2,allowHighlights:!1,cacheImages:!0},n=!1,q=!1,p=!1,w=!1,r=!1,x=!1,v=!0,A=null;var z=h=0;var C={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|hover|dblclick|mouse(?:down|up|over|move|out))$/},u={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},t=100,B=100;Recite.Event.subscribe("Preferences:load",
g);Recite.Event.subscribe("Preferences:set",g);Recite.Event.subscribe("Preferences:reset",g);return{enable:function(){if(Recite.Browser.isMobile())Recite.Debug.log("Recite.Magnifier","Preventing load as feature not supported on mobile"),Recite.Gui.Notification.show("This feature is not available on your platform.",{read:!1});else if(!r){r=!0;n||(Recite.Ruler.disable(),Recite.ScreenMask.disable(),a(),m.followMouse?c():l(),1==m.realtimeRender&&(A=Recite.Event.subscribe("Recite.Dom.Observor:change",
a)),m.allowHighlights&&f(),Recite.Debug.log("Recite.Magnifier","Magnifier enabled"),Recite.Gui.Notification.show("Recite magnifier enabled"),Recite.Event.publish("Recite.Magnifier.enabled"),Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Magnifier",event:"enable"}));for(var b=[window],d=0;d<b.length;d++)Recite.DomEvent.add(b[d],"resize",a)}},disable:function(){if(r){r=!1;e(p,document);v=!0;Recite.Event.unsubscribe(A);Recite.Debug.log("Recite.Magnifier","Magnifier disabled");Recite.Gui.Notification.show("Recite magnifier disabled");
Recite.Event.publish("Recite.Magnifier.disabled");Recite.Event.publish("Recite:ModuleEvent",{name:"Recite.Magnifier",event:"disable"});Recite.Preferences.set("magnifier.enabled",!1);for(var b=[window],c=0;c<b.length;c++)Recite.DomEvent.remove(b[c],"resize",a)}},toggle:function(){Recite.Magnifier.isEnabled()?Recite.Magnifier.disable():Recite.Magnifier.enable()},isEnabled:function(){return r},setOptions:function(a){m=Recite.Util.merge(m,a)},disableInstance:function(){n=!0}}}();Recite.namespace("FrameUpdater");
Recite.FrameUpdater=function(){function h(a){var b=!1;a.hasOwnProperty("msgType")&&Recite.Util.each(r.validMessages,function(c,d){a.msgType==d&&(b=c)});return b}function g(a,b){if(f&&1==r.enable.post)for(var c=0;c<k.length;c++)("undefined"==typeof b||"undefined"!=typeof b&&-1==b.indexOf(k[c]))&&d(k[c],a)}function a(a){f&&1==r.enable.post&&d(window.top,a)}function d(a,b){if(f&&1==r.enable.post)try{var c=JSON.stringify(b);a.postMessage(c,"*")}catch(z){}}function b(a){if(f&&1==r.enable.listen&&"undefined"!=
typeof a.data)try{var b=JSON.parse(a.data);!1!==h(b)&&e(a)}catch(A){}}function e(b){var c=JSON.parse(b.data),e=h(c);if(0!=e&&f&&1==r.enable.listen){"setChildFrame"==e&&(k.push(b.source),d(b.source,{msgType:r.validMessages.HideControls}));"HideControls"==e&&(Recite.Controls.disable(),Recite.Controls.disableInstanceOverlay());"PreferencesSet"==e&&c.hasOwnProperty("payload")&&Recite.Preferences.set(c.payload);"PreferencesReset"==e&&c.hasOwnProperty("payload")&&Recite.Preferences.resetAll();"playerControlsShown"==
e&&(m&&g({msgType:r.validMessages.playerControlsShown},[b.source]),Recite.PlayerControls.hide(),Recite.PlayerControls.stop());"disable"==e&&(m&&g({msgType:r.validMessages.disable},[b.source]),Recite.disable(!0));if("playNext"==e&&c.hasOwnProperty("payload"))if(c.payload.hasOwnProperty("playParent"))m&&(q=null,setTimeout(function(){Recite.PlayerControls.next(w)},400));else if(c.payload.hasOwnProperty("src")){if(c.payload.src==window.self.location.href){var l={msgType:r.validMessages.setActiveChildFrame};
a(l);p=!0;Recite.PlayerControls.first()}}else c.payload.hasOwnProperty("playActiveChild")&&p&&(l=Recite.PlayerControls.next(),null==l&&"undefined"!=typeof l&&(l={msgType:r.validMessages.removeActiveChildFrame},a(l),p=!1,a({msgType:r.validMessages.playNext,payload:{playParent:!0,src:window.location.href}})));"playPrev"==e&&c.hasOwnProperty("payload")&&(c.payload.hasOwnProperty("playParent")?m&&(q=null,setTimeout(function(){Recite.PlayerControls.previous(w)},400)):c.payload.hasOwnProperty("src")?c.payload.src==
window.self.location.href&&(l={msgType:r.validMessages.setActiveChildFrame},a(l),p=!0,Recite.PlayerControls.last()):c.payload.hasOwnProperty("playActiveChild")&&p&&(l=Recite.PlayerControls.previous(),null==l&&"undefined"!=typeof l&&(l={msgType:r.validMessages.removeActiveChildFrame},a(l),p=!1,a({msgType:r.validMessages.playPrev,payload:{playParent:!0,src:window.location.href}}))));"setActiveChildFrame"==e&&(m?q=b.source:(q=null,p=!1));"removeActiveChildFrame"==e&&(m&&(l={msgType:r.validMessages.removeActiveChildFrame},
g(l,[b.source])),p=!1,q=null)}}function c(){var b={msgType:r.validMessages.PreferencesSet},c={msgType:r.validMessages.PreferencesReset},d={msgType:r.validMessages.playerControlsShown},e={msgType:r.validMessages.playNext},f={msgType:r.validMessages.playPrev};Recite.Event.subscribe("Preferences:set",function(){b.payload=Recite.Preferences.get();g(b)});Recite.Event.subscribe("Preferences:load",function(){b.payload=Recite.Preferences.get();g(b)});Recite.Event.subscribe("Preferences:reset",function(){c.payload=
Recite.Preferences.get();g(c)});Recite.Event.subscribe("Recite.Tooltip:show",function(){a({msgType:r.validMessages.removeActiveChildFrame});m?(g(d),q=null):(a(d),a({msgType:r.validMessages.setActiveChildFrame}),p=!0)});Recite.Event.subscribe("FrameUpdater:EnterFrame",function(a,b){b.hasOwnProperty("element")&&(b.hasOwnProperty("direction")&&"next"==b.direction?(e.payload={src:b.element.src},w=b.element,g(e)):b.hasOwnProperty("direction")&&"prev"==b.direction?(f.payload={src:b.element.src},w=b.element,
g(f)):(e.payload={src:b.element.src},w=b.element,g(e)))});m&&Recite.Event.subscribe("Recite:disable",function(a,b){g({msgType:r.validMessages.disable})})}function l(){Recite.Debug.log("FrameUpdater","Enabling");f||(window.top==window.self?m=!0:n=!0,f=1==r.enable.post||1==r.enable.listen,1==r.enable.listen&&window.addEventListener("message",b),1==r.enable.post&&c());n&&d(window.parent,{msgType:r.validMessages.setChildFrame});m&&(Recite.Util.each(window.frames,function(a,b){}),Recite.Util.each(Recite.Sizzle("iframe"),
function(a,b){Recite.DomEvent.add(b,"mouseover",function(){w=b})}))}var f=!1,k=[],m=null,n=null,q=null,p=!1,w=null,r={enabled:!1,enable:{post:!0,listen:!0},validOrigins:[window.location.origin],validDestinations:[window.location.origin],validMessages:{PreferencesSet:"Recite.PreferencesSet",PreferencesReset:"Recite.PreferencesReset",setChildFrame:"iknowittobetrue",playerControlsShown:"playerControlsShown",HideControls:"HideControls",playNext:"playNext",playPrev:"playPrev",setActiveChildFrame:"setActiveChildFrame",
removeActiveChildFrame:"removeActiveChildFrame",disable:"disable"},preferencesReloadDelay:100,parentSetDelay:1E3,maxTries:10};return{setOptions:function(a){r=Recite.Util.merge(r,a)},getOptions:function(){return r},load:function(){f||l()},disable:function(){f=!1},enabled:function(){return r.enabled},isActive:function(){return f},isParentFrame:function(){return m},isChildFrame:function(){return n},getActiveChildFrame:function(){return q},hasActiveChildFrame:function(){return m&&null!=q?!0:!1},activeFramePlayNext:function(){g({msgType:r.validMessages.playNext,
payload:{playActiveChild:!0}})},activeFramePlayPrev:function(){g({msgType:r.validMessages.playPrev,payload:{playActiveChild:!0}})}}}();
